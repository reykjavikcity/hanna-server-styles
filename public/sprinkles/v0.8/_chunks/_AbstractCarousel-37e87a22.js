import{h as $,F as b,_ as P,p as z}from"./compat.module-6d0944a1.js";import{m as A,t as j,A as B,i as O,c as F}from"./qj-b9335549.js";import"./getSVGtext-bab5132d.js";import{n as I}from"./misc-29f84158.js";import"./i18n-45294c51.js";import{o as n,u as W}from"./jsxRuntime.module-98db1a52.js";import"./_useMobileMenuToggling-5fde4833.js";const q={prefix:""},D=new Array(50).join(" ").split(""),G=e=>{const{current:c,itemCount:d,setCurrent:C,texts:v=q,wrapperProps:s}=e,i=v.prefix?`${v.prefix} `:"";return n("div",{...s,className:A("CarouselStepper",null,(s||{}).className),children:D.slice(0,d).map((w,m)=>{const h=c===m||void 0,u=i+(m+1);return n("button",{className:"CarouselStepper__button",type:"button",disabled:h,"aria-pressed":h,"aria-controls":e["aria-controls"],onClick:()=>C(m),"aria-label":u,title:u,children:u},m)})})},X=(e,c)=>{const d=e.scrollLeft+c;e.scrollTo(d,e.scrollTop)},J=e=>{const{title:c,items:d=[],Component:C,ComponentProps:v,childrenHTML:s,bem:i="Carousel",modifier:w,ssr:m,className:h,wrapperProps:u}=e,p=W(m),S=e.children?Array.isArray(e.children)?e.children.filter(I):[e.children]:void 0,[L,x]=$(),R=b(()=>{if(!(s!=null&&s.trim()))return;if(!p)return 1;const t=document.createElement("div");return t.innerHTML=s,t.children.length},[s,p]),_=e.itemCount!=null?e.itemCount:s?R:(S||d).length,g=P(null),[o,T]=$(0),a=p&&g.current;z(()=>{if(!a)return;const t=()=>{var r;x((r=a.parentElement)==null?void 0:r.getBoundingClientRect().left),X(a,0)},l=j(()=>{const{scrollLeft:r,children:k}=a;B(k).find((M,H)=>{if(r<=M.offsetLeft+M.offsetWidth/2)return T(H),!0})},300,!0);return t(),a.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",t,{passive:!0}),()=>{a.removeEventListener("scroll",l),window.removeEventListener("resize",t)}},[a]);const f=t=>{const l=g.current,r=l.children[t];r&&(T(t),l.scrollLeft=r.offsetLeft||1,setTimeout(()=>F.focusElm(r),500))},{delayedScrollLeft:N,delayedScrollRight:y}=b(()=>{const t=O(r=>{f(r-1),setTimeout(()=>t(r-1),0)},1e3),l=O(r=>{f(r+1),setTimeout(()=>l(r+1),0)},1e3);return{delayedScrollLeft:t,delayedScrollRight:l}},[]);if(!_)return null;const E=n("div",{className:`${i}__itemlist`,style:L?{"--Carousel--leftOffset":`${L}px`}:void 0,"data-scroll-snapping":L?"true":void 0,ref:g,dangerouslySetInnerHTML:s?{__html:s}:void 0,children:s?void 0:S||d.map((t,l)=>n(C,{...v,...t},l))});return n("div",{...u,className:A(i,w,h||(u||{}).className),"data-sprinkled":p,children:[c&&n("h2",{className:`${i}__title`,children:c}),p?n("div",{className:`${i}__itemlist-wrapper`,children:[E,o>0&&n("div",{className:`${i}__itemlist-goLeft`,onClick:()=>{N.cancel(),f(o-1)},onMouseOver:()=>N(o),onMouseOut:()=>N.cancel()}),o<_-1&&n("div",{className:`${i}__itemlist-goRight`,onClick:()=>{y.cancel(),f(o+1)},onMouseOver:()=>y(o),onMouseOut:()=>y.cancel()})]}):E,p&&n(G,{itemCount:_,setCurrent:f,current:o})]})};export{J as A};

import{h as k,b as T,p as z,F as B}from"./compat.module-8a0f8b99.js";import{g as j,t as F,A as I,k as x,c as P}from"./qj-afc7b5d6.js";import{g as W,o as i,a as $}from"./jsxRuntime.module-6c429607.js";import{n as q}from"./utils-96e946f5.js";import{r as D,h as G}from"./useFormatMonitor-9c639f1c.js";import{u as H}from"./seenEffect-ca174ea8.js";var A=D,J=W,K={prefix:""},Q=new Array(25).join(" ").split(""),U=function(e){var n=e.bem,l=n===void 0?"CarouselStepper":n,_=e.modifier,g=e.current,o=e.itemCount,b=e.setCurrent,p=e.texts,v=p===void 0?K:p,h=v.prefix?v.prefix+" ":"";return A.createElement("div",{className:J(l,_)},Q.slice(0,o).map(function(C,m){var u=g===m||void 0,a=h+(m+1);return A.createElement("button",{key:m,className:l+"__button",type:"button",disabled:u,"aria-pressed":u,"aria-controls":e["aria-controls"],onClick:function(){return b(m)},"aria-label":a,title:a},a)}))},V=U;const X=j(V),Y=e=>i(X,{...e,bem:void 0,modifier:void 0}),Z=(e,n)=>{const l=e.scrollLeft+n;e.scrollTo(l,e.scrollTop)},ee=e=>{const{title:n,items:l=[],Component:_,ComponentProps:g,bem:o="Carousel",modifier:b,ssr:p,startSeen:v}=e,h=e.children?Array.isArray(e.children)?e.children.filter(q):[e.children]:void 0,[C,m]=k(),u=e.itemCount||(h||l).length,a=T(null),[c,E]=k(0),L=G.useIsBrowserSide(p),d=L&&a.current;z(()=>{if(!d)return;const r=()=>{var t;m((t=d.parentElement)==null?void 0:t.getBoundingClientRect().left),Z(d,0)},s=F(()=>{const{scrollLeft:t,children:M}=d;I(M).find((S,R)=>{if(t<=S.offsetLeft+S.offsetWidth/2)return E(R),!0})},300,!0);return r(),d.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),()=>{d.removeEventListener("scroll",s),window.removeEventListener("resize",r)}},[d]);const f=r=>{const s=a.current,t=s.children[r];t&&(E(r),s.scrollLeft=t.offsetLeft||1,setTimeout(()=>P(t),500))},{delayedScrollLeft:y,delayedScrollRight:w}=B(()=>{const r=x(t=>{f(t-1),setTimeout(()=>r(t-1),0)},1e3),s=x(t=>{f(t+1),setTimeout(()=>s(t+1),0)},1e3);return{delayedScrollLeft:r,delayedScrollRight:s}},[]),[O]=H(v);if(!u)return null;const N=i("div",{className:o+"__itemlist",style:C?{"--Carousel--leftOffset":`${C}px`}:void 0,"data-scroll-snapping":C?"true":void 0,ref:a,children:h||l.map((r,s)=>i(_,{...g,...r},s))});return i("div",{className:$(o,b,e.className),ref:O,"data-sprinkled":L,children:[n&&i("h2",{className:o+"__title",children:n}),L?i("div",{className:o+"__itemlist-wrapper",children:[N,c>0&&i("div",{className:o+"__itemlist-goLeft",onClick:()=>{y.cancel(),f(c-1)},onMouseOver:()=>y(c),onMouseOut:()=>y.cancel()}),c<u-1&&i("div",{className:o+"__itemlist-goRight",onClick:()=>{w.cancel(),f(c+1)},onMouseOver:()=>w(c),onMouseOut:()=>w.cancel()})]}):N,L&&i(Y,{itemCount:u,setCurrent:f,current:c})]})};export{ee as A};

import{b as w,h as C,p as L,T as A}from"./compat.module-8a0f8b99.js";import{m as F}from"./qj-a13fcd70.js";import{a as H}from"./utils-9450e812.js";import{B as P}from"./_Button-82a83a60.js";import{i as x}from"./env-7ef80a23.js";import{h as E}from"./useFormatMonitor-a717dd05.js";import{o as d}from"./jsxRuntime.module-ece33ea3.js";const I=400,N=(a,i)=>{const[u,c]=C(0);if(!a)return{autoClosing:!1};const r=o=>{c(n=>n+1);const t=i[o.type.startsWith("blur")?"onBlur":"onMouseLeave"];t&&t(o)},e=o=>{c(n=>n-1);const t=i[o.type.startsWith("focus")?"onFocus":"onMouseEnter"];t&&t(o)};return{autoClosing:u===0,autoClosingProps:{onMouseEnter:e,onMouseLeave:r,onFocus:e,onBlur:r,...x&&{onfocusin:o=>o.currentTarget!==o.target&&e(o),onfocusout:o=>o.currentTarget!==o.target&&r(o)}}}},v={en:{closeLabel:"Hide"},is:{closeLabel:"Fela"}},k={info:1,success:1,warning:1,error:1,critical:1},S=a=>{const{type:i,childrenHTML:u,children:c,onClose:r,closeUrl:e,closable:o=!!(r||e!=null),ssr:t,onClosed:n,wrapperProps:f}=a,m=Math.max(a.autoClose||0,0),l=w(),[M,g]=C(!!t),y=E.useIsBrowserSide(t),B=o&&(y||e!=null),{closeLabel:h,closeLabelLong:b}=H(a,v);L(()=>{g(!0)},[]);const p=A(s=>{(r&&r(s))!==!1&&(g(!1),l.current&&(clearTimeout(l.current),l.current=void 0),l.current=setTimeout(()=>{n&&n()},I))},[r,n]),{autoClosing:T,autoClosingProps:_}=N(m,a);return L(()=>{if(T){let s;return s=setTimeout(()=>{p()},m*1e3),()=>{s&&(clearTimeout(s),s=void 0),l.current&&(clearTimeout(l.current),l.current=void 0)}}},[p,T,m]),d("div",{...f,className:F("Alert",[!!k[i]&&i,o&&"closable"],(f||{}).className),role:"alert",hidden:!M||void 0,..._,children:[u?d("div",{dangerouslySetInnerHTML:{__html:u}}):c," ",B&&d(P,{bem:"Alert__close",...e!=null?{href:e}:{type:"button"},onClick:s=>{p(s)},"aria-label":b,title:b||h,children:h})]})};export{S as A,v as d};

import{b as A,h as T,p as C,T as B}from"./compat.module-8a0f8b99.js";import{o as m,a as H}from"./jsxRuntime.module-6c429607.js";import{a as w}from"./utils-96e946f5.js";import{B as x}from"./_Button-c2359514.js";import{i as F}from"./env-7ef80a23.js";import{h as I}from"./useFormatMonitor-9c639f1c.js";import"./qj-afc7b5d6.js";const P=400,S=s=>{const[a,l]=T(0);if(!s)return{autoClosing:!1};const n=()=>l(o=>o+1),e=()=>l(o=>o-1);return{autoClosing:a===0,autoClosingProps:{onMouseEnter:e,onMouseLeave:n,onFocus:e,onBlur:n,...F&&{onfocusin:o=>o.currentTarget!==o.target&&e(),onfocusout:o=>o.currentTarget!==o.target&&n()}}}},L={en:{closeLabel:"Hide"},is:{closeLabel:"Fela"}},k={info:1,success:1,warning:1,error:1,critical:1},E=s=>{const{type:a,childrenHTML:l,children:n,onClose:e,closeUrl:o,closable:d=!!(e||o!=null),ssr:p,onClosed:i}=s,c=Math.max(s.autoClose||0,0),t=A(),[v,f]=T(!!p),M=I.useIsBrowserSide(p),_=d&&(M||o!=null),{closeLabel:g,closeLabelLong:b}=w(s,L);C(()=>{f(!0)},[]);const u=B(r=>{(e&&e(r))!==!1&&(f(!1),t.current&&(clearTimeout(t.current),t.current=void 0),t.current=setTimeout(()=>{i&&i()},P))},[e,i]),{autoClosing:h,autoClosingProps:y}=S(c);return C(()=>{if(h){let r;return r=setTimeout(()=>{u()},c*1e3),()=>{r&&(clearTimeout(r),r=void 0),t.current&&(clearTimeout(t.current),t.current=void 0)}}},[u,h,c]),m("div",{className:H("Alert",[!!k[a]&&a,d&&"closable"]),role:"alert",hidden:!v||void 0,...y,children:[l?m("div",{dangerouslySetInnerHTML:{__html:l}}):n," ",_&&m(x,{bem:"Alert__close",...o!=null?{href:o}:{type:"button"},onClick:r=>{u(r)},"aria-label":b,title:b||g,children:g})]})};export{E as A,L as d};

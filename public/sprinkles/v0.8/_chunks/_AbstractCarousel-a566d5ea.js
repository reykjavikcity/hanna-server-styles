import{h as S,_ as M,p as P,F as R}from"./compat.module-6d0944a1.js";import{m as A,t as z,A as j,i as O,c as B}from"./qj-b9335549.js";import"./getSVGtext-bab5132d.js";import{n as F}from"./misc-29f84158.js";import"./i18n-45294c51.js";import{o as l,u as W}from"./jsxRuntime.module-98db1a52.js";import"./_useMobileMenuToggling-5fde4833.js";const q={prefix:""},D=new Array(50).join(" ").split(""),I=e=>{const{current:a,itemCount:c,setCurrent:h,texts:f=q,wrapperProps:o}=e,C=f.prefix?`${f.prefix} `:"";return l("div",{...o,className:A("CarouselStepper",null,(o||{}).className),children:D.slice(0,c).map((w,m)=>{const u=a===m||void 0,d=C+(m+1);return l("button",{className:"CarouselStepper__button",type:"button",disabled:u,"aria-pressed":u,"aria-controls":e["aria-controls"],onClick:()=>h(m),"aria-label":d,title:d,children:d},m)})})},X=(e,a)=>{const c=e.scrollLeft+a;e.scrollTo(c,e.scrollTop)},Y=e=>{const{title:a,items:c=[],Component:h,ComponentProps:f,bem:o="Carousel",modifier:C,ssr:w,className:m,wrapperProps:u}=e,d=e.children?Array.isArray(e.children)?e.children.filter(F):[e.children]:void 0,[_,T]=S(),L=e.itemCount!=null?e.itemCount:(d||c).length,N=M(null),[i,$]=S(0),v=W(w),n=v&&N.current;P(()=>{if(!n)return;const r=()=>{var t;T((t=n.parentElement)==null?void 0:t.getBoundingClientRect().left),X(n,0)},s=z(()=>{const{scrollLeft:t,children:k}=n;j(k).find((x,E)=>{if(t<=x.offsetLeft+x.offsetWidth/2)return $(E),!0})},300,!0);return r(),n.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),()=>{n.removeEventListener("scroll",s),window.removeEventListener("resize",r)}},[n]);const p=r=>{const s=N.current,t=s.children[r];t&&($(r),s.scrollLeft=t.offsetLeft||1,setTimeout(()=>B.focusElm(t),500))},{delayedScrollLeft:g,delayedScrollRight:y}=R(()=>{const r=O(t=>{p(t-1),setTimeout(()=>r(t-1),0)},1e3),s=O(t=>{p(t+1),setTimeout(()=>s(t+1),0)},1e3);return{delayedScrollLeft:r,delayedScrollRight:s}},[]);if(!L)return null;const b=l("div",{className:`${o}__itemlist`,style:_?{"--Carousel--leftOffset":`${_}px`}:void 0,"data-scroll-snapping":_?"true":void 0,ref:N,children:d||c.map((r,s)=>l(h,{...f,...r},s))});return l("div",{...u,className:A(o,C,m||(u||{}).className),"data-sprinkled":v,children:[a&&l("h2",{className:`${o}__title`,children:a}),v?l("div",{className:`${o}__itemlist-wrapper`,children:[b,i>0&&l("div",{className:`${o}__itemlist-goLeft`,onClick:()=>{g.cancel(),p(i-1)},onMouseOver:()=>g(i),onMouseOut:()=>g.cancel()}),i<L-1&&l("div",{className:`${o}__itemlist-goRight`,onClick:()=>{y.cancel(),p(i+1)},onMouseOver:()=>y(i),onMouseOut:()=>y.cancel()})]}):b,v&&l(I,{itemCount:L,setCurrent:p,current:i})]})};export{Y as A};

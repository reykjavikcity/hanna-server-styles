import{h as B,T as z,C as A}from"./compat.module-8a0f8b99.js";import{m as G}from"./qj-a13fcd70.js";import{h as K}from"./useFormatMonitor-a717dd05.js";import{i as H}from"./env-7ef80a23.js";import"./utils-9450e812.js";import{o as l}from"./jsxRuntime.module-ece33ea3.js";const J={bem:"FormField",input:"FormField__input",options:"FormField__options",control:"FormField__control"},Q=e=>{const{extraClassName:m,className:o,small:u,group:d,LabelTag:i=d?"h4":void 0,label:t,assistText:s,hideLabel:T,empty:c,filled:b,readOnly:f,disabled:g,invalid:y,errorMessage:a,required:h,reqText:F,renderInput:n,id:q,ssr:S,wrapperProps:p}=e,N=K.useIsBrowserSide(S),C=y||!!a||void 0,_=K.useDomid(q),[W,I]=B(!1),E=z(O=>{const{onFocus:R,onBlur:$}=O||{},k=r=>{(!r.relatedTarget||!r.currentTarget.contains(r.relatedTarget))&&I(!0),R&&R(r)},M=r=>{(!r.relatedTarget||!r.currentTarget.contains(r.relatedTarget))&&I(!1),$&&$(r)},L={...O,onFocus:k,onBlur:M};if(H){const r=v=>{v.currentTarget!==v.target&&k(v)},j=v=>{v.currentTarget!==v.target&&M(v)};L.onfocusin=r,L.onfocusout=j}return L},[]),w=a?`error:${_}`:void 0,x=s?`assist:${_}`:void 0,P=i?`label:${_}`:void 0,D=h&&F!==!1&&l("abbr",{className:"FormField__label__reqstar",title:`${F||"\xDEarf a\xF0 fylla \xFAt"}: `,children:"*"}),V={id:_,disabled:g,required:h,readOnly:f,"aria-invalid":C,"aria-describedby":x&&w?x+" "+w:x||w,"aria-labelledby":P};return l("div",{ref:e.wrapperRef,...p,className:G("FormField",[u&&"small",T&&"nolabel",C&&"invalid",g&&"disabled",f&&"readonly",N&&c&&"empty",N&&b&&"filled",N&&W&&"focused"],(o||(p||{}).className||"")+(m?` ${m}`:"")),children:[i?l(i,{className:"FormField__label","data-inputlabel":d==="inputlike"||void 0,id:P,children:[" ",D," ",t," "]}):l("label",{className:"FormField__label",htmlFor:_,children:[" ",D," ",t," "]})," ",n(J,V,E,N),s&&l("div",{id:x,className:"FormField__assist",children:s}),a&&l("div",{id:w,className:"FormField__error",children:a})]})},U=e=>{const{wrapperProps:m,label:o,hideLabel:u,LabelTag:d,required:i,reqText:t,disabled:s,readOnly:T,assistText:c,invalid:b,errorMessage:f,id:g,small:y,ssr:a,className:h,wrapperRef:F}=e;return{wrapperProps:m,label:o,LabelTag:d,hideLabel:u,required:i,reqText:t,disabled:s===!0,readOnly:T,assistText:c,invalid:b,errorMessage:f,id:g,small:y,ssr:a,className:h,wrapperRef:F}},X=e=>{const{wrapperProps:m,label:o,hideLabel:u,LabelTag:d,required:i,reqText:t,disabled:s,readOnly:T,assistText:c,invalid:b,errorMessage:f,id:g,small:y,ssr:a,className:h,wrapperRef:F,...n}=e;return{fieldWrapperProps:U(e),...n}},Y=A.forwardRef((e,m)=>{const{onChange:o,buttonText:u="Leita",onSubmit:d,onButtonClick:i=e.onSubmit,onKeyDown:t,placeholder:s=typeof e.label=="string"?e.label:void 0,fieldWrapperProps:T,...c}=X(e),{value:b,defaultValue:f}=c,[g,y]=B(void 0),a=!!(b??g??!!f),h=!a&&!s,F=b!=null?o:n=>{y(!!n.target.value),o&&o(n)};return l(Q,{extraClassName:"SiteSearchInput",empty:h,filled:a,...T,renderInput:(n,q,S)=>l("div",{className:n.input,...S(),children:[l("input",{className:"SiteSearchInput__input",onChange:F,...q,placeholder:s,onKeyDown:d?p=>{p.key==="Enter"&&d()!==!0&&p.preventDefault(),t&&t(p)}:t,...c,ref:m})," ",l("button",{className:"SiteSearchInput__button",type:"submit",onClick:i&&(p=>!i()&&p.preventDefault()),title:u,children:u})]})})});export{Y as S};

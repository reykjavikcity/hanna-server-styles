import{a as B,h as T,p as C,T as F}from"./compat.module-edfc5ce4.js";import{m as H}from"./qj-f5658347.js";import{b as P}from"./utils-ed8ff0d8.js";import{B as k}from"./_Button-b5040285.js";import{i as w}from"./env-971c3e3e.js";import{u as x,o as d}from"./jsxRuntime.module-53ce29b9.js";import"./useFormatMonitor-6ee15356.js";const E=400,N=(a,u)=>{const[i,c]=T(0);if(!a)return{autoClosing:!1};const e=o=>{c(n=>n+1);const t=u[o.type.startsWith("blur")?"onBlur":"onMouseLeave"];t&&t(o)},r=o=>{c(n=>n-1);const t=u[o.type.startsWith("focus")?"onFocus":"onMouseEnter"];t&&t(o)};return{autoClosing:i===0,autoClosingProps:{onMouseEnter:r,onMouseLeave:e,onFocus:r,onBlur:e,...w&&{onfocusin:o=>o.currentTarget!==o.target&&r(o),onfocusout:o=>o.currentTarget!==o.target&&e(o)}}}},v={en:{closeLabel:"Hide"},is:{closeLabel:"Fela"},pl:{closeLabel:"Ukryj"}},I={info:1,success:1,warning:1,error:1,critical:1},U=a=>{const{type:u,childrenHTML:i,children:c,onClose:e,closeUrl:r,closable:o=!!(e||r!=null),ssr:t,onClosed:n,wrapperProps:f}=a,m=Math.max(a.autoClose||0,0),l=B(),[M,b]=T(!!t),y=x(t),_=o&&(y||r!=null),{closeLabel:g,closeLabelLong:h}=P(a,v);C(()=>{b(!0)},[]);const p=F(s=>{(e&&e(s))!==!1&&(b(!1),l.current&&(clearTimeout(l.current),l.current=void 0),l.current=setTimeout(()=>{n&&n()},E))},[e,n]),{autoClosing:L,autoClosingProps:A}=N(m,a);return C(()=>{if(L){let s;return s=setTimeout(()=>{p()},m*1e3),()=>{s&&(clearTimeout(s),s=void 0),l.current&&(clearTimeout(l.current),l.current=void 0)}}},[p,L,m]),d("div",{...f,className:H("Alert",[!!I[u]&&u,o&&"closable"],(f||{}).className),role:"alert",hidden:!M||void 0,...A,children:[i?d("div",{dangerouslySetInnerHTML:{__html:i}}):c," ",_&&d(k,{bem:"Alert__close",...r!=null?{href:r}:{type:"button"},onClick:s=>{p(s)},"aria-label":h,title:h||g,children:g})]})};export{U as A,v as d};

import{h as A,b as k,p as P,F as z}from"./compat.module-8a0f8b99.js";import{m as O,t as B,A as j,i as T,c as F}from"./qj-a13fcd70.js";import{n as I}from"./utils-9450e812.js";import{o as l}from"./jsxRuntime.module-ece33ea3.js";import{h as W}from"./useFormatMonitor-a717dd05.js";const $={prefix:""},q=new Array(50).join(" ").split(""),D=e=>{const{current:a,itemCount:c,setCurrent:h,texts:f=$,wrapperProps:o}=e,C=f.prefix?f.prefix+" ":"";return l("div",{...o,className:O("CarouselStepper",null,(o||{}).className),children:q.slice(0,c).map((y,d)=>{const u=a===d||void 0,m=C+(d+1);return l("button",{className:"CarouselStepper__button",type:"button",disabled:u,"aria-pressed":u,"aria-controls":e["aria-controls"],onClick:()=>h(d),"aria-label":m,title:m,children:m},d)})})},U=(e,a)=>{const c=e.scrollLeft+a;e.scrollTo(c,e.scrollTop)},X=e=>{const{title:a,items:c=[],Component:h,ComponentProps:f,bem:o="Carousel",modifier:C,ssr:y,className:d,wrapperProps:u}=e,m=e.children?Array.isArray(e.children)?e.children.filter(I):[e.children]:void 0,[L,E]=A(),_=e.itemCount!=null?e.itemCount:(m||c).length,N=k(null),[i,b]=A(0),v=W.useIsBrowserSide(y),n=v&&N.current;P(()=>{if(!n)return;const r=()=>{var t;E((t=n.parentElement)==null?void 0:t.getBoundingClientRect().left),U(n,0)},s=B(()=>{const{scrollLeft:t,children:M}=n;j(M).find((x,R)=>{if(t<=x.offsetLeft+x.offsetWidth/2)return b(R),!0})},300,!0);return r(),n.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),()=>{n.removeEventListener("scroll",s),window.removeEventListener("resize",r)}},[n]);const p=r=>{const s=N.current,t=s.children[r];t&&(b(r),s.scrollLeft=t.offsetLeft||1,setTimeout(()=>F.focusElm(t),500))},{delayedScrollLeft:g,delayedScrollRight:w}=z(()=>{const r=T(t=>{p(t-1),setTimeout(()=>r(t-1),0)},1e3),s=T(t=>{p(t+1),setTimeout(()=>s(t+1),0)},1e3);return{delayedScrollLeft:r,delayedScrollRight:s}},[]);if(!_)return null;const S=l("div",{className:o+"__itemlist",style:L?{"--Carousel--leftOffset":`${L}px`}:void 0,"data-scroll-snapping":L?"true":void 0,ref:N,children:m||c.map((r,s)=>l(h,{...f,...r},s))});return l("div",{...u,className:O(o,C,d||(u||{}).className),"data-sprinkled":v,children:[a&&l("h2",{className:o+"__title",children:a}),v?l("div",{className:o+"__itemlist-wrapper",children:[S,i>0&&l("div",{className:o+"__itemlist-goLeft",onClick:()=>{g.cancel(),p(i-1)},onMouseOver:()=>g(i),onMouseOut:()=>g.cancel()}),i<_-1&&l("div",{className:o+"__itemlist-goRight",onClick:()=>{w.cancel(),p(i+1)},onMouseOver:()=>w(i),onMouseOut:()=>w.cancel()})]}):S,v&&l(D,{itemCount:_,setCurrent:p,current:i})]})};export{X as A};

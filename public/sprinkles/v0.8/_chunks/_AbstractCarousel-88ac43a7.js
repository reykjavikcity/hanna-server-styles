import{h as O,a as R,p as P,F as z}from"./compat.module-504d8e29.js";import{m as T,t as j,A as B,i as k,e as F}from"./qj-c3d9a20d.js";import{n as W}from"./utils-a3d70c94.js";import{o as l,u as $}from"./jsxRuntime.module-c44f51ea.js";import"./useFormatMonitor-69620455.js";const q={prefix:""},D=new Array(50).join(" ").split(""),I=e=>{const{current:a,itemCount:c,setCurrent:h,texts:f=q,wrapperProps:o}=e,C=f.prefix?f.prefix+" ":"";return l("div",{...o,className:T("CarouselStepper",null,(o||{}).className),children:D.slice(0,c).map((w,d)=>{const m=a===d||void 0,u=C+(d+1);return l("button",{className:"CarouselStepper__button",type:"button",disabled:m,"aria-pressed":m,"aria-controls":e["aria-controls"],onClick:()=>h(d),"aria-label":u,title:u,children:u},d)})})},U=(e,a)=>{const c=e.scrollLeft+a;e.scrollTo(c,e.scrollTop)},X=e=>{const{title:a,items:c=[],Component:h,ComponentProps:f,bem:o="Carousel",modifier:C,ssr:w,className:d,wrapperProps:m}=e,u=e.children?Array.isArray(e.children)?e.children.filter(W):[e.children]:void 0,[L,A]=O(),_=e.itemCount!=null?e.itemCount:(u||c).length,N=R(null),[n,b]=O(0),v=$(w),i=v&&N.current;P(()=>{if(!i)return;const r=()=>{var t;A((t=i.parentElement)==null?void 0:t.getBoundingClientRect().left),U(i,0)},s=j(()=>{const{scrollLeft:t,children:E}=i;B(E).find((S,M)=>{if(t<=S.offsetLeft+S.offsetWidth/2)return b(M),!0})},300,!0);return r(),i.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),()=>{i.removeEventListener("scroll",s),window.removeEventListener("resize",r)}},[i]);const p=r=>{const s=N.current,t=s.children[r];t&&(b(r),s.scrollLeft=t.offsetLeft||1,setTimeout(()=>F.focusElm(t),500))},{delayedScrollLeft:g,delayedScrollRight:y}=z(()=>{const r=k(t=>{p(t-1),setTimeout(()=>r(t-1),0)},1e3),s=k(t=>{p(t+1),setTimeout(()=>s(t+1),0)},1e3);return{delayedScrollLeft:r,delayedScrollRight:s}},[]);if(!_)return null;const x=l("div",{className:o+"__itemlist",style:L?{"--Carousel--leftOffset":`${L}px`}:void 0,"data-scroll-snapping":L?"true":void 0,ref:N,children:u||c.map((r,s)=>l(h,{...f,...r},s))});return l("div",{...m,className:T(o,C,d||(m||{}).className),"data-sprinkled":v,children:[a&&l("h2",{className:o+"__title",children:a}),v?l("div",{className:o+"__itemlist-wrapper",children:[x,n>0&&l("div",{className:o+"__itemlist-goLeft",onClick:()=>{g.cancel(),p(n-1)},onMouseOver:()=>g(n),onMouseOut:()=>g.cancel()}),n<_-1&&l("div",{className:o+"__itemlist-goRight",onClick:()=>{y.cancel(),p(n+1)},onMouseOver:()=>y(n),onMouseOut:()=>y.cancel()})]}):x,v&&l(I,{itemCount:_,setCurrent:p,current:n})]})};export{X as A};

import"./initHannaNamespace.js";import{h as F,b as I,F as W,p as H,C as $}from"../_chunks/compat.module-8a0f8b99.js";import{c as j,m as q,h as z,a as y,q as G}from"../_chunks/qj-a13fcd70.js";import{h as A}from"../_chunks/useFormatMonitor-a717dd05.js";import{a as J,n as K}from"../_chunks/utils-9450e812.js";import{L as M}from"../_chunks/_Link-74f07e43.js";import{o as n}from"../_chunks/jsxRuntime.module-ece33ea3.js";import"../_chunks/focus-visible-afa5ee60.js";const Q=e=>e&&e.trim().replace(/(?:\n\s*)+/g,`

`).split(/\n/).map((a,l)=>a||n("br",{},l)),R={is:{lang:"is",openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{lang:"en",openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"}},U={suggestions:1,phone:1,faq:1,livechat:1,other:0},D=e=>e&&U[e]?e:void 0,V=e=>{const{title:a,links:l,onToggle:d,alwaysShow:C,wrapperProps:g={}}=e,r=J(e,R),h=e.open==null,[b,p]=F(!1),s=h?b:e.open,c=A.useIsBrowserSide(e.ssr),_=A.useDomid(),L=I(null),v=g.ref||L,{openBubble:P,closeBubble:i}=W(()=>({openBubble:()=>{h&&p(!0),d&&d(!0)},closeBubble:o=>{h&&p(!1),d&&d(!1),o!==!1&&j.focusElm(v.current)}}),[h,d]);if(H(()=>{const o=v.current;if(!o)return;if(C){o.dataset.show="true";return}let u=0;const t=()=>{u||(u=requestAnimationFrame(()=>{const{scrollTop:m,scrollHeight:B,clientHeight:E}=document.documentElement,k=B-E,f=1,w=m>f*150&&k-m>f*250;o.dataset.show=String(w),!w&&i(!1),u=0}))};return t(),document.addEventListener("scroll",t),document.documentElement.addEventListener("scroll",t),()=>{document.removeEventListener("scroll",t),document.documentElement.removeEventListener("scroll",t)}},[c,C,i]),H(()=>{const o=m=>m.key==="Escape"&&i(),u=m=>{var B;s&&!((B=v.current)!=null&&B.contains(m.target))&&i(!1)};document.addEventListener("keydown",o),document.addEventListener("click",u,!0);const t=document.documentElement.dataset;return s?t.contactBubble="true":delete t.contactBubble,()=>{delete t.contactBubble,document.removeEventListener("keydown",o),document.removeEventListener("click",u,!0)}},[s,i]),l.length===0)return null;const N=n("div",{...e.wrapperProps,className:q("ContactBubble",null,g.className),id:c&&_,hidden:c&&!s,"data-always-show":C||void 0,"data-sprinkled":c,children:[n("h2",{className:"ContactBubble__title",children:a||r.openBtn}),n("ul",{className:"ContactBubble__list",children:l.map((o,u)=>{const{href:t,label:m,extraLabel:B,target:E,onClick:k}=o,f=D(o.icon),w=q("ContactBubble__item",f&&"type--"+f),x=T=>{k&&k()!==!0&&T.preventDefault(),i(!1)},S=[" ",m,`
`,B&&n("small",{children:Q(B)},"\u{1F921}"),`
`];return n("li",{className:w,children:t&&t!=="#"?n(M,{className:"ContactBubble__link",href:t,onClick:x,target:E,children:S}):n("button",{className:"ContactBubble__link",onClick:x,type:"button",children:S})},u)})}),`

`,c&&n("button",{className:"ContactBubble__closebtn","aria-controls":_,"aria-label":r.closeBtnLong,onClick:()=>i(),type:"button",children:r.closeBtn})]});return c?n("div",{className:"ContactBubble__wrapper",ref:v,children:[n("button",{className:"ContactBubble__openbtn","aria-controls":_,"aria-expanded":s,"aria-label":r.openBtnLong,onClick:s?()=>i():P,type:"button",children:r.openBtn}),`

`,N]}):N},X=/(?:^| )ContactBubble__item--type--(.+?)(?: |$)/,O=e=>{var a;const l=e.dataset.alwaysShow==="true",d=z(),C=((a=y(".ContactBubble__title",e))==null?void 0:a.textContent)||void 0,g=G(".ContactBubble__item",e).map((r,h)=>{const b=y(".ContactBubble__link",r);if(!b)return;const p=y("small",b);p?.remove();const s=b.textContent||"Link "+(h+1),c=p?.textContent||void 0,_=b.getAttribute("href")||"",L=b.target||void 0,v=(r.className.match(X)||[])[1];return{icon:D(v),extraLabel:c,href:_,label:s,target:L}}).filter(K);return{title:C,links:g,alwaysShow:l,lang:d}};window.Hanna.makeSprinkle({name:"ContactBubble",init:e=>{const a=O(e),l=document.createElement("div");$.render(n(V,{...a,ssr:!1}),l,()=>{e.replaceWith(l)})}});

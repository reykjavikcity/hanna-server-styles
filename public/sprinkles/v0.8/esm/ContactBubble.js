import"./initHannaNamespace.js";import{h as F,b as T,F as D,p as S,C as I}from"../_chunks/compat.module-8a0f8b99.js";import{c as W,h as $,a as E,q as j}from"../_chunks/qj-afc7b5d6.js";import{h as H}from"../_chunks/useFormatMonitor-9c639f1c.js";import{o as t,a as z}from"../_chunks/jsxRuntime.module-6c429607.js";import{a as G,b as J,n as K}from"../_chunks/utils-96e946f5.js";import{L as M}from"../_chunks/_Link-74f07e43.js";import"../_chunks/focus-visible-d727a811.js";const O=e=>e&&e.trim().replace(/(?:\n\s*)+/g,`

`).split(/\n/).map((c,r)=>c||t("br",{},r)),P={is:{lang:"is",openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{lang:"en",openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"}},Q={suggestions:1,phone:1,faq:1,livechat:1,other:0},q=e=>e&&Q[e]?e:void 0,R=e=>{const{title:c,links:r,onToggle:m,alwaysShow:v}=e,p=G(e,P),B=e.open==null,[L,i]=F(!1),n=B?L:e.open,u=H.useIsBrowserSide(e.ssr),C=H.useDomid(),h=T(null),{openBubble:w,closeBubble:s}=D(()=>({openBubble:()=>{B&&i(!0),m&&m(!0)},closeBubble:o=>{B&&i(!1),m&&m(!1),o!==!1&&W(h.current)}}),[B,m]);if(S(()=>{const o=h.current;if(!o)return;if(v){o.dataset.show="true";return}const b=J();let a=0;const l=()=>{a||(a=requestAnimationFrame(()=>{const{scrollTop:d,scrollHeight:y,clientHeight:g}=b,k=y-g,f=1,_=d>f*150&&k-d>f*250;o.dataset.show=String(_),!_&&s(!1),a=0}))};return l(),document.addEventListener("scroll",l),b.addEventListener("scroll",l),()=>{document.removeEventListener("scroll",l),b.removeEventListener("scroll",l)}},[u,v,s]),S(()=>{const o=l=>l.key==="Escape"&&s(),b=l=>{var d;n&&!((d=h.current)!=null&&d.contains(l.target))&&s(!1)};document.addEventListener("keydown",o),document.addEventListener("click",b,!0);const a=document.documentElement.dataset;return n?a.contactBubble="true":delete a.contactBubble,()=>{delete a.contactBubble,document.removeEventListener("keydown",o),document.removeEventListener("click",b,!0)}},[n,s]),r.length===0)return null;const N=t("div",{className:"ContactBubble",id:u&&C,hidden:u&&!n,"data-always-show":v||void 0,"data-sprinkled":u,children:[t("h2",{className:"ContactBubble__title",children:c||p.openBtn}),t("ul",{className:"ContactBubble__list",children:r.map((o,b)=>{const{href:a,label:l,extraLabel:d,target:y,onClick:g}=o,k=q(o.icon),f=z("ContactBubble__item",k&&"type--"+k),_=A=>{g&&g()!==!0&&A.preventDefault(),s(!1)},x=[" ",l,`
`,d&&t("small",{children:O(d)},"\u{1F921}"),`
`];return t("li",{className:f,children:a&&a!=="#"?t(M,{className:"ContactBubble__link",href:a,onClick:_,target:y,children:x}):t("button",{className:"ContactBubble__link",onClick:_,type:"button",children:x})},b)})}),`

`,u&&t("button",{className:"ContactBubble__closebtn","aria-controls":C,"aria-label":p.closeBtnLong,onClick:()=>s(),type:"button",children:p.closeBtn})]});return u?t("div",{className:"ContactBubble__wrapper",ref:h,children:[t("button",{className:"ContactBubble__openbtn","aria-controls":C,"aria-expanded":n,"aria-label":p.openBtnLong,onClick:n?()=>s():w,type:"button",children:p.openBtn}),`

`,N]}):N},U=/(?:^| )ContactBubble__item--type--(.+?)(?: |$)/,V=e=>{var c;const r=e.dataset.alwaysShow==="true",m=$(),v=((c=E(".ContactBubble__title",e))==null?void 0:c.textContent)||void 0,p=j(".ContactBubble__item",e).map((B,L)=>{const i=E(".ContactBubble__link",B);if(!i)return;const n=E("small",i);n?.remove();const u=i.textContent||"Link "+(L+1),C=n?.textContent||void 0,h=i.getAttribute("href")||"",w=i.target||void 0,s=(B.className.match(U)||[])[1];return{icon:q(s),extraLabel:C,href:h,label:u,target:w}}).filter(K);return{title:v,links:p,alwaysShow:r,lang:m}};window.Hanna.makeSprinkle({name:"ContactBubble",init:e=>{const c=V(e),r=document.createElement("div");I.render(t(R,{...c,ssr:!1}),r,()=>{e.replaceWith(r)})}});

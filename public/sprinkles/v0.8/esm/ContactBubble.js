import"../_chunks/initHannaNamespace-14bf803f.js";import{h as T,_ as Z,F as j,p as A,C as H}from"../_chunks/compat.module-6d0944a1.js";import{c as D,m as q,q as E,b as P}from"../_chunks/qj-b9335549.js";import{g as G}from"../_chunks/i18n-45294c51.js";import{L as I}from"../_chunks/_Link-7f48f5da.js";import{o as n,u as J}from"../_chunks/jsxRuntime.module-98db1a52.js";import{u as K}from"../_chunks/_useMobileMenuToggling-5fde4833.js";import"../_chunks/getSVGtext-bab5132d.js";import{n as M}from"../_chunks/misc-29f84158.js";import{g as O}from"../_chunks/getLang-e1e8bdd7.js";const Q=e=>e&&e.trim().replace(/(?:\n\s*)+/g,`

`).split(/\n/).map((l,a)=>l||n("br",{},a)),R={is:{openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"},pl:{openBtn:"Skontaktuj si\u0119 z nami",closeBtn:"Zamkn\u0105\u0107",closeBtnLong:"Zamkn\u0105\u0107 p\u0119cherzyk"}},U={suggestions:1,phone:1,faq:1,livechat:1,other:0},$=e=>e&&U[e]?e:void 0,V=e=>{const{title:l,links:a,onToggle:r,alwaysShow:C,wrapperProps:_={}}=e,s=G(e,R),h=e.open==null,[d,p]=T(!1),c=h?d:e.open,i=J(e.ssr),k=K(),w=Z(null),v=_.ref||w,{openBubble:z,closeBubble:u}=j(()=>({openBubble:()=>{h&&p(!0),r&&r(!0)},closeBubble:o=>{h&&p(!1),r&&r(!1),o!==!1&&D.focusElm(v.current)}}),[h,r]);if(A(()=>{const o=v.current;if(!o)return;if(C){o.dataset.show="true";return}let m=0;const t=()=>{m||(m=requestAnimationFrame(()=>{const{scrollTop:b,scrollHeight:B,clientHeight:y}=document.documentElement,g=B-y,f=1,L=b>f*130&&g-b>f*200;o.dataset.show=String(L),!L&&u(!1),m=0}))};return t(),document.addEventListener("scroll",t),document.documentElement.addEventListener("scroll",t),()=>{document.removeEventListener("scroll",t),document.documentElement.removeEventListener("scroll",t)}},[i,C,u]),A(()=>{const o=b=>b.key==="Escape"&&u(),m=b=>{var B;c&&!((B=v.current)!=null&&B.contains(b.target))&&u(!1)};document.addEventListener("keydown",o),document.addEventListener("click",m,!0);const t=document.documentElement.dataset;return c?t.contactBubble="true":delete t.contactBubble,()=>{delete t.contactBubble,document.removeEventListener("keydown",o),document.removeEventListener("click",m,!0)}},[c,u]),a.length===0)return null;const N=n("div",{...e.wrapperProps,className:q("ContactBubble",null,_.className),id:i&&k,hidden:i&&!c,"data-always-show":C||void 0,"data-sprinkled":i,children:[n("h2",{className:"ContactBubble__title",children:l||s.openBtn}),n("ul",{className:"ContactBubble__list",children:a.map((o,m)=>{const{href:t,label:b,extraLabel:B,target:y,onClick:g}=o,f=$(o.icon),L=q("ContactBubble__item",f&&`type--${f}`),x=F=>{g&&g()!==!0&&F.preventDefault(),u(!1)},S=[" ",b,`
`,B&&n("small",{children:Q(B)},"\u{1F921}"),`
`];return n("li",{className:L,children:t&&t!=="#"?n(I,{className:"ContactBubble__link",href:t,onClick:x,target:y,children:S}):n("button",{className:"ContactBubble__link",onClick:x,type:"button",children:S})},m)})}),`

`,i&&n("button",{className:"ContactBubble__closebtn","aria-controls":k,"aria-label":s.closeBtnLong,onClick:()=>u(),type:"button",children:s.closeBtn})]});return i?n("div",{className:"ContactBubble__wrapper",ref:v,children:[n("button",{className:"ContactBubble__openbtn","aria-controls":k,"aria-expanded":c,"aria-label":s.openBtnLong,onClick:c?()=>u():z,type:"button",children:s.openBtn}),`

`,N]}):N},W=/(?:^| )ContactBubble__item--type--(.+?)(?: |$)/,X=e=>{var l;const a=e.dataset.alwaysShow==="true",r=O(e),C=((l=E(".ContactBubble__title",e))==null?void 0:l.textContent)||void 0,_=P(".ContactBubble__item",e).map((s,h)=>{const d=E(".ContactBubble__link",s);if(!d)return;const p=E("small",d);p?.remove();const c=d.textContent||`Link ${h+1}`,i=p?.textContent||void 0,k=d.getAttribute("href")||"",w=d.target||void 0,v=(s.className.match(W)||[])[1];return{icon:$(v),extraLabel:i,href:k,label:c,target:w}}).filter(M);return{title:C,links:_,alwaysShow:a,lang:r}};window.Hanna.makeSprinkle({name:"ContactBubble",init:e=>{const l=X(e),a=e;return e.getAttributeNames().forEach(r=>{e.removeAttribute(r)}),H.render(n(V,{...l,ssr:!1}),a),a},unmount:(e,l)=>{H.unmountComponentAtNode(l)}});

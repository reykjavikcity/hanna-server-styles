import"./initHannaNamespace.js";import{h as T,a as Z,F as j,p as H,C as D}from"../_chunks/compat.module-edfc5ce4.js";import{e as P,m as q,a as E,q as W}from"../_chunks/qj-f5658347.js";import{b as $,c as G,n as I}from"../_chunks/utils-ed8ff0d8.js";import{L as J}from"../_chunks/_Link-389e75bd.js";import{o as n,u as K}from"../_chunks/jsxRuntime.module-53ce29b9.js";import{u as M}from"../_chunks/useFormatMonitor-6ee15356.js";import"./utils/focus-visible.js";const O=t=>t&&t.trim().replace(/(?:\n\s*)+/g,`

`).split(/\n/).map((a,l)=>a||n("br",{},l)),Q={is:{openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"},pl:{openBtn:"Skontaktuj si\u0119 z nami",closeBtn:"Zamkn\u0105\u0107",closeBtnLong:"Zamkn\u0105\u0107 p\u0119cherzyk"}},R={suggestions:1,phone:1,faq:1,livechat:1,other:0},z=t=>t&&R[t]?t:void 0,U=t=>{const{title:a,links:l,onToggle:b,alwaysShow:k,wrapperProps:f={}}=t,r=$(t,Q),h=t.open==null,[d,p]=T(!1),s=h?d:t.open,c=K(t.ssr),C=M(),w=Z(null),v=f.ref||w,{openBubble:A,closeBubble:i}=j(()=>({openBubble:()=>{h&&p(!0),b&&b(!0)},closeBubble:o=>{h&&p(!1),b&&b(!1),o!==!1&&P.focusElm(v.current)}}),[h,b]);if(H(()=>{const o=v.current;if(!o)return;if(k){o.dataset.show="true";return}let u=0;const e=()=>{u||(u=requestAnimationFrame(()=>{const{scrollTop:m,scrollHeight:B,clientHeight:y}=document.documentElement,g=B-y,_=1,L=m>_*150&&g-m>_*250;o.dataset.show=String(L),!L&&i(!1),u=0}))};return e(),document.addEventListener("scroll",e),document.documentElement.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e),document.documentElement.removeEventListener("scroll",e)}},[c,k,i]),H(()=>{const o=m=>m.key==="Escape"&&i(),u=m=>{var B;s&&!((B=v.current)!=null&&B.contains(m.target))&&i(!1)};document.addEventListener("keydown",o),document.addEventListener("click",u,!0);const e=document.documentElement.dataset;return s?e.contactBubble="true":delete e.contactBubble,()=>{delete e.contactBubble,document.removeEventListener("keydown",o),document.removeEventListener("click",u,!0)}},[s,i]),l.length===0)return null;const N=n("div",{...t.wrapperProps,className:q("ContactBubble",null,f.className),id:c&&C,hidden:c&&!s,"data-always-show":k||void 0,"data-sprinkled":c,children:[n("h2",{className:"ContactBubble__title",children:a||r.openBtn}),n("ul",{className:"ContactBubble__list",children:l.map((o,u)=>{const{href:e,label:m,extraLabel:B,target:y,onClick:g}=o,_=z(o.icon),L=q("ContactBubble__item",_&&"type--"+_),x=F=>{g&&g()!==!0&&F.preventDefault(),i(!1)},S=[" ",m,`
`,B&&n("small",{children:O(B)},"\u{1F921}"),`
`];return n("li",{className:L,children:e&&e!=="#"?n(J,{className:"ContactBubble__link",href:e,onClick:x,target:y,children:S}):n("button",{className:"ContactBubble__link",onClick:x,type:"button",children:S})},u)})}),`

`,c&&n("button",{className:"ContactBubble__closebtn","aria-controls":C,"aria-label":r.closeBtnLong,onClick:()=>i(),type:"button",children:r.closeBtn})]});return c?n("div",{className:"ContactBubble__wrapper",ref:v,children:[n("button",{className:"ContactBubble__openbtn","aria-controls":C,"aria-expanded":s,"aria-label":r.openBtnLong,onClick:s?()=>i():A,type:"button",children:r.openBtn}),`

`,N]}):N},V=/(?:^| )ContactBubble__item--type--(.+?)(?: |$)/,X=t=>{var a;const l=t.dataset.alwaysShow==="true",b=G(t),k=((a=E(".ContactBubble__title",t))==null?void 0:a.textContent)||void 0,f=W(".ContactBubble__item",t).map((r,h)=>{const d=E(".ContactBubble__link",r);if(!d)return;const p=E("small",d);p?.remove();const s=d.textContent||"Link "+(h+1),c=p?.textContent||void 0,C=d.getAttribute("href")||"",w=d.target||void 0,v=(r.className.match(V)||[])[1];return{icon:z(v),extraLabel:c,href:C,label:s,target:w}}).filter(I);return{title:k,links:f,alwaysShow:l,lang:b}};window.Hanna.makeSprinkle({name:"ContactBubble",init:t=>{const a=X(t),l=document.createElement("div");D.render(n(U,{...a,ssr:!1}),l,()=>{t.replaceWith(l)})}});

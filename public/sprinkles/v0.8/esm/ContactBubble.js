import"./initHannaNamespace.js";import{h as F,b as T,F as D,p as S,C as I}from"../_chunks/compat.module-8a0f8b99.js";import{c as W,h as $,a as E,q as j}from"../_chunks/qj-163b6a60.js";import{h as H}from"../_chunks/useFormatMonitor-a002282c.js";import{o as n,a as z}from"../_chunks/jsxRuntime.module-a0756803.js";import{a as G,n as J}from"../_chunks/utils-39003f7d.js";import{L as K}from"../_chunks/_Link-74f07e43.js";import"../_chunks/focus-visible-cef44527.js";const M=e=>e&&e.trim().replace(/(?:\n\s*)+/g,`

`).split(/\n/).map((s,r)=>s||n("br",{},r)),O={is:{lang:"is",openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{lang:"en",openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"}},P={suggestions:1,phone:1,faq:1,livechat:1,other:0},q=e=>e&&P[e]?e:void 0,Q=e=>{const{title:s,links:r,onToggle:d,alwaysShow:v}=e,b=G(e,O),p=e.open==null,[f,c]=F(!1),o=p?f:e.open,i=H.useIsBrowserSide(e.ssr),C=H.useDomid(),B=T(null),{openBubble:L,closeBubble:a}=D(()=>({openBubble:()=>{p&&c(!0),d&&d(!0)},closeBubble:l=>{p&&c(!1),d&&d(!1),l!==!1&&W.focusElm(B.current)}}),[p,d]);if(S(()=>{const l=B.current;if(!l)return;if(v){l.dataset.show="true";return}let u=0;const t=()=>{u||(u=requestAnimationFrame(()=>{const{scrollTop:m,scrollHeight:h,clientHeight:w}=document.documentElement,g=h-w,_=1,k=m>_*150&&g-m>_*250;l.dataset.show=String(k),!k&&a(!1),u=0}))};return t(),document.addEventListener("scroll",t),document.documentElement.addEventListener("scroll",t),()=>{document.removeEventListener("scroll",t),document.documentElement.removeEventListener("scroll",t)}},[i,v,a]),S(()=>{const l=m=>m.key==="Escape"&&a(),u=m=>{var h;o&&!((h=B.current)!=null&&h.contains(m.target))&&a(!1)};document.addEventListener("keydown",l),document.addEventListener("click",u,!0);const t=document.documentElement.dataset;return o?t.contactBubble="true":delete t.contactBubble,()=>{delete t.contactBubble,document.removeEventListener("keydown",l),document.removeEventListener("click",u,!0)}},[o,a]),r.length===0)return null;const y=n("div",{className:"ContactBubble",id:i&&C,hidden:i&&!o,"data-always-show":v||void 0,"data-sprinkled":i,children:[n("h2",{className:"ContactBubble__title",children:s||b.openBtn}),n("ul",{className:"ContactBubble__list",children:r.map((l,u)=>{const{href:t,label:m,extraLabel:h,target:w,onClick:g}=l,_=q(l.icon),k=z("ContactBubble__item",_&&"type--"+_),N=A=>{g&&g()!==!0&&A.preventDefault(),a(!1)},x=[" ",m,`
`,h&&n("small",{children:M(h)},"\u{1F921}"),`
`];return n("li",{className:k,children:t&&t!=="#"?n(K,{className:"ContactBubble__link",href:t,onClick:N,target:w,children:x}):n("button",{className:"ContactBubble__link",onClick:N,type:"button",children:x})},u)})}),`

`,i&&n("button",{className:"ContactBubble__closebtn","aria-controls":C,"aria-label":b.closeBtnLong,onClick:()=>a(),type:"button",children:b.closeBtn})]});return i?n("div",{className:"ContactBubble__wrapper",ref:B,children:[n("button",{className:"ContactBubble__openbtn","aria-controls":C,"aria-expanded":o,"aria-label":b.openBtnLong,onClick:o?()=>a():L,type:"button",children:b.openBtn}),`

`,y]}):y},R=/(?:^| )ContactBubble__item--type--(.+?)(?: |$)/,U=e=>{var s;const r=e.dataset.alwaysShow==="true",d=$(),v=((s=E(".ContactBubble__title",e))==null?void 0:s.textContent)||void 0,b=j(".ContactBubble__item",e).map((p,f)=>{const c=E(".ContactBubble__link",p);if(!c)return;const o=E("small",c);o?.remove();const i=c.textContent||"Link "+(f+1),C=o?.textContent||void 0,B=c.getAttribute("href")||"",L=c.target||void 0,a=(p.className.match(R)||[])[1];return{icon:q(a),extraLabel:C,href:B,label:i,target:L}}).filter(J);return{title:v,links:b,alwaysShow:r,lang:d}};window.Hanna.makeSprinkle({name:"ContactBubble",init:e=>{const s=U(e),r=document.createElement("div");I.render(n(Q,{...s,ssr:!1}),r,()=>{e.replaceWith(r)})}});

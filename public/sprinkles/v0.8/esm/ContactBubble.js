import"../_chunks/initHannaNamespace-21359965.js";import{h as j,_ as D,F,p as q,C as $}from"../_chunks/compat.module-6d0944a1.js";import{b as O,q as x,a as G}from"../_chunks/qj-0db0624e.js";import{o as n,u as I,m as z}from"../_chunks/jsxRuntime.module-9d76abce.js";import"../_chunks/getSVGtext-03122a1f.js";import{g as J}from"../_chunks/i18n-45294c51.js";import{L as K}from"../_chunks/_Link-7f48f5da.js";import{u as M}from"../_chunks/_useMobileMenuToggling-404bacd2.js";import{n as Q}from"../_chunks/misc-29f84158.js";import{g as U}from"../_chunks/getLang-c224bf02.js";const V=e=>e&&e.trim().replace(/(?:\n\s*)+/g,`

`).split(/\n/).map((l,r)=>l||n("br",{},r)),W={is:{openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"},pl:{openBtn:"Skontaktuj si\u0119 z nami",closeBtn:"Zamkn\u0105\u0107",closeBtnLong:"Zamkn\u0105\u0107 p\u0119cherzyk"}},X={suggestions:1,phone:1,faq:1,livechat:1,other:0},P=e=>e&&X[e]?e:void 0,Y=e=>{const{title:l,links:r,onToggle:s,alwaysShow:h,wrapperProps:f={}}=e,p=J(e,W),v=e.openBtnLabel||p.openBtn,E=e.openBtnLabel?void 0:p.openBtnLong,a=e.open==null,[B,_]=j(!1),c=a?B:e.open,i=I(e.ssr),C=M(),y=D(null),g=f.ref||y,{openBubble:T,closeBubble:u}=F(()=>({openBubble:()=>{a&&_(!0),s&&s(!0)},closeBubble:o=>{a&&_(!1),s&&s(!1),o!==!1&&O.focusElm(g.current)}}),[a,s]);if(q(()=>{const o=g.current;if(!o)return;if(h){o.dataset.show="true";return}let m=0;const t=()=>{m||(m=requestAnimationFrame(()=>{const{scrollTop:b,scrollHeight:d,clientHeight:N}=document.documentElement,L=d-N,k=1,w=b>k*130&&L-b>k*200;o.dataset.show=String(w),!w&&u(!1),m=0}))};return t(),document.addEventListener("scroll",t),document.documentElement.addEventListener("scroll",t),()=>{document.removeEventListener("scroll",t),document.documentElement.removeEventListener("scroll",t)}},[i,h,u]),q(()=>{const o=b=>b.key==="Escape"&&u(),m=b=>{var d;c&&!((d=g.current)!=null&&d.contains(b.target))&&u(!1)};document.addEventListener("keydown",o),document.addEventListener("click",m,!0);const t=document.documentElement.dataset;return c?t.contactBubble="true":delete t.contactBubble,()=>{delete t.contactBubble,document.removeEventListener("keydown",o),document.removeEventListener("click",m,!0)}},[c,u]),r.length===0)return null;const S=n("div",{...e.wrapperProps,className:z("ContactBubble",null,f.className),id:i&&C,hidden:i&&!c,"data-label-openbtn":e.openBtnLabel,"data-always-show":h||void 0,"data-sprinkled":i,children:[n("h2",{className:"ContactBubble__title",children:l||v}),n("ul",{className:"ContactBubble__list",children:r.map((o,m)=>{const{href:t,label:b,extraLabel:d,target:N,onClick:L}=o,k=P(o.icon),w=z("ContactBubble__item",k&&`type--${k}`),A=Z=>{L&&L()!==!0&&Z.preventDefault(),u(!1)},H=[" ",b,`
`,d&&n("small",{children:V(d)},"\u{1F921}"),`
`];return n("li",{className:w,children:t&&t!=="#"?n(K,{className:"ContactBubble__link",href:t,onClick:A,target:N,children:H}):n("button",{className:"ContactBubble__link",onClick:A,type:"button",children:H})},m)})}),`

`,i&&n("button",{className:"ContactBubble__closebtn","aria-controls":C,"aria-label":p.closeBtnLong,onClick:()=>u(),type:"button",children:p.closeBtn})]});return i?n("div",{className:"ContactBubble__wrapper",ref:g,children:[n("button",{className:"ContactBubble__openbtn","aria-controls":C,"aria-expanded":c,"aria-label":E,onClick:c?()=>u():T,type:"button",children:v}),`

`,S]}):S},R=/(?:^| )ContactBubble__item--type--(.+?)(?: |$)/,ee=e=>{var l;const r=e.dataset.alwaysShow==="true",s=e.dataset.labelOpenbtn,h=U(e),f=((l=x(".ContactBubble__title",e))==null?void 0:l.textContent)||void 0,p=G(".ContactBubble__item",e).map((v,E)=>{const a=x(".ContactBubble__link",v);if(!a)return;const B=x("small",a);B?.remove();const _=a.textContent||`Link ${E+1}`,c=B?.textContent||void 0,i=a.getAttribute("href")||"",C=a.target||void 0,y=(v.className.match(R)||[])[1];return{icon:P(y),extraLabel:c,href:i,label:_,target:C}}).filter(Q);return{title:f,links:p,alwaysShow:r,openBtnLabel:s,lang:h}};window.Hanna.makeSprinkle({name:"ContactBubble",init:e=>{const l=ee(e),r=e;return e.getAttributeNames().forEach(s=>{e.removeAttribute(s)}),$.render(n(Y,{...l,ssr:!1}),r),r},unmount:(e,l)=>{$.unmountComponentAtNode(l)}});

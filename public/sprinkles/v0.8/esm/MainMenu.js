import"./initHannaNamespace.js";import{a as d,q as T,E as p,e as b}from"../_chunks/qj-c3d9a20d.js";import"../_chunks/compat.module-504d8e29.js";import"../_chunks/useFormatMonitor-69620455.js";import{f as _,c as g,b as L}from"../_chunks/utils-a3d70c94.js";import"./utils/focus-visible.js";const E={is:{title:"A\xF0alvalmynd",homeLabel:"Fors\xED\xF0a",backToMenu:"Loka",backToMenuLong:"Til baka \xED valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu g\u0142\xF3wne",homeLabel:"Strona g\u0142\xF3wna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wr\xF3\u0107 do menu"}},k=_();let v;const P=({panelElm:n,titleButton:e,menuButton:o},t)=>{const l=()=>{n.classList.remove("PrimaryPanel--active"),e&&e.removeAttribute("aria-pressed")};t?l():v=setTimeout(l,1e3),o&&o.removeAttribute("aria-pressed")},B=({panelElm:n,titleButton:e,menuButton:o})=>{clearTimeout(v),n.classList.add("PrimaryPanel--active"),e&&e.setAttribute("aria-pressed","true"),o&&o.setAttribute("aria-pressed","true")},f=({escHandler:n,clickHandler:e})=>{document.addEventListener("keydown",n),document.addEventListener("click",e,!0)},M=({escHandler:n,clickHandler:e})=>{document.removeEventListener("keydown",n),document.removeEventListener("click",e,!0)},y=n=>function(e,o=!0){const{activePanel:t,backToMenuButton:l,container:c}=n;delete c.dataset.pristine,e===t&&(e=void 0);const i=document.documentElement,r=i.dataset;e?(n.container.classList.add("MainMenu__panelsWrap--active"),e.panelElm.append(l),t||(f(n),r.scrollTop=String(i.scrollTop),i.scrollTop=0,r.megaPanelActive="")):(l.remove(),n.container.classList.remove("MainMenu__panelsWrap--active"),M(n),i.scrollTop=parseInt(r.scrollTop||"")||0,delete r.scrollTop,delete r.megaPanelActive),t&&(P(t,!!e),n.activePanel=void 0),e&&(B(e),n.activePanel=e),o&&setTimeout(()=>{e?b.focusElm(e.panelElm):t&&b.focusElm(t.menuButton)},100)};window.Hanna.makeSprinkle({name:"MainMenu",init:n=>{const e=g(n),o=L({lang:e},E),t=d(".MainMenu__panelsWrap",n);if(!t)return;t.dataset.pristine="true",T(".PrimaryPanel",t).forEach(a=>{const m=d(".PrimaryPanel__title",a);if(!m)return;const u=a.id&&d('a.MainMenu__link[href$="#'+a.id+'"]',n)||void 0,s={panelElm:a,titleButton:a.id?p("button",{className:"MainMenu__mega__title-toggler",onClick:()=>c(s,!1),"aria-controls":a.id},m.textContent):void 0,menuButton:u&&p("button",{className:"MainMenu__link",onClick:()=>c(s),"aria-controls":a.id,"aria-label":u.getAttribute("aria-label")},u.textContent)};s.titleButton&&(m.textContent="",m.append(s.titleButton)),u&&s.menuButton&&u.replaceWith(s.menuButton)});const l={container:t,activePanel:void 0,backToMenuButton:p("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>i(),"aria-label":o.backToMenuLong},o.backToMenu),escHandler:a=>{a.key==="Escape"&&i()},clickHandler(a){n.contains(a.target)||i()}},c=y(l),i=()=>c(void 0),r=a=>{a.leftTopmenu&&i()};return k.subscribe(r),()=>{k.unsubscribe(r),M(l)}},unmount:(n,e)=>{e&&e()}});

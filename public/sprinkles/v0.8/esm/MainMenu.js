import"../_chunks/initHannaNamespace-14bf803f.js";import{d as B,E as p,q as k,b as C,c as L}from"../_chunks/qj-b9335549.js";import"../_chunks/compat.module-6d0944a1.js";import{g as T}from"../_chunks/i18n-45294c51.js";import{g as y}from"../_chunks/_useMobileMenuToggling-5fde4833.js";import"../_chunks/getSVGtext-bab5132d.js";import{f as _}from"../_chunks/focusElement-a4f7f308.js";import{g as A}from"../_chunks/getLang-e1e8bdd7.js";const h={is:{togglerLabel:"Opna/loka A\xF0alvalmynd",closeMenuLabel:"Loka",closeMenuLabelLong:"Loka a\xF0alvalmynd"},en:{togglerLabel:"Toggle Main Menu",closeMenuLabel:"Close",closeMenuLabelLong:"Close main menu"},pl:{togglerLabel:"Otw\xF3rz/zamknij menu g\u0142\xF3wne",closeMenuLabel:"Zamknij",closeMenuLabelLong:"Zamknij menu g\u0142\xF3wne"}},H={is:{title:"A\xF0alvalmynd",homeLabel:"Fors\xED\xF0a",backToMenu:"Loka",backToMenuLong:"Til baka \xED valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu g\u0142\xF3wne",homeLabel:"Strona g\u0142\xF3wna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wr\xF3\u0107 do menu"}},g=y(),M={phone:1,phablet:1,tablet:1},u=document.documentElement.classList,j=(e,n)=>{e.tabIndex=-1;const l=e.id||B();e.id||(e.id=l);const a=T({lang:n},h),i=p("button",{className:"MobileMenuToggler",onClick:b=>{s&&(b.preventDefault(),t?r():d())},"aria-controls":l,"aria-pressed":"false",lang:n},a.togglerLabel),c=p("button",{className:"MobileMenuToggler__closebutton","aria-label":a.closeMenuLabelLong,onClick:()=>r(),lang:n},a.closeMenuLabel);let t=!1,s=!1;const o=()=>{s||(u.add("menu-is-active"),u.add("menu-is-closed"),e.before(i),e.append(c),s=!0)},m=()=>{s&&(t&&r(),u.remove("menu-is-closed"),u.remove("menu-is-active"),i.remove(),c.remove(),s=!1)},d=()=>{u.add("menu-is-open"),u.remove("menu-is-closed"),t=!0,i.setAttribute("aria-pressed",`${t}`),_(e)},r=()=>{u.add("menu-is-closed"),u.remove("menu-is-open"),t=!1,i.setAttribute("aria-pressed",`${t}`),_(i)},v=b=>{const w=M[b.is]&&!M[b.was||""],P=!M[b.is]&&M[b.was||""];w?o():P&&m()};return g.subscribe(v),()=>{g.unsubscribe(v),m()}};let f;const N=({panelElm:e,titleButton:n,menuButton:l},a)=>{const i=()=>{e.classList.remove("PrimaryPanel--active"),n&&n.removeAttribute("aria-pressed")};a?i():f=setTimeout(i,1e3),l&&l.removeAttribute("aria-pressed")},x=({panelElm:e,titleButton:n,menuButton:l})=>{clearTimeout(f),e.classList.add("PrimaryPanel--active"),n&&n.setAttribute("aria-pressed","true"),l&&l.setAttribute("aria-pressed","true")},W=({escHandler:e,clickHandler:n})=>{document.addEventListener("keydown",e),document.addEventListener("click",n,!0)},E=({escHandler:e,clickHandler:n})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",n,!0)},Z=e=>function(n,l=!0){const{activePanel:a,backToMenuButton:i,container:c}=e;delete c.dataset.pristine,n===a&&(n=void 0);const t=document.documentElement,s=t.dataset;n?(e.container.classList.add("MainMenu__panelsWrap--active"),n.panelElm.append(i),a||(W(e),s.scrollTop=String(t.scrollTop),t.scrollTop=0,s.megaPanelActive="")):(i.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),E(e),t.scrollTop=parseInt(s.scrollTop||"")||0,delete s.scrollTop,delete s.megaPanelActive),a&&(N(a,!!n),e.activePanel=void 0),n&&(x(n),e.activePanel=n),l&&setTimeout(()=>{n?L.focusElm(n.panelElm):a&&L.focusElm(a.menuButton)},100)},$=(e,n)=>{const l=T({lang:n},H),a=k(".MainMenu__panelsWrap",e);if(!a)return;a.dataset.pristine="true",C(".PrimaryPanel",a).forEach(o=>{const m=k(".PrimaryPanel__title",o);if(!m)return;const d=o.id&&k(`a.MainMenu__link[href$="#${o.id}"]`,e)||void 0,r={panelElm:o,titleButton:o.id?p("button",{className:"MainMenu__mega__title-toggler",onClick:()=>c(r,!1),"aria-controls":o.id},m.textContent):void 0,menuButton:d&&p("button",{className:"MainMenu__link",onClick:()=>c(r),"aria-controls":o.id,"aria-label":d.getAttribute("aria-label")},d.textContent)};r.titleButton&&(m.textContent="",m.append(r.titleButton)),d&&r.menuButton&&d.replaceWith(r.menuButton)});const i={container:a,activePanel:void 0,backToMenuButton:p("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>t(),"aria-label":l.backToMenuLong},l.backToMenu),escHandler:o=>{o.key==="Escape"&&t()},clickHandler(o){e.contains(o.target)||t()}},c=Z(i),t=()=>c(void 0),s=o=>{!{netbook:1,wide:1}[o.is]&&{netbook:1,wide:1}[o.was||""]&&t()};return g.subscribe(s),()=>{g.unsubscribe(s),E(i)}};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const n=A(e),l=j(e,n),a=$(e,n);return()=>{l(),a&&a()}},unmount:(e,n)=>{n()}});

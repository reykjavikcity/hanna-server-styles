import"./initHannaNamespace.js";import{C as g,h as v,F as A}from"../_chunks/compat.module-8a0f8b99.js";import{f as h,d as x}from"../_chunks/qj-163b6a60.js";import{T as y}from"../_chunks/Tabs-f23d6555.js";import{n as E}from"../_chunks/utils-39003f7d.js";import{o as p}from"../_chunks/jsxRuntime.module-a0756803.js";import"../_chunks/focus-visible-cef44527.js";import"../_chunks/seenEffect-ca174ea8.js";import"../_chunks/useFormatMonitor-a002282c.js";const d=(t,a)=>{a?(t.hidden=!1,t.tabIndex=0):(t.hidden=!0,t.removeAttribute("tabindex"))},I=t=>t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"),u=(...t)=>console.info("Tabs sprinkle: ",...t),P=t=>{const{tabPanelPairs:a,startingIdx:i,label:n,labelledBy:e,id:r}=t,[l,o]=v(i),{tabs:b,onSetActive:f}=A(()=>({tabs:a.map(s=>s.tab),onSetActive:s=>{const m=a[s];if(!m)return;const c=l!==void 0&&a[l];c&&d(c.panelElm,!1),d(m.panelElm,!0),o(s)}}),[l,a]);return p(y,{tabs:b,id:r,"aria-label":n,"aria-labelledby":e,role:"tablist",activeIdx:l,onSetActive:f,ssr:!1})},S=t=>{const a=Array.from(t.querySelectorAll(".Tabs__tab")),i=a.filter(e=>{e=e.cloneNode(!0);const r="href"in e;return r||u("Not an anchor element",e),r}).map(e=>{const r=e.getAttribute("aria-controls")||h.getFrag(e.href)||void 0,l=r&&document.getElementById(r);if(!l){u(r?"tab panel elm not found for":"ID pointer missing on",e);return}const o=e.querySelector(".Tabs__tab__badge")||void 0;o&&o.remove();const b=o&&o.textContent.trim().replace(/(?:^\(|\)$)/g,"");return{panelElm:l,isActive:e.dataset.active==="true",tab:{id:e.id||x(),"aria-controls":r,label:e.textContent,badge:b,longLabel:e.getAttribute("aria-label")||void 0}}}).filter(E);if(i.length!==a.length)return;const n=i.findIndex(e=>e.isActive);return{id:t.id||void 0,label:t.getAttribute("aria-label")||void 0,labelledBy:t.getAttribute("aria-labelledby")||void 0,tabPanelPairs:i.map(e=>({tab:e.tab,panelElm:e.panelElm})),startingIdx:n>=0?n:void 0}};window.Hanna.makeSprinkle({name:"Tabs",init:t=>{const a=S(t);if(a){a.tabPanelPairs.forEach(({tab:n,panelElm:e},r)=>{d(e,r===a.startingIdx),e.setAttribute("role","tabpanel"),e.classList.contains("TabPanel")&&(e.dataset.sprinkled="true"),I(e)||e.setAttribute("aria-label",n.longLabel||n.label)});const i=document.createElement("div");g.render(p(P,{...a}),i,()=>{t.replaceWith(i)})}}});

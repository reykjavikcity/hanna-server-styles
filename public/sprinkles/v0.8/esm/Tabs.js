import"./initHannaNamespace.js";import{C as g,h as v,F as A}from"../_chunks/compat.module-edfc5ce4.js";import{f as h,d as E}from"../_chunks/qj-f5658347.js";import{T as x}from"../_chunks/Tabs-d5dfd9c6.js";import{n as y}from"../_chunks/utils-ed8ff0d8.js";import{autoSeenEffectWrapperProps as P,autoSeenEffectsRefresh as I}from"./utils/addSeenEffect.js";import{o as p}from"../_chunks/jsxRuntime.module-53ce29b9.js";import"./utils/focus-visible.js";import"../_chunks/useFormatMonitor-6ee15356.js";const d=(t,a)=>{a?(t.hidden=!1,t.tabIndex=0):(t.hidden=!0,t.removeAttribute("tabindex"))},S=t=>t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"),f=(...t)=>console.info("Tabs sprinkle: ",...t),_=t=>{const{tabPanelPairs:a,startingIdx:i,label:n,labelledBy:e,id:r}=t,[l,o]=v(i),{tabs:b,onSetActive:u}=A(()=>({tabs:a.map(s=>s.tab),onSetActive:s=>{const m=a[s];if(!m)return;const c=l!==void 0&&a[l];c&&d(c.panelElm,!1),d(m.panelElm,!0),o(s)}}),[l,a]);return p(x,{tabs:b,id:r,"aria-label":n,"aria-labelledby":e,role:"tablist",activeIdx:l,onSetActive:u,ssr:!1})},T=t=>{const a=Array.from(t.querySelectorAll(".Tabs__tab")),i=a.filter(e=>{e=e.cloneNode(!0);const r="href"in e;return r||f("Not an anchor element",e),r}).map(e=>{const r=e.getAttribute("aria-controls")||h.getFrag(e.href)||void 0,l=r&&document.getElementById(r);if(!l){f(r?"tab panel elm not found for":"ID pointer missing on",e);return}const o=e.querySelector(".Tabs__tab__badge")||void 0;o&&o.remove();const b=o&&o.textContent.trim().replace(/(?:^\(|\)$)/g,"");return{panelElm:l,isActive:e.dataset.active==="true",tab:{id:e.id||E(),"aria-controls":r,label:e.textContent,badge:b,longLabel:e.getAttribute("aria-label")||void 0}}}).filter(y);if(i.length!==a.length)return;const n=i.findIndex(e=>e.isActive);return{id:t.id||void 0,label:t.getAttribute("aria-label")||void 0,labelledBy:t.getAttribute("aria-labelledby")||void 0,tabPanelPairs:i.map(e=>({tab:e.tab,panelElm:e.panelElm})),startingIdx:n>=0?n:void 0}};window.Hanna.makeSprinkle({name:"Tabs",init:t=>{const a=T(t);if(a){a.tabPanelPairs.forEach(({tab:n,panelElm:e},r)=>{d(e,r===a.startingIdx),e.setAttribute("role","tabpanel"),e.classList.contains("TabPanel")&&(e.dataset.sprinkled="true"),S(e)||e.setAttribute("aria-label",n.longLabel||n.label)});const i=document.createElement("div");g.render(p(_,{...a,wrapperProps:P(t)}),i,()=>{t.replaceWith(i),I()})}}});

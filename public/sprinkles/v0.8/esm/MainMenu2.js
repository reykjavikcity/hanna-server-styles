import"../_chunks/initHannaNamespace-14bf803f.js";import{h as j,_ as U,T as R,p as W,F as X,a as V,C as q}from"../_chunks/compat.module-6d0944a1.js";import{m as F,b as B,q as z}from"../_chunks/qj-b9335549.js";import{g as Y}from"../_chunks/assets-7a061d68.js";import{g as ee}from"../_chunks/i18n-45294c51.js";import{L as ne}from"../_chunks/_Link-7f48f5da.js";import{f as te}from"../_chunks/focusElement-a4f7f308.js";import"../_chunks/getSVGtext-bab5132d.js";import{B as D}from"../_chunks/_Button-3fca7562.js";import{o as r,u as ie}from"../_chunks/jsxRuntime.module-98db1a52.js";import{F as H}from"../_chunks/FocusTrap-d7ee1d5e.js";import{u as re}from"../_chunks/_useMobileMenuToggling-5fde4833.js";import{n as E}from"../_chunks/misc-29f84158.js";import"../_chunks/getLang-e1e8bdd7.js";const ae=e=>{e.preventDefault();const n=e.currentTarget.hash.slice(1),t=n&&document.getElementById(n);t&&(t.tabIndex=-1,te(t))},J=e=>r(D,{bem:"ButtonPrimary",...e}),G=e=>r(D,{bem:"ButtonSecondary",...e}),I=typeof document<"u"&&document.documentElement.classList,N={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},oe={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"},se:{title:"Huvudmeny",homeLink:"F\xF6rstasida",openMenu:"Meny",openMenuLong:"\xD6ppna huvudmenyn",closeMenu:"St\xE4ng",closeMenuLong:"St\xE4ng huvudmenyn"}},le={alert:"info",globe:void 0,search:"search",user:"user"},se=e=>{const{onItemClick:n,closeMenu:t,isBrowser:a}=e,_=(u,i,l={})=>{const{key:o,Tag:m="li",button:p}=l;if(typeof i=="function"){const C=i;return r("li",{className:`${u}item`,children:r(C,{closeMenu:t})},o)}const h=`${u}link`,{label:f,labelLong:M,href:x,target:L,lang:w,controlsId:g,onClick:k,descr:v,icon:$}=i,s=v&&r(V,{children:[" ",r("small",{className:`${h}__descr`,children:v})]}),O=p?G:"button",y=p?G:ne,P=p?{size:"small","data-icon":$&&le[$]}:void 0;return r(m,{className:F(`${u}item`,i.modifier),"aria-current":i.current||void 0,children:a&&(k||!x)?r(O,{className:h,type:"button",onClick:()=>{const C=k&&k(i)===!1,T=n&&n(i)===!1;!(C||T)&&t()},"aria-controls":g,"aria-label":M,title:M,lang:w,...P,children:[f," ",s]}):x?r(y,{className:h,href:x,target:L,"aria-label":M,title:M,onClick:()=>{!(n&&n(i)===!1)&&t()},lang:w,hrefLang:i.hrefLang,...P,children:[f," ",s]}):null},o)};return{renderList:(u,i,l={})=>!i||!i.length?null:r("ul",{className:`${u}items`,...l.listProps,children:i.map((o,m)=>_(u,o,{key:m,button:l.buttons}))}),renderItem:_}},ue=e=>{const{homeLink:n="/",items:t,onItemClick:a,illustration:_,imageUrl:u,wrapperProps:i={}}=e,l=re(i.id),o=ie(e.ssr),[m,p]=j(!1),h=U(null),f=i.ref||h,M=R(c=>c.key==="Escape"&&L(),[]),x=()=>{I.add(N.menuIsOpen),I.remove(N.menuIsClosed),p(!0),document.addEventListener("keydown",M)},L=()=>{I.remove(N.menuIsOpen),I.add(N.menuIsClosed),p(!1),v(g),f.current.scrollTo(0,0),document.removeEventListener("keydown",M)};W(()=>{if(o)return I.add(N.menuIsClosed),()=>{L(),I.remove(N.menuIsClosed)}},[o]);const{mainItems:w,defaultActive:g}=X(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const c=t.main.map(d=>{var S;if(!("title"in d)||"current"in d)return d;const Q=(S=d.subItems.find(Z=>"current"in Z&&!!Z.current))==null?void 0:S.current;return{...d,current:Q}}),b=c.findIndex(d=>"current"in d&&d.current);return{mainItems:c,defaultActive:b}},[t.main]),[k,v]=j(g),$=U(g);g!==$.current&&($.current=g,v(g));const s=ee(e,oe),{renderItem:O,renderList:y}=se({onItemClick:a,closeMenu:L,isBrowser:o}),P={...typeof n=="string"?{href:n,label:s.homeLink}:n,modifier:"home"},C=u||_&&Y(_),T=`${l}-menu`;return r("nav",{...e.wrapperProps,className:F("MainMenu2",o&&(m?"open":"closed"),i.className),style:C?{...i.style,"--menu-image":`url(${C})`}:i.style,ref:f,"aria-label":s.title,"data-sprinkled":o,id:T,children:[m&&r(H,{atTop:!0}),r("div",{className:"MainMenu2__content",children:[r("h2",{className:"MainMenu2__title",children:s.title}),o?r(J,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":m,"aria-controls":T,...m?{onClick:L,"aria-label":s.closeMenuLong,title:s.closeMenuLong,children:s.closeMenu,"data-icon":"text"}:{onClick:x,"aria-label":s.openMenuLong,title:s.openMenuLong,children:s.openMenu,"data-icon":"close"}}):r(J,{className:"MainMenu2__toggler",size:"small",href:`#${T}`,onClick:ae,"aria-hidden":"true","data-icon":"text",children:s.title}),w&&r("div",{className:F("MainMenu2__main",k<0&&"noneActive"),children:[O("MainMenu2__main__",P,{Tag:"div"}),w.map((c,b)=>{if("title"in c){const d=`${l}-submenu-${b}`,S=b===k;return r(V,{children:[r("div",{className:"MainMenu2__main__item","aria-current":c.current||void 0,children:o?r("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>v(b),"aria-controls":d,"aria-pressed":S,children:c.title}):r("strong",{className:"MainMenu2__main__link",children:c.title})}),y("MainMenu2__main__sub__",c.subItems,o&&{listProps:{id:d,hidden:!S}})]},b)}return O("MainMenu2__main__",c,{key:b,Tag:"div"})})]}),y("MainMenu2__hot__",t.hot,{buttons:!0}),y("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&r("div",{className:"MainMenu2__related",children:[t.relatedTitle&&r("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),y("MainMenu2__related__",t.related)]})]}),m&&r(H,{})]})},me=e=>{try{const n=JSON.parse(e.dataset.propsTexts||"{}");if(typeof n.title=="string"&&typeof n.openMenu=="string"&&typeof n.closeMenu=="string")return n.openMenuLong=n.openMenuLong||n.openMenu,n.closeMenuLong=n.closeMenuLong||n.closeMenu,n.homeLink=n.homeLink||"",n}catch{}},K=e=>{const n=e.getAttribute("aria-current");return n==="true"||n==="page"},A=e=>{var n,t;if(!e)return;const a=z("a[href]",e);if(!a)return;const _=a.textContent.trim(),u=a.getAttribute("href"),i=a.getAttribute("target")||void 0,l=a.getAttribute("lang")||void 0,o=a.getAttribute("hreflang")||void 0,m=a.getAttribute("aria-label")||a.title||void 0,p=(n=z(".MainMenu2__main__sub__link__descr",e))==null?void 0:n.textContent.trim(),h=a.dataset.icon,f=(t=e.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:t[1],M=K(e);return{label:_,labelLong:m,href:u,target:i,lang:l,hrefLang:o,modifier:f,current:M,descr:p,icon:h}},ce=e=>{var n;const t={main:B(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",e).map(i=>{const l=i.nextElementSibling;return l!=null&&l.classList.contains("MainMenu2__main__sub__items")?{title:i.textContent.trim(),current:K(i),subItems:B(".MainMenu2__main__sub__item",l).map(A).filter(E)}:A(i)}).filter(E),hot:B(".MainMenu2__hot__item",e).map(A).filter(E),extra:B(".MainMenu2__extra__item",e).map(A).filter(E),relatedTitle:(n=z(".MainMenu2__related__title",e))==null?void 0:n.textContent.trim(),related:B(".MainMenu2__related__item",e).map(A).filter(E)},a=A(z(".MainMenu2__main__item--home",e));a&&(delete a.modifier,delete a.controlsId,delete a.descr);const _=e.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),u=me(e);return{items:t,homeLink:a,imageUrl:_,texts:u}};window.Hanna.makeSprinkle({name:"MainMenu2",init:e=>{const n=ce(e),t=e;return e.getAttributeNames().forEach(a=>{e.removeAttribute(a)}),q.render(r(ue,{...n,ssr:!1}),t),t},unmount:(e,n)=>{q.unmountComponentAtNode(n)}});

import"../_chunks/initHannaNamespace-e9e79985.js";import{h as R,_ as D,T as Y,p as V,F as U,a as q,C as J}from"../_chunks/compat.module-8108cd22.js";import{a as B,q as F}from"../_chunks/qj-0db0624e.js";import{o as i,u as ee,m as H}from"../_chunks/jsxRuntime.module-c4fc14d9.js";import{f as ne}from"../_chunks/getSVGtext-03122a1f.js";import{g as te}from"../_chunks/i18n-c1727f88.js";import{g as ie}from"../_chunks/assets-7a061d68.js";import{L as re}from"../_chunks/_Link-f583270e.js";import{B as G}from"../_chunks/_Button-bb1b19a5.js";import{F as K}from"../_chunks/FocusTrap-2eb35c64.js";import{u as ae}from"../_chunks/_useMobileMenuToggling-acf37f77.js";import{n as P}from"../_chunks/misc-29f84158.js";import{I as oe}from"../_chunks/InjectHTML-19b1fb4c.js";import"../_chunks/getLang-47cf2afb.js";const le=(e,n)=>{e.preventDefault();const o=e.currentTarget.hash.slice(1),t=o&&document.getElementById(o);t&&ne(t,n)},Q=e=>i(G,{bem:"ButtonPrimary",...e}),W=e=>i(G,{bem:"ButtonSecondary",...e}),w=typeof document<"u"&&document.documentElement.classList,x={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},se={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"}},ue=e=>{const{onItemClick:n,closeMenu:o,openMenu:t,isBrowser:l}=e,_=(M,r,s={})=>{if(!r)return;const{key:m,Tag:u="li",button:p}=s;typeof r=="function"&&(r={Content:r});const L={key:m,className:H(`${M}item`,r.modifier),"aria-current":r.current||void 0};if("Content"in r&&r.Content)return i(u,{"data-customitem":"",...L,children:i(r.Content,{closeMenu:o,openMenu:t})});const k=`${M}link`,{label:g,labelLong:h,href:v,target:y,lang:z,controlsId:b,onClick:C,descr:I,icon:S}=r,c=r,E=I&&i(q,{children:[" ",i("small",{className:`${k}__descr`,children:I})]}),N=p?W:"button",Z=p?W:re,A={className:k,"data-icon":S,"arial-label":h,title:h,lang:z};p&&console.log("Rendering button for menu item:",A);const $=p?{size:"small"}:void 0,a=l&&(C||n&&v==null);return i(u,{className:H(`${M}item`,r.modifier),"aria-current":r.current||void 0,children:a?i(N,{...A,type:"button","aria-controls":b,onClick:()=>{const f=C&&C(c)===!1,d=n&&n(c)===!1;!(f||d)&&o()},...$,children:[g," ",E]}):v!=null?i(Z,{...A,href:v,hrefLang:r.hrefLang,target:y,onClick:()=>{!(n&&n(c)===!1)&&o()},...$,children:[g," ",E]}):null},m)};return{renderList:(M,r,s={})=>!r||!r.length?null:i("ul",{className:`${M}items`,...s.listProps,children:r.map((m,u)=>m&&_(M,m,{key:u,button:s.buttons}))}),renderItem:_}},me=e=>{var n;const{homeLink:o="/",items:t,onItemClick:l,illustration:_,imageUrl:M,variant:r,wrapperProps:s={}}=e,m=ae(s.id),u=ee(e.ssr),[p,L]=R(!1),k=D(null),g=s.ref||k,h=Y(a=>a.key==="Escape"&&y(),[]),v=()=>{w.add(x.menuIsOpen),w.remove(x.menuIsClosed),L(!0),document.addEventListener("keydown",h)},y=()=>{var a;w.remove(x.menuIsOpen),w.add(x.menuIsClosed),L(!1),I(b),(a=g.current)==null||a.scrollTo(0,0),document.removeEventListener("keydown",h)};V(()=>{if(u)return w.add(x.menuIsClosed),()=>{w.remove(x.menuIsClosed),y()}},[u]);const{mainItems:z,defaultActive:b}=U(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const a=t.main.map(d=>{var O;if(!("title"in d)||"current"in d)return d;const X=(O=d.subItems.find(j=>!!(j&&"current"in j&&j.current)))==null?void 0:O.current;return{...d,current:X}});let f=a.findIndex(d=>"current"in d&&d.current);return f<0&&"subItems"in(a[0]||{})&&(f=0),{mainItems:a,defaultActive:f}},[t.main]),[C,I]=R(b),S=D(b);b!==S.current&&(S.current=b,I(b));const c=te(e,se),{renderItem:E,renderList:N}=ue({onItemClick:l,closeMenu:y,openMenu:v,isBrowser:u}),Z={...typeof o=="string"?{href:o,label:c.homeLink}:o,modifier:"home"},A=M||_&&ie(_),$=`${m}-menu`;return i("nav",{...e.wrapperProps,className:H("MainMenu2",[u&&(p?"open":"closed"),r&&r!=="default"?`variant--${r}`:void 0],s.className),style:A?{...s.style,"--menu-image":`url(${A})`}:s.style,ref:g,"aria-label":c.title,"data-sprinkled":u,id:$,children:[p&&i(K,{atTop:!0}),i("div",{className:"MainMenu2__content",children:[i("h2",{className:"MainMenu2__title",children:c.title}),u?i(Q,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":p,"aria-controls":$,...p?{onClick:y,"aria-label":c.closeMenuLong,title:c.closeMenuLong,children:c.closeMenu}:{onClick:v,"aria-label":c.openMenuLong,title:c.openMenuLong,children:c.openMenu}}):i(Q,{className:"MainMenu2__toggler",size:"small",href:`#${$}`,onClick:le,"aria-hidden":"true",children:c.title}),z&&i("div",{className:H("MainMenu2__main",C<0&&"noneActive"),children:[E("MainMenu2__main__",Z,{Tag:"div"}),z.map((a,f)=>{if("title"in a){const d=`${m}-submenu-${f}`,O=f===C;return i(q,{children:[i("div",{className:"MainMenu2__main__item","aria-current":a.current||void 0,children:u?i("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>I(f),"aria-controls":d,"aria-pressed":O,children:a.title}):i("strong",{className:"MainMenu2__main__link",children:a.title})}),N("MainMenu2__main__sub__",a.subItems,u&&{listProps:{id:d,hidden:!O}})]},f)}return E("MainMenu2__main__",a,{key:f,Tag:"div"})})]}),N("MainMenu2__hot__",(n=t.hot)==null?void 0:n.map(a=>a&&"redhot"in a?{...a,modifier:a.modifier?[a.modifier,"redhot"]:"redhot"}:a),{buttons:!0}),N("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&i("div",{className:"MainMenu2__related",children:[t.relatedTitle&&i("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),N("MainMenu2__related__",t.related)]})]}),p&&i(K,{})]})},ce={default:void 0,light:"light"},de=e=>{try{const n=JSON.parse(e.dataset.propsTexts||"{}");if(typeof n.title=="string"&&typeof n.openMenu=="string"&&typeof n.closeMenu=="string")return n.openMenuLong=n.openMenuLong||n.openMenu,n.closeMenuLong=n.closeMenuLong||n.closeMenu,n.homeLink=n.homeLink||"",n}catch{}},T=e=>{var n;if(!e)return;const o=(n=e.className.match(/[a-zA-Z0-9]__item--(.+?)(?: |$)/g))==null?void 0:n.map(g=>g.slice(g.indexOf("--")+2)),t=e.getAttribute("aria-current")==="true";if(e.hasAttribute("data-customitem")){const g=e.childNodes;return g.forEach(h=>h.remove()),{modifier:o,current:e.getAttribute("aria-current")==="true",Content:()=>{const h=D(null);return V(()=>{const v=h.current;v&&(v.parentNode.append(...g),v.remove())},[]),i("span",{ref:h})}}}const l=F("a[href]",e);if(!l)return;const _=F(".MainMenu2__main__sub__link__descr",e);_?.remove();const M=_?.textContent.trim(),r=l.getElementsByTagName("*").length===0?l.textContent.trim():i(oe,{html:l.innerHTML}),s=l.getAttribute("href"),m=l.getAttribute("target")||void 0,u=l.getAttribute("lang")||void 0,p=l.getAttribute("hreflang")||void 0,L=l.getAttribute("aria-label")||l.title||void 0,k=l.dataset.icon;return{label:r,labelLong:L,href:s,target:m,lang:u,hrefLang:p,modifier:o,current:t,descr:M,icon:k}},_e=e=>{var n;const o={main:B(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",e).map(s=>{const m=s.nextElementSibling;return m!=null&&m.classList.contains("MainMenu2__main__sub__items")?{title:s.textContent.trim(),current:s.getAttribute("aria-current")==="true",subItems:B(".MainMenu2__main__sub__item",m).map(T).filter(P)}:T(s)}).filter(P),hot:B(".MainMenu2__hot__item",e).map(T).filter(P),extra:B(".MainMenu2__extra__item",e).map(T).filter(P),relatedTitle:(n=F(".MainMenu2__related__title",e))==null?void 0:n.textContent.trim(),related:B(".MainMenu2__related__item",e).map(T).filter(P)};let t=T(F(".MainMenu2__main__item--home",e));(typeof t=="function"||t&&"Content"in t)&&(t=void 0),t&&(delete t.modifier,delete t.controlsId,delete t.descr);const l=e.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),_=e.className.match(/(?:^|\s)MainMenu2--variant--([^\s]+)/)||[],M=ce[_[1]||""],r=de(e);return{items:o,homeLink:t,imageUrl:l,texts:r,variant:M}};window.Hanna.makeSprinkle({name:"MainMenu2",init:e=>{const n=_e(e),o=e;return e.getAttributeNames().forEach(t=>{e.removeAttribute(t)}),J.render(i(me,{...n,ssr:!1}),o),o},unmount:(e,n)=>{J.unmountComponentAtNode(n)}});

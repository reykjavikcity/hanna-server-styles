import"../_chunks/initHannaNamespace-dde97328.js";import{h as j,_ as D,T as U,p as W,F as X,a as H,C as V}from"../_chunks/compat.module-6d0944a1.js";import{m as F,b as E,q as z}from"../_chunks/qj-b9335549.js";import{g as Y}from"../_chunks/assets-7a061d68.js";import{g as ee}from"../_chunks/i18n-45294c51.js";import{L as ne}from"../_chunks/_Link-7f48f5da.js";import{f as te}from"../_chunks/focusElement-a4f7f308.js";import"../_chunks/getSVGtext-bab5132d.js";import{B as q}from"../_chunks/_Button-3fca7562.js";import{o as r,u as ie}from"../_chunks/jsxRuntime.module-98db1a52.js";import{F as J}from"../_chunks/FocusTrap-72a61f77.js";import{u as re}from"../_chunks/_useMobileMenuToggling-5fde4833.js";import{n as O}from"../_chunks/misc-29f84158.js";import"../_chunks/getLang-a66f2b15.js";const ae=e=>{e.preventDefault();const n=e.currentTarget.hash.slice(1),t=n&&document.getElementById(n);t&&(t.tabIndex=-1,te(t))},G=e=>r(q,{bem:"ButtonPrimary",...e}),K=e=>r(q,{bem:"ButtonSecondary",...e}),C=typeof document<"u"&&document.documentElement.classList,N={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},le={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"}},oe={alert:"info",globe:void 0,search:"search",user:"user"},se=e=>{const{onItemClick:n,closeMenu:t,isBrowser:a}=e,_=(u,i,s={})=>{const{key:l,Tag:c="li",button:g}=s;if(typeof i=="function"){const I=i;return r("li",{className:`${u}item`,children:r(I,{closeMenu:t})},l)}const f=`${u}link`,{label:b,labelLong:M,href:w,target:v,lang:x,controlsId:h,onClick:L,descr:k,icon:$}=i,m=k&&r(H,{children:[" ",r("small",{className:`${f}__descr`,children:k})]}),P=g?K:"button",y=g?K:ne,S=g?{size:"small","data-icon":$&&oe[$]}:void 0;return r(c,{className:F(`${u}item`,i.modifier),"aria-current":i.current||void 0,children:a&&(L||!w)?r(P,{className:f,type:"button",onClick:()=>{const I=L&&L(i)===!1,T=n&&n(i)===!1;!(I||T)&&t()},"aria-controls":h,"aria-label":M,title:M,lang:x,...S,children:[b," ",m]}):w?r(y,{className:f,href:w,target:v,"aria-label":M,title:M,onClick:()=>{!(n&&n(i)===!1)&&t()},lang:x,hrefLang:i.hrefLang,...S,children:[b," ",m]}):null},l)};return{renderList:(u,i,s={})=>!i||!i.length?null:r("ul",{className:`${u}items`,...s.listProps,children:i.map((l,c)=>_(u,l,{key:c,button:s.buttons}))}),renderItem:_}},me=e=>{const{homeLink:n="/",items:t,onItemClick:a,illustration:_,imageUrl:u,wrapperProps:i={}}=e,s=re(i.id),l=ie(e.ssr),[c,g]=j(!1),f=D(null),b=i.ref||f,M=U(o=>o.key==="Escape"&&v(),[]),w=()=>{C.add(N.menuIsOpen),C.remove(N.menuIsClosed),g(!0),document.addEventListener("keydown",M)},v=()=>{var o;C.remove(N.menuIsOpen),C.add(N.menuIsClosed),g(!1),k(h),(o=b.current)==null||o.scrollTo(0,0),document.removeEventListener("keydown",M)};W(()=>{if(l)return C.add(N.menuIsClosed),()=>{C.remove(N.menuIsClosed),v()}},[l]);const{mainItems:x,defaultActive:h}=X(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const o=t.main.map(d=>{var B;if(!("title"in d)||"current"in d)return d;const R=(B=d.subItems.find(Z=>"current"in Z&&!!Z.current))==null?void 0:B.current;return{...d,current:R}});let p=o.findIndex(d=>"current"in d&&d.current);return p<0&&"subItems"in(o[0]||{})&&(p=0),{mainItems:o,defaultActive:p}},[t.main]),[L,k]=j(h),$=D(h);h!==$.current&&($.current=h,k(h));const m=ee(e,le),{renderItem:P,renderList:y}=se({onItemClick:a,closeMenu:v,isBrowser:l}),S={...typeof n=="string"?{href:n,label:m.homeLink}:n,modifier:"home"},I=u||_&&Y(_),T=`${s}-menu`;return r("nav",{...e.wrapperProps,className:F("MainMenu2",l&&(c?"open":"closed"),i.className),style:I?{...i.style,"--menu-image":`url(${I})`}:i.style,ref:b,"aria-label":m.title,"data-sprinkled":l,id:T,children:[c&&r(J,{atTop:!0}),r("div",{className:"MainMenu2__content",children:[r("h2",{className:"MainMenu2__title",children:m.title}),l?r(G,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":c,"aria-controls":T,...c?{onClick:v,"aria-label":m.closeMenuLong,title:m.closeMenuLong,children:m.closeMenu}:{onClick:w,"aria-label":m.openMenuLong,title:m.openMenuLong,children:m.openMenu}}):r(G,{className:"MainMenu2__toggler",size:"small",href:`#${T}`,onClick:ae,"aria-hidden":"true",children:m.title}),x&&r("div",{className:F("MainMenu2__main",L<0&&"noneActive"),children:[P("MainMenu2__main__",S,{Tag:"div"}),x.map((o,p)=>{if("title"in o){const d=`${s}-submenu-${p}`,B=p===L;return r(H,{children:[r("div",{className:"MainMenu2__main__item","aria-current":o.current||void 0,children:l?r("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>k(p),"aria-controls":d,"aria-pressed":B,children:o.title}):r("strong",{className:"MainMenu2__main__link",children:o.title})}),y("MainMenu2__main__sub__",o.subItems,l&&{listProps:{id:d,hidden:!B}})]},p)}return P("MainMenu2__main__",o,{key:p,Tag:"div"})})]}),y("MainMenu2__hot__",t.hot,{buttons:!0}),y("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&r("div",{className:"MainMenu2__related",children:[t.relatedTitle&&r("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),y("MainMenu2__related__",t.related)]})]}),c&&r(J,{})]})},ue=e=>{try{const n=JSON.parse(e.dataset.propsTexts||"{}");if(typeof n.title=="string"&&typeof n.openMenu=="string"&&typeof n.closeMenu=="string")return n.openMenuLong=n.openMenuLong||n.openMenu,n.closeMenuLong=n.closeMenuLong||n.closeMenu,n.homeLink=n.homeLink||"",n}catch{}},Q=e=>{const n=e.getAttribute("aria-current");return n==="true"||n==="page"},A=e=>{var n;if(!e)return;const t=z("a[href]",e);if(!t)return;const a=z(".MainMenu2__main__sub__link__descr",e);a?.remove();const _=a?.textContent.trim(),u=t.textContent.trim(),i=t.getAttribute("href"),s=t.getAttribute("target")||void 0,l=t.getAttribute("lang")||void 0,c=t.getAttribute("hreflang")||void 0,g=t.getAttribute("aria-label")||t.title||void 0,f=t.dataset.icon,b=(n=e.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:n[1],M=Q(e);return{label:u,labelLong:g,href:i,target:s,lang:l,hrefLang:c,modifier:b,current:M,descr:_,icon:f}},ce=e=>{var n;const t={main:E(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",e).map(i=>{const s=i.nextElementSibling;return s!=null&&s.classList.contains("MainMenu2__main__sub__items")?{title:i.textContent.trim(),current:Q(i),subItems:E(".MainMenu2__main__sub__item",s).map(A).filter(O)}:A(i)}).filter(O),hot:E(".MainMenu2__hot__item",e).map(A).filter(O),extra:E(".MainMenu2__extra__item",e).map(A).filter(O),relatedTitle:(n=z(".MainMenu2__related__title",e))==null?void 0:n.textContent.trim(),related:E(".MainMenu2__related__item",e).map(A).filter(O)},a=A(z(".MainMenu2__main__item--home",e));a&&(delete a.modifier,delete a.controlsId,delete a.descr);const _=e.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),u=ue(e);return{items:t,homeLink:a,imageUrl:_,texts:u}};window.Hanna.makeSprinkle({name:"MainMenu2",init:e=>{const n=ce(e),t=e;return e.getAttributeNames().forEach(a=>{e.removeAttribute(a)}),V.render(r(me,{...n,ssr:!1}),t),t},unmount:(e,n)=>{V.unmountComponentAtNode(n)}});

import"../_chunks/initHannaNamespace-21359965.js";import{h as U,_ as F,T as X,p as V,F as Y,a as q,C as J}from"../_chunks/compat.module-6d0944a1.js";import{a as B,q as z}from"../_chunks/qj-0db0624e.js";import{o as r,u as ee,m as Z}from"../_chunks/jsxRuntime.module-9d76abce.js";import{f as ne}from"../_chunks/getSVGtext-03122a1f.js";import{g as te}from"../_chunks/i18n-45294c51.js";import{g as re}from"../_chunks/assets-7a061d68.js";import{L as ie}from"../_chunks/_Link-7f48f5da.js";import{B as j}from"../_chunks/_Button-aa4a4856.js";import{F as G}from"../_chunks/FocusTrap-166afe2e.js";import{u as ae}from"../_chunks/_useMobileMenuToggling-404bacd2.js";import{n as H}from"../_chunks/misc-29f84158.js";import"../_chunks/getLang-c224bf02.js";const le=(n,e)=>{n.preventDefault();const t=n.currentTarget.hash.slice(1),a=t&&document.getElementById(t);a&&ne(a,e)},K=n=>r(j,{bem:"ButtonPrimary",...n}),Q=n=>r(j,{bem:"ButtonSecondary",...n}),C=typeof document<"u"&&document.documentElement.classList,N={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},oe={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"}},se={alert:"info",globe:void 0,search:"search",user:"user"},ue=n=>{const{onItemClick:e,closeMenu:t,openMenu:a,isBrowser:M}=n,p=(s,i,u={})=>{const{key:l,Tag:c="li",button:g}=u;if(typeof i=="function"){const o=i;return r("li",{className:`${s}item`,children:r(o,{closeMenu:t,openMenu:a})},l)}const v=`${s}link`,{label:f,labelLong:T,href:b,target:L,lang:O,controlsId:h,onClick:k,descr:y,icon:$}=i,m=y&&r(q,{children:[" ",r("small",{className:`${v}__descr`,children:y})]}),P=g?Q:"button",I=g?Q:ie,S={className:v,"data-icon":$?se[$]:void 0,"arial-label":T,title:T,lang:O},w=g?{size:"small"}:void 0,x=M&&(k||e&&b==null);return r(c,{className:Z(`${s}item`,i.modifier),"aria-current":i.current||void 0,children:x?r(P,{...S,type:"button","aria-controls":h,onClick:()=>{const o=k&&k(i)===!1,d=e&&e(i)===!1;!(o||d)&&t()},...w,children:[f," ",m]}):b!=null?r(I,{...S,href:b,hrefLang:i.hrefLang,target:L,onClick:()=>{!(e&&e(i)===!1)&&t()},...w,children:[f," ",m]}):null},l)};return{renderList:(s,i,u={})=>!i||!i.length?null:r("ul",{className:`${s}items`,...u.listProps,children:i.map((l,c)=>p(s,l,{key:c,button:u.buttons}))}),renderItem:p}},me=n=>{const{homeLink:e="/",items:t,onItemClick:a,illustration:M,imageUrl:p,variant:s,wrapperProps:i={}}=n,u=ae(i.id),l=ee(n.ssr),[c,g]=U(!1),v=F(null),f=i.ref||v,T=X(o=>o.key==="Escape"&&L(),[]),b=()=>{C.add(N.menuIsOpen),C.remove(N.menuIsClosed),g(!0),document.addEventListener("keydown",T)},L=()=>{var o;C.remove(N.menuIsOpen),C.add(N.menuIsClosed),g(!1),y(h),(o=f.current)==null||o.scrollTo(0,0),document.removeEventListener("keydown",T)};V(()=>{if(l)return C.add(N.menuIsClosed),()=>{C.remove(N.menuIsClosed),L()}},[l]);const{mainItems:O,defaultActive:h}=Y(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const o=t.main.map(_=>{var E;if(!("title"in _)||"current"in _)return _;const W=(E=_.subItems.find(D=>"current"in D&&!!D.current))==null?void 0:E.current;return{..._,current:W}});let d=o.findIndex(_=>"current"in _&&_.current);return d<0&&"subItems"in(o[0]||{})&&(d=0),{mainItems:o,defaultActive:d}},[t.main]),[k,y]=U(h),$=F(h);h!==$.current&&($.current=h,y(h));const m=te(n,oe),{renderItem:P,renderList:I}=ue({onItemClick:a,closeMenu:L,openMenu:b,isBrowser:l}),S={...typeof e=="string"?{href:e,label:m.homeLink}:e,modifier:"home"},w=p||M&&re(M),x=`${u}-menu`;return r("nav",{...n.wrapperProps,className:Z("MainMenu2",[l&&(c?"open":"closed"),s&&s!=="default"?`variant--${s}`:void 0],i.className),style:w?{...i.style,"--menu-image":`url(${w})`}:i.style,ref:f,"aria-label":m.title,"data-sprinkled":l,id:x,children:[c&&r(G,{atTop:!0}),r("div",{className:"MainMenu2__content",children:[r("h2",{className:"MainMenu2__title",children:m.title}),l?r(K,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":c,"aria-controls":x,...c?{onClick:L,"aria-label":m.closeMenuLong,title:m.closeMenuLong,children:m.closeMenu}:{onClick:b,"aria-label":m.openMenuLong,title:m.openMenuLong,children:m.openMenu}}):r(K,{className:"MainMenu2__toggler",size:"small",href:`#${x}`,onClick:le,"aria-hidden":"true",children:m.title}),O&&r("div",{className:Z("MainMenu2__main",k<0&&"noneActive"),children:[P("MainMenu2__main__",S,{Tag:"div"}),O.map((o,d)=>{if("title"in o){const _=`${u}-submenu-${d}`,E=d===k;return r(q,{children:[r("div",{className:"MainMenu2__main__item","aria-current":o.current||void 0,children:l?r("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>y(d),"aria-controls":_,"aria-pressed":E,children:o.title}):r("strong",{className:"MainMenu2__main__link",children:o.title})}),I("MainMenu2__main__sub__",o.subItems,l&&{listProps:{id:_,hidden:!E}})]},d)}return P("MainMenu2__main__",o,{key:d,Tag:"div"})})]}),I("MainMenu2__hot__",t.hot,{buttons:!0}),I("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&r("div",{className:"MainMenu2__related",children:[t.relatedTitle&&r("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),I("MainMenu2__related__",t.related)]})]}),c&&r(G,{})]})},ce={default:void 0,light:"light"},de=n=>{try{const e=JSON.parse(n.dataset.propsTexts||"{}");if(typeof e.title=="string"&&typeof e.openMenu=="string"&&typeof e.closeMenu=="string")return e.openMenuLong=e.openMenuLong||e.openMenu,e.closeMenuLong=e.closeMenuLong||e.closeMenu,e.homeLink=e.homeLink||"",e}catch{}},_e=({html:n})=>{const e=F(null);return V(()=>{e.current&&(e.current.outerHTML=e.current.innerHTML)},[]),r("span",{ref:e,dangerouslySetInnerHTML:{__html:n}})},R=n=>{const e=n.getAttribute("aria-current");return e==="true"||e==="page"},A=n=>{var e;if(!n)return;const t=z("a[href]",n);if(!t)return;const a=z(".MainMenu2__main__sub__link__descr",n);a?.remove();const M=a?.textContent.trim(),p=t.getElementsByTagName("*").length===0?t.textContent.trim():r(_e,{html:t.innerHTML}),s=t.getAttribute("href"),i=t.getAttribute("target")||void 0,u=t.getAttribute("lang")||void 0,l=t.getAttribute("hreflang")||void 0,c=t.getAttribute("aria-label")||t.title||void 0,g=t.dataset.icon,v=(e=n.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:e[1],f=R(n);return{label:p,labelLong:c,href:s,target:i,lang:u,hrefLang:l,modifier:v,current:f,descr:M,icon:g}},Me=n=>{var e;const t={main:B(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",n).map(u=>{const l=u.nextElementSibling;return l!=null&&l.classList.contains("MainMenu2__main__sub__items")?{title:u.textContent.trim(),current:R(u),subItems:B(".MainMenu2__main__sub__item",l).map(A).filter(H)}:A(u)}).filter(H),hot:B(".MainMenu2__hot__item",n).map(A).filter(H),extra:B(".MainMenu2__extra__item",n).map(A).filter(H),relatedTitle:(e=z(".MainMenu2__related__title",n))==null?void 0:e.textContent.trim(),related:B(".MainMenu2__related__item",n).map(A).filter(H)},a=A(z(".MainMenu2__main__item--home",n));a&&(delete a.modifier,delete a.controlsId,delete a.descr);const M=n.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),p=n.className.match(/(?:^|\s)MainMenu2--variant--([^\s]+)/)||[],s=ce[p[1]||""],i=de(n);return{items:t,homeLink:a,imageUrl:M,texts:i,variant:s}};window.Hanna.makeSprinkle({name:"MainMenu2",init:n=>{const e=Me(n),t=n;return n.getAttributeNames().forEach(a=>{n.removeAttribute(a)}),J.render(r(me,{...e,ssr:!1}),t),t},unmount:(n,e)=>{J.unmountComponentAtNode(e)}});

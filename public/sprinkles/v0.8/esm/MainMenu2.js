import"../_chunks/initHannaNamespace-dde97328.js";import{h as j,_ as z,T as X,p as V,F as Y,a as q,C as D}from"../_chunks/compat.module-6d0944a1.js";import{m as F,b as B,q as S}from"../_chunks/qj-b9335549.js";import{g as ee}from"../_chunks/assets-7a061d68.js";import{g as ne}from"../_chunks/i18n-45294c51.js";import{L as te}from"../_chunks/_Link-7f48f5da.js";import{f as re}from"../_chunks/focusElement-a4f7f308.js";import"../_chunks/getSVGtext-bab5132d.js";import{B as G}from"../_chunks/_Button-3fca7562.js";import{o as r,u as ie}from"../_chunks/jsxRuntime.module-98db1a52.js";import{F as J}from"../_chunks/FocusTrap-83378748.js";import{u as ae}from"../_chunks/_useMobileMenuToggling-5fde4833.js";import{n as O}from"../_chunks/misc-29f84158.js";import"../_chunks/getLang-a66f2b15.js";const le=n=>{n.preventDefault();const e=n.currentTarget.hash.slice(1),t=e&&document.getElementById(e);t&&(t.tabIndex=-1,re(t))},R=n=>r(G,{bem:"ButtonPrimary",...n}),K=n=>r(G,{bem:"ButtonSecondary",...n}),I=typeof document<"u"&&document.documentElement.classList,C={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},oe={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"}},Q={alert:"info",globe:void 0,search:"search",user:"user"},se=n=>{const{onItemClick:e,closeMenu:t,openMenu:o,isBrowser:_}=n,M=(a,i,u={})=>{const{key:m,Tag:p="li",button:b}=u;if(typeof i=="function"){const l=i;return r("li",{className:`${a}item`,children:r(l,{closeMenu:t,openMenu:o})},m)}const v=`${a}link`,{label:g,labelLong:A,href:h,target:E,lang:f,controlsId:H,onClick:L,descr:T,icon:s}=i,x=T&&r(q,{children:[" ",r("small",{className:`${v}__descr`,children:T})]}),k=b?K:"button",P=b?K:te,w={className:v,"data-icon":s?Q[s]:void 0,"arial-label":A,title:A,lang:f},y=b?{size:"small"}:void 0;return g==="Gr\xE6na plani\xF0"&&console.log("FOOBAR",s,s&&Q[s]),r(p,{className:F(`${a}item`,i.modifier),"aria-current":i.current||void 0,children:_&&(L||h==null)?r(k,{...w,type:"button","aria-controls":H,onClick:()=>{const l=L&&L(i)===!1,c=e&&e(i)===!1;!(l||c)&&t()},...y,children:[g," ",x]}):h!=null?r(P,{...w,href:h,hrefLang:i.hrefLang,target:E,onClick:()=>{!(e&&e(i)===!1)&&t()},...y,children:[g," ",x]}):null},m)};return{renderList:(a,i,u={})=>!i||!i.length?null:r("ul",{className:`${a}items`,...u.listProps,children:i.map((m,p)=>M(a,m,{key:p,button:u.buttons}))}),renderItem:M}},ue=n=>{const{homeLink:e="/",items:t,onItemClick:o,illustration:_,imageUrl:M,wrapperProps:a={}}=n,i=ae(a.id),u=ie(n.ssr),[m,p]=j(!1),b=z(null),v=a.ref||b,g=X(l=>l.key==="Escape"&&h(),[]),A=()=>{I.add(C.menuIsOpen),I.remove(C.menuIsClosed),p(!0),document.addEventListener("keydown",g)},h=()=>{var l;I.remove(C.menuIsOpen),I.add(C.menuIsClosed),p(!1),L(f),(l=v.current)==null||l.scrollTo(0,0),document.removeEventListener("keydown",g)};V(()=>{if(u)return I.add(C.menuIsClosed),()=>{I.remove(C.menuIsClosed),h()}},[u]);const{mainItems:E,defaultActive:f}=Y(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const l=t.main.map(d=>{var $;if(!("title"in d)||"current"in d)return d;const W=($=d.subItems.find(Z=>"current"in Z&&!!Z.current))==null?void 0:$.current;return{...d,current:W}});let c=l.findIndex(d=>"current"in d&&d.current);return c<0&&"subItems"in(l[0]||{})&&(c=0),{mainItems:l,defaultActive:c}},[t.main]),[H,L]=j(f),T=z(f);f!==T.current&&(T.current=f,L(f));const s=ne(n,oe),{renderItem:x,renderList:k}=se({onItemClick:o,closeMenu:h,openMenu:A,isBrowser:u}),P={...typeof e=="string"?{href:e,label:s.homeLink}:e,modifier:"home"},w=M||_&&ee(_),y=`${i}-menu`;return r("nav",{...n.wrapperProps,className:F("MainMenu2",u&&(m?"open":"closed"),a.className),style:w?{...a.style,"--menu-image":`url(${w})`}:a.style,ref:v,"aria-label":s.title,"data-sprinkled":u,id:y,children:[m&&r(J,{atTop:!0}),r("div",{className:"MainMenu2__content",children:[r("h2",{className:"MainMenu2__title",children:s.title}),u?r(R,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":m,"aria-controls":y,...m?{onClick:h,"aria-label":s.closeMenuLong,title:s.closeMenuLong,children:s.closeMenu}:{onClick:A,"aria-label":s.openMenuLong,title:s.openMenuLong,children:s.openMenu}}):r(R,{className:"MainMenu2__toggler",size:"small",href:`#${y}`,onClick:le,"aria-hidden":"true",children:s.title}),E&&r("div",{className:F("MainMenu2__main",H<0&&"noneActive"),children:[x("MainMenu2__main__",P,{Tag:"div"}),E.map((l,c)=>{if("title"in l){const d=`${i}-submenu-${c}`,$=c===H;return r(q,{children:[r("div",{className:"MainMenu2__main__item","aria-current":l.current||void 0,children:u?r("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>L(c),"aria-controls":d,"aria-pressed":$,children:l.title}):r("strong",{className:"MainMenu2__main__link",children:l.title})}),k("MainMenu2__main__sub__",l.subItems,u&&{listProps:{id:d,hidden:!$}})]},c)}return x("MainMenu2__main__",l,{key:c,Tag:"div"})})]}),k("MainMenu2__hot__",t.hot,{buttons:!0}),k("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&r("div",{className:"MainMenu2__related",children:[t.relatedTitle&&r("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),k("MainMenu2__related__",t.related)]})]}),m&&r(J,{})]})},me=n=>{try{const e=JSON.parse(n.dataset.propsTexts||"{}");if(typeof e.title=="string"&&typeof e.openMenu=="string"&&typeof e.closeMenu=="string")return e.openMenuLong=e.openMenuLong||e.openMenu,e.closeMenuLong=e.closeMenuLong||e.closeMenu,e.homeLink=e.homeLink||"",e}catch{}},ce=({html:n})=>{const e=z(null);return V(()=>{e.current&&(e.current.outerHTML=e.current.innerHTML)},[]),r("span",{ref:e,dangerouslySetInnerHTML:{__html:n}})},U=n=>{const e=n.getAttribute("aria-current");return e==="true"||e==="page"},N=n=>{var e;if(!n)return;const t=S("a[href]",n);if(!t)return;const o=S(".MainMenu2__main__sub__link__descr",n);o?.remove();const _=o?.textContent.trim(),M=t.getElementsByTagName("*").length===0?t.textContent.trim():r(ce,{html:t.innerHTML}),a=t.getAttribute("href"),i=t.getAttribute("target")||void 0,u=t.getAttribute("lang")||void 0,m=t.getAttribute("hreflang")||void 0,p=t.getAttribute("aria-label")||t.title||void 0,b=t.dataset.icon,v=(e=n.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:e[1],g=U(n);return{label:M,labelLong:p,href:a,target:i,lang:u,hrefLang:m,modifier:v,current:g,descr:_,icon:b}},de=n=>{var e;const t={main:B(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",n).map(a=>{const i=a.nextElementSibling;return i!=null&&i.classList.contains("MainMenu2__main__sub__items")?{title:a.textContent.trim(),current:U(a),subItems:B(".MainMenu2__main__sub__item",i).map(N).filter(O)}:N(a)}).filter(O),hot:B(".MainMenu2__hot__item",n).map(N).filter(O),extra:B(".MainMenu2__extra__item",n).map(N).filter(O),relatedTitle:(e=S(".MainMenu2__related__title",n))==null?void 0:e.textContent.trim(),related:B(".MainMenu2__related__item",n).map(N).filter(O)},o=N(S(".MainMenu2__main__item--home",n));o&&(delete o.modifier,delete o.controlsId,delete o.descr);const _=n.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),M=me(n);return{items:t,homeLink:o,imageUrl:_,texts:M}};window.Hanna.makeSprinkle({name:"MainMenu2",init:n=>{const e=de(n),t=n;return n.getAttributeNames().forEach(o=>{n.removeAttribute(o)}),D.render(r(ue,{...e,ssr:!1}),t),t},unmount:(n,e)=>{D.unmountComponentAtNode(e)}});

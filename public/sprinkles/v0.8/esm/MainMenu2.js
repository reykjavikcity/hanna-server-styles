import"../_chunks/initHannaNamespace-2dc4c589.js";import{h as U,_ as F,T as X,p as V,F as Y,a as q,C as J}from"../_chunks/compat.module-6d0944a1.js";import{a as E,q as z}from"../_chunks/qj-3bd34ed6.js";import{o as r,u as ee,m as Z}from"../_chunks/jsxRuntime.module-9d76abce.js";import{f as ne}from"../_chunks/getSVGtext-03122a1f.js";import{g as te}from"../_chunks/i18n-45294c51.js";import{g as re}from"../_chunks/assets-7a061d68.js";import{L as ie}from"../_chunks/_Link-7f48f5da.js";import{B as j}from"../_chunks/_Button-aa4a4856.js";import{F as G}from"../_chunks/FocusTrap-166afe2e.js";import{u as ae}from"../_chunks/_useMobileMenuToggling-dc94c532.js";import{n as H}from"../_chunks/misc-29f84158.js";import"../_chunks/getLang-c224bf02.js";const le=(n,e)=>{n.preventDefault();const t=n.currentTarget.hash.slice(1),a=t&&document.getElementById(t);a&&ne(a,e)},K=n=>r(j,{bem:"ButtonPrimary",...n}),Q=n=>r(j,{bem:"ButtonSecondary",...n}),N=typeof document<"u"&&document.documentElement.classList,A={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},oe={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"}},se={alert:"info",globe:void 0,search:"search",user:"user"},ue=n=>{const{onItemClick:e,closeMenu:t,openMenu:a,isBrowser:M}=n,p=(s,i,u={})=>{const{key:l,Tag:c="li",button:g}=u;if(typeof i=="function"){const v=i;return r("li",{className:`${s}item`,children:r(v,{closeMenu:t,openMenu:a})},l)}const b=`${s}link`,{label:f,labelLong:$,href:L,target:k,lang:O,controlsId:h,onClick:y,descr:I,icon:w}=i,m=I&&r(q,{children:[" ",r("small",{className:`${b}__descr`,children:I})]}),P=g?Q:"button",C=g?Q:ie,S={className:b,"data-icon":w?se[w]:void 0,"arial-label":$,title:$,lang:O},x=g?{size:"small"}:void 0;return r(c,{className:Z(`${s}item`,i.modifier),"aria-current":i.current||void 0,children:M&&(y||L==null&&e)?r(P,{...S,type:"button","aria-controls":h,onClick:()=>{const v=y&&y(i)===!1,o=e&&e(i)===!1;!(v||o)&&t()},...x,children:[f," ",m]}):L!=null?r(C,{...S,href:L,hrefLang:i.hrefLang,target:k,onClick:()=>{!(e&&e(i)===!1)&&t()},...x,children:[f," ",m]}):null},l)};return{renderList:(s,i,u={})=>!i||!i.length?null:r("ul",{className:`${s}items`,...u.listProps,children:i.map((l,c)=>p(s,l,{key:c,button:u.buttons}))}),renderItem:p}},me=n=>{const{homeLink:e="/",items:t,onItemClick:a,illustration:M,imageUrl:p,variant:s,wrapperProps:i={}}=n,u=ae(i.id),l=ee(n.ssr),[c,g]=U(!1),b=F(null),f=i.ref||b,$=X(o=>o.key==="Escape"&&k(),[]),L=()=>{N.add(A.menuIsOpen),N.remove(A.menuIsClosed),g(!0),document.addEventListener("keydown",$)},k=()=>{var o;N.remove(A.menuIsOpen),N.add(A.menuIsClosed),g(!1),I(h),(o=f.current)==null||o.scrollTo(0,0),document.removeEventListener("keydown",$)};V(()=>{if(l)return N.add(A.menuIsClosed),()=>{N.remove(A.menuIsClosed),k()}},[l]);const{mainItems:O,defaultActive:h}=Y(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const o=t.main.map(d=>{var B;if(!("title"in d)||"current"in d)return d;const W=(B=d.subItems.find(D=>"current"in D&&!!D.current))==null?void 0:B.current;return{...d,current:W}});let _=o.findIndex(d=>"current"in d&&d.current);return _<0&&"subItems"in(o[0]||{})&&(_=0),{mainItems:o,defaultActive:_}},[t.main]),[y,I]=U(h),w=F(h);h!==w.current&&(w.current=h,I(h));const m=te(n,oe),{renderItem:P,renderList:C}=ue({onItemClick:a,closeMenu:k,openMenu:L,isBrowser:l}),S={...typeof e=="string"?{href:e,label:m.homeLink}:e,modifier:"home"},x=p||M&&re(M),v=`${u}-menu`;return r("nav",{...n.wrapperProps,className:Z("MainMenu2",[l&&(c?"open":"closed"),s&&s!=="default"?`variant--${s}`:void 0],i.className),style:x?{...i.style,"--menu-image":`url(${x})`}:i.style,ref:f,"aria-label":m.title,"data-sprinkled":l,id:v,children:[c&&r(G,{atTop:!0}),r("div",{className:"MainMenu2__content",children:[r("h2",{className:"MainMenu2__title",children:m.title}),l?r(K,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":c,"aria-controls":v,...c?{onClick:k,"aria-label":m.closeMenuLong,title:m.closeMenuLong,children:m.closeMenu}:{onClick:L,"aria-label":m.openMenuLong,title:m.openMenuLong,children:m.openMenu}}):r(K,{className:"MainMenu2__toggler",size:"small",href:`#${v}`,onClick:le,"aria-hidden":"true",children:m.title}),O&&r("div",{className:Z("MainMenu2__main",y<0&&"noneActive"),children:[P("MainMenu2__main__",S,{Tag:"div"}),O.map((o,_)=>{if("title"in o){const d=`${u}-submenu-${_}`,B=_===y;return r(q,{children:[r("div",{className:"MainMenu2__main__item","aria-current":o.current||void 0,children:l?r("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>I(_),"aria-controls":d,"aria-pressed":B,children:o.title}):r("strong",{className:"MainMenu2__main__link",children:o.title})}),C("MainMenu2__main__sub__",o.subItems,l&&{listProps:{id:d,hidden:!B}})]},_)}return P("MainMenu2__main__",o,{key:_,Tag:"div"})})]}),C("MainMenu2__hot__",t.hot,{buttons:!0}),C("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&r("div",{className:"MainMenu2__related",children:[t.relatedTitle&&r("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),C("MainMenu2__related__",t.related)]})]}),c&&r(G,{})]})},ce={default:void 0,light:"light"},de=n=>{try{const e=JSON.parse(n.dataset.propsTexts||"{}");if(typeof e.title=="string"&&typeof e.openMenu=="string"&&typeof e.closeMenu=="string")return e.openMenuLong=e.openMenuLong||e.openMenu,e.closeMenuLong=e.closeMenuLong||e.closeMenu,e.homeLink=e.homeLink||"",e}catch{}},_e=({html:n})=>{const e=F(null);return V(()=>{e.current&&(e.current.outerHTML=e.current.innerHTML)},[]),r("span",{ref:e,dangerouslySetInnerHTML:{__html:n}})},R=n=>{const e=n.getAttribute("aria-current");return e==="true"||e==="page"},T=n=>{var e;if(!n)return;const t=z("a[href]",n);if(!t)return;const a=z(".MainMenu2__main__sub__link__descr",n);a?.remove();const M=a?.textContent.trim(),p=t.getElementsByTagName("*").length===0?t.textContent.trim():r(_e,{html:t.innerHTML}),s=t.getAttribute("href"),i=t.getAttribute("target")||void 0,u=t.getAttribute("lang")||void 0,l=t.getAttribute("hreflang")||void 0,c=t.getAttribute("aria-label")||t.title||void 0,g=t.dataset.icon,b=(e=n.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:e[1],f=R(n);return{label:p,labelLong:c,href:s,target:i,lang:u,hrefLang:l,modifier:b,current:f,descr:M,icon:g}},Me=n=>{var e;const t={main:E(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",n).map(u=>{const l=u.nextElementSibling;return l!=null&&l.classList.contains("MainMenu2__main__sub__items")?{title:u.textContent.trim(),current:R(u),subItems:E(".MainMenu2__main__sub__item",l).map(T).filter(H)}:T(u)}).filter(H),hot:E(".MainMenu2__hot__item",n).map(T).filter(H),extra:E(".MainMenu2__extra__item",n).map(T).filter(H),relatedTitle:(e=z(".MainMenu2__related__title",n))==null?void 0:e.textContent.trim(),related:E(".MainMenu2__related__item",n).map(T).filter(H)},a=T(z(".MainMenu2__main__item--home",n));a&&(delete a.modifier,delete a.controlsId,delete a.descr);const M=n.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),p=n.className.match(/(?:^|\s)MainMenu2--variant--([^\s]+)/)||[],s=ce[p[1]||""],i=de(n);return{items:t,homeLink:a,imageUrl:M,texts:i,variant:s}};window.Hanna.makeSprinkle({name:"MainMenu2",init:n=>{const e=Me(n),t=n;return n.getAttributeNames().forEach(a=>{n.removeAttribute(a)}),J.render(r(me,{...e,ssr:!1}),t),t},unmount:(n,e)=>{J.unmountComponentAtNode(e)}});

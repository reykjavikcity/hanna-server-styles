import"../_chunks/initHannaNamespace-dde97328.js";import{h as V,_ as F,T as Y,p as q,F as ee,a as D,C as G}from"../_chunks/compat.module-6d0944a1.js";import{m as Z,b as B,q as z}from"../_chunks/qj-b9335549.js";import{g as ne}from"../_chunks/assets-7a061d68.js";import{g as te}from"../_chunks/i18n-45294c51.js";import{L as re}from"../_chunks/_Link-7f48f5da.js";import{f as ie}from"../_chunks/focusElement-a4f7f308.js";import"../_chunks/getSVGtext-bab5132d.js";import{B as J}from"../_chunks/_Button-3fca7562.js";import{o as r,u as ae}from"../_chunks/jsxRuntime.module-98db1a52.js";import{F as R}from"../_chunks/FocusTrap-83378748.js";import{u as le}from"../_chunks/_useMobileMenuToggling-5fde4833.js";import{n as E}from"../_chunks/misc-29f84158.js";import"../_chunks/getLang-a66f2b15.js";const oe=n=>{n.preventDefault();const e=n.currentTarget.hash.slice(1),t=e&&document.getElementById(e);t&&(t.tabIndex=-1,ie(t))},j=n=>r(J,{bem:"ButtonPrimary",...n}),K=n=>r(J,{bem:"ButtonSecondary",...n}),A=typeof document<"u"&&document.documentElement.classList,T={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},se={is:{title:"A\xF0alvalmynd",homeLink:"Fors\xED\xF0a",openMenu:"Valmynd",openMenuLong:"Opna A\xF0alvalmynd",closeMenu:"Loka",closeMenuLong:"Loka A\xF0alvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu g\u0142\xF3wne",homeLink:"Strona g\u0142\xF3wna",openMenu:"Menu",openMenuLong:"Otw\xF3rz menu g\u0142\xF3wne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu g\u0142\xF3wne"}},Q={alert:"info",globe:void 0,search:"search",user:"user"},ue=n=>{const{onItemClick:e,closeMenu:t,openMenu:o,isBrowser:M}=n,p=(s,i,u={})=>{const{key:a,Tag:c="li",button:g}=u;if(typeof i=="function"){const b=i;return r("li",{className:`${s}item`,children:r(b,{closeMenu:t,openMenu:o})},a)}const L=`${s}link`,{label:h,labelLong:x,href:k,target:y,lang:H,controlsId:f,onClick:I,descr:C,icon:v}=i,m=C&&r(D,{children:[" ",r("small",{className:`${L}__descr`,children:C})]}),P=g?K:"button",N=g?K:re,S={className:L,"data-icon":v?Q[v]:void 0,"arial-label":x,title:x,lang:H},$=g?{size:"small"}:void 0;return h==="Gr\xE6na plani\xF0"&&console.log("FOOBAR",v,v&&Q[v]),r(c,{className:Z(`${s}item`,i.modifier),"aria-current":i.current||void 0,children:M&&(I||k==null)?r(P,{...S,type:"button","aria-controls":f,onClick:()=>{const b=I&&I(i)===!1,l=e&&e(i)===!1;!(b||l)&&t()},...$,children:[h," ",m]}):k!=null?r(N,{...S,href:k,hrefLang:i.hrefLang,target:y,onClick:()=>{!(e&&e(i)===!1)&&t()},...$,children:[h," ",m]}):null},a)};return{renderList:(s,i,u={})=>!i||!i.length?null:r("ul",{className:`${s}items`,...u.listProps,children:i.map((a,c)=>p(s,a,{key:c,button:u.buttons}))}),renderItem:p}},me=n=>{const{homeLink:e="/",items:t,onItemClick:o,illustration:M,imageUrl:p,variant:s,wrapperProps:i={}}=n,u=le(i.id),a=ae(n.ssr),[c,g]=V(!1),L=F(null),h=i.ref||L,x=Y(l=>l.key==="Escape"&&y(),[]),k=()=>{A.add(T.menuIsOpen),A.remove(T.menuIsClosed),g(!0),document.addEventListener("keydown",x)},y=()=>{var l;A.remove(T.menuIsOpen),A.add(T.menuIsClosed),g(!1),C(f),(l=h.current)==null||l.scrollTo(0,0),document.removeEventListener("keydown",x)};q(()=>{if(a)return A.add(T.menuIsClosed),()=>{A.remove(T.menuIsClosed),y()}},[a]);const{mainItems:H,defaultActive:f}=ee(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const l=t.main.map(d=>{var O;if(!("title"in d)||"current"in d)return d;const X=(O=d.subItems.find(U=>"current"in U&&!!U.current))==null?void 0:O.current;return{...d,current:X}});let _=l.findIndex(d=>"current"in d&&d.current);return _<0&&"subItems"in(l[0]||{})&&(_=0),{mainItems:l,defaultActive:_}},[t.main]),[I,C]=V(f),v=F(f);f!==v.current&&(v.current=f,C(f));const m=te(n,se),{renderItem:P,renderList:N}=ue({onItemClick:o,closeMenu:y,openMenu:k,isBrowser:a}),S={...typeof e=="string"?{href:e,label:m.homeLink}:e,modifier:"home"},$=p||M&&ne(M),b=`${u}-menu`;return r("nav",{...n.wrapperProps,className:Z("MainMenu2",[a&&(c?"open":"closed"),s&&s!=="default"?`variant--${s}`:void 0],i.className),style:$?{...i.style,"--menu-image":`url(${$})`}:i.style,ref:h,"aria-label":m.title,"data-sprinkled":a,id:b,children:[c&&r(R,{atTop:!0}),r("div",{className:"MainMenu2__content",children:[r("h2",{className:"MainMenu2__title",children:m.title}),a?r(j,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":c,"aria-controls":b,...c?{onClick:y,"aria-label":m.closeMenuLong,title:m.closeMenuLong,children:m.closeMenu}:{onClick:k,"aria-label":m.openMenuLong,title:m.openMenuLong,children:m.openMenu}}):r(j,{className:"MainMenu2__toggler",size:"small",href:`#${b}`,onClick:oe,"aria-hidden":"true",children:m.title}),H&&r("div",{className:Z("MainMenu2__main",I<0&&"noneActive"),children:[P("MainMenu2__main__",S,{Tag:"div"}),H.map((l,_)=>{if("title"in l){const d=`${u}-submenu-${_}`,O=_===I;return r(D,{children:[r("div",{className:"MainMenu2__main__item","aria-current":l.current||void 0,children:a?r("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>C(_),"aria-controls":d,"aria-pressed":O,children:l.title}):r("strong",{className:"MainMenu2__main__link",children:l.title})}),N("MainMenu2__main__sub__",l.subItems,a&&{listProps:{id:d,hidden:!O}})]},_)}return P("MainMenu2__main__",l,{key:_,Tag:"div"})})]}),N("MainMenu2__hot__",t.hot,{buttons:!0}),N("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&r("div",{className:"MainMenu2__related",children:[t.relatedTitle&&r("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),N("MainMenu2__related__",t.related)]})]}),c&&r(R,{})]})},ce={default:void 0,light:"light"},de=n=>{try{const e=JSON.parse(n.dataset.propsTexts||"{}");if(typeof e.title=="string"&&typeof e.openMenu=="string"&&typeof e.closeMenu=="string")return e.openMenuLong=e.openMenuLong||e.openMenu,e.closeMenuLong=e.closeMenuLong||e.closeMenu,e.homeLink=e.homeLink||"",e}catch{}},_e=({html:n})=>{const e=F(null);return q(()=>{e.current&&(e.current.outerHTML=e.current.innerHTML)},[]),r("span",{ref:e,dangerouslySetInnerHTML:{__html:n}})},W=n=>{const e=n.getAttribute("aria-current");return e==="true"||e==="page"},w=n=>{var e;if(!n)return;const t=z("a[href]",n);if(!t)return;const o=z(".MainMenu2__main__sub__link__descr",n);o?.remove();const M=o?.textContent.trim(),p=t.getElementsByTagName("*").length===0?t.textContent.trim():r(_e,{html:t.innerHTML}),s=t.getAttribute("href"),i=t.getAttribute("target")||void 0,u=t.getAttribute("lang")||void 0,a=t.getAttribute("hreflang")||void 0,c=t.getAttribute("aria-label")||t.title||void 0,g=t.dataset.icon,L=(e=n.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:e[1],h=W(n);return{label:p,labelLong:c,href:s,target:i,lang:u,hrefLang:a,modifier:L,current:h,descr:M,icon:g}},Me=n=>{var e;const t={main:B(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",n).map(u=>{const a=u.nextElementSibling;return a!=null&&a.classList.contains("MainMenu2__main__sub__items")?{title:u.textContent.trim(),current:W(u),subItems:B(".MainMenu2__main__sub__item",a).map(w).filter(E)}:w(u)}).filter(E),hot:B(".MainMenu2__hot__item",n).map(w).filter(E),extra:B(".MainMenu2__extra__item",n).map(w).filter(E),relatedTitle:(e=z(".MainMenu2__related__title",n))==null?void 0:e.textContent.trim(),related:B(".MainMenu2__related__item",n).map(w).filter(E)},o=w(z(".MainMenu2__main__item--home",n));o&&(delete o.modifier,delete o.controlsId,delete o.descr);const M=n.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),p=n.className.match(/(?:^|\s)MainMenu2--variant--(\s+)/)||[],s=ce[p[1]||""],i=de(n);return{items:t,homeLink:o,imageUrl:M,texts:i,variant:s}};window.Hanna.makeSprinkle({name:"MainMenu2",init:n=>{const e=Me(n),t=n;return n.getAttributeNames().forEach(o=>{n.removeAttribute(o)}),G.render(r(me,{...e,ssr:!1}),t),t},unmount:(n,e)=>{G.unmountComponentAtNode(e)}});

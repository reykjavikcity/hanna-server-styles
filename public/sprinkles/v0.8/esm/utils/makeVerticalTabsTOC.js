import{F as I,h as y,p as S,C as b}from"../../_chunks/compat.module-8a0f8b99.js";import{f as v,h as x,z as A,j as N}from"../../_chunks/qj-a13fcd70.js";import{h as T}from"../../_chunks/useFormatMonitor-a717dd05.js";import{T as C}from"../../_chunks/Tabs-b23fc8e2.js";import{o as E}from"../../_chunks/jsxRuntime.module-ece33ea3.js";import{j as O}from"../../_chunks/utils-9450e812.js";const f=e=>e&&decodeURIComponent(e.split("#")[1]||"")||"",u=e=>f(e&&e.href),w=(e,i)=>{const o=e.map(t=>({...t,"aria-controls":t["aria-controls"]||i})),n={};return o.forEach((t,s)=>{const m=t.items;if(!m){const r=u(t);n[r]={activeIdx:s};return}m.forEach((r,a)=>{n[u(r)]={activeIdx:s,subTabs:{activeIdx:a,"aria-label":t.longLabel||t.label,id:t["aria-controls"],tabs:m,onSetActive:(d,l)=>{const c=u(l);v.setFrag(c)}}},a===0&&(t.href=t.href||"#"+u(r))})}),{itemsById:n,updatedItems:o}},$=e=>{const{onItemSelect:i,items:o}=e,n=T.useDomid(),t=e.id||n,{itemsById:s,updatedItems:m}=I(()=>w(o,t),[o,t]),[r,a]=y(()=>{const d=typeof location<"u"?f(location.hash):"";return s[d]||s[u(m[0])]||{}});return S(()=>{const d=()=>{const l=f(location.href),c=s[l];c&&(a(c),i(l))};return window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d)},[s,i]),E(C,{wrapperProps:e.wrapperProps,id:t,vertical:!0,"aria-label":e["aria-label"],onSetActive:(d,l)=>{var c;const p=u(l),h=p||u((c=s[p].subTabs)==null?void 0:c.tabs[0]);v.setFrag(h)},tabs:m,role:"tablist",activateOnFocus:e.activateOnFocus,activeIdx:r.activeIdx,subTabs:r.subTabs})},L=(e,i)=>{i?(e.hidden=!1,e.tabIndex=0):(e.hidden=!0,e.removeAttribute("tabindex"))},F={is:"is",en:"en",pl:"pl"},g="is",q=()=>F[x()||g]||g,H=e=>{const i=typeof e=="string"?Array.from(document.querySelectorAll(e)):e instanceof HTMLElement?[e]:Array.isArray(e)?e.sort((n,t)=>n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1):Array.from(e);let o;return i.filter((n,t)=>o&&o.contains(n)?(console.warn("Content containers must not overlap. Ignoring ",n,"because it is a decendant of",o),!1):(o=i[t],!0))},P=(e,i)=>{let o=e.querySelector("h1, h2, h3");if(!o)if(i)o=document.createElement("h2"),o.dataset.vttocInserted="",o.hidden=!0,o.textContent="Untitled",e.prepend(o);else return[];const n=["H1","H2","H3","H4"],t=n.indexOf(o.nodeName)||1;return n.slice(t,t+2)},D=e=>{const i=[],o=[];return e.forEach((n,t)=>{const[s,m]=P(n,t===0);if(n.dataset.isSeen="true",!s){const a=i[i.length-1],d=a.$merged||(a.$merged=[]),l=document.createElement("div");l.$container=n,l.append(...Array.from(n.childNodes)),a.append(l),d.push(l);return}let r=n.querySelector(s);for(;r;){const a=[];let d=r.nextSibling;for(;d&&d.nodeName!==s&&d.nodeName!==m;)a.push(d),d=d.nextSibling;const l=r.textContent,c=document.createElement("div");c.$container=n,c.className="TabPanel",c.dataset.isSeen="true",c.hidden=!0,c.dataset.sprinkled="true",c.setAttribute("aria-label",l);const p=r.id;p&&(r.removeAttribute("id"),r.dataset.domid=p),c.id=p||N(l),c.append(...a);const h=!!c.textContent.trim();r.before(c),c.prepend(r),i.push(c),r.nodeName===s&&o.push({label:l,longLabel:r.getAttribute("aria-label")||void 0,items:[]}),(r.nodeName===m||h)&&o[o.length-1].items.push({label:l,href:"#"+c.id,"aria-controls":c.id}),r=d}}),o.forEach(n=>{const t=n.items||[];if(t.length<2){const s=t[0]||n;n.href=s.href,n["aria-controls"]=s["aria-controls"],delete n.items}}),{items:o,panelElms:i}},U=e=>{const i=H(e),{items:o,panelElms:n}=D(i);return{props:{items:o,onItemSelect:t=>{let s;n.forEach(m=>{const r=!!t&&m.id===t;r&&(s=m.$container),L(m,r)}),i.forEach(m=>{m.hidden=m!==s}),i.length===1&&(i[0].hidden=!1)}},panelElms:n}},j=(e,i)=>{const{props:o,panelElms:n}=U(e);o["aria-label"]=i||{is:"Efnisyfirlit",en:"Table of Contents",pl:"Spis tre\u015Bci"}[q()];const t=document.createElement("div");let s=decodeURIComponent(location.href.split("#")[1]||"");if(!s){const a=o.items[0];a.items?s=a.items[0]["aria-controls"]||"":s=a["aria-controls"]||""}o.onItemSelect(s);const m={rootElm:t,panelElms:n,unmount:()=>{b.unmountComponentAtNode(t),t.remove(),n.flatMap(a=>{const{$merged:d}=a;return d?(delete a.$merged,[a,...d]):[a]}).forEach(a=>{const d=a.querySelector("[data-vttoc-inserted]");d?.remove();const l=a.querySelector("[data-domid]");l&&(l.id=l.dataset.domid,l.removeAttribute("data-domid")),A(a),a.$container.hidden=!1})}},r=O("Tabs").then(()=>(b.render(E($,{...o,ssr:!1}),t),m));return Object.assign(r,m,{whenReady:r}),r};export{j as default};

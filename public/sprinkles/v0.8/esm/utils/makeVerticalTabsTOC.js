import{F as S,h as y,p as x,C as b}from"../../_chunks/compat.module-8a0f8b99.js";import{f as v,h as A,z as N,j as T}from"../../_chunks/qj-a13fcd70.js";import{h as C}from"../../_chunks/useFormatMonitor-a717dd05.js";import{T as O}from"../../_chunks/Tabs-8bef8328.js";import{o as E}from"../../_chunks/jsxRuntime.module-ece33ea3.js";import{j as w}from"../../_chunks/utils-9450e812.js";import{hasLegacySeenEffectsCSS as L,autoSeenEffectsRefresh as $}from"./addSeenEffect.js";const f=t=>t&&decodeURIComponent(t.split("#")[1]||"")||"",u=t=>f(t&&t.href),F=(t,a)=>{const n=t.map(e=>({...e,"aria-controls":e["aria-controls"]||a})),i={};return n.forEach((e,l)=>{const s=e.items;if(!s){const m=u(e);i[m]={activeIdx:l};return}s.forEach((m,r)=>{i[u(m)]={activeIdx:l,subTabs:{activeIdx:r,"aria-label":e.longLabel||e.label,id:e["aria-controls"],tabs:s,onSetActive:(o,d)=>{const c=u(d);v.setFrag(c)}}},r===0&&(e.href=e.href||"#"+u(m))})}),{itemsById:i,updatedItems:n}},q=t=>{const{onItemSelect:a,items:n}=t,i=C.useDomid(),e=t.id||i,{itemsById:l,updatedItems:s}=S(()=>F(n,e),[n,e]),[m,r]=y(()=>{const o=typeof location<"u"?f(location.hash):"";return l[o]||l[u(s[0])]||{}});return x(()=>{const o=()=>{const d=f(location.href),c=l[d];c&&(r(c),a(d))};return window.addEventListener("hashchange",o),()=>window.removeEventListener("hashchange",o)},[l,a]),E(O,{wrapperProps:t.wrapperProps,id:e,vertical:!0,"aria-label":t["aria-label"],onSetActive:(o,d)=>{var c;const p=u(d),h=p||u((c=l[p].subTabs)==null?void 0:c.tabs[0]);v.setFrag(h)},tabs:s,role:"tablist",activateOnFocus:t.activateOnFocus,activeIdx:m.activeIdx,subTabs:m.subTabs,ssr:t.ssr})},H=(t,a)=>{a?(t.hidden=!1,t.tabIndex=0):(t.hidden=!0,t.removeAttribute("tabindex"))},P={is:"is",en:"en",pl:"pl"},g="is",R=()=>P[A()||g]||g,U=t=>{const a=typeof t=="string"?Array.from(document.querySelectorAll(t)):t instanceof HTMLElement?[t]:Array.isArray(t)?t.sort((i,e)=>i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1):Array.from(t);let n;return a.filter((i,e)=>n&&n.contains(i)?(console.warn("Content containers must not overlap. Ignoring ",i,"because it is a decendant of",n),!1):(n=a[e],!0))},D=(t,a)=>{let n=t.querySelector("h1, h2, h3");if(!n)if(a)n=document.createElement("h2"),n.dataset.vttocInserted="",n.hidden=!0,n.textContent="Untitled",t.prepend(n);else return[];const i=["H1","H2","H3","H4"],e=i.indexOf(n.nodeName)||1;return i.slice(e,e+2)},j=t=>{const a=[],n=[],i=[];return t.forEach((e,l)=>{const[s,m]=D(e,l===0);if(!s){const o=a[a.length-1],d=o.$merged||(o.$merged=[]),c=document.createElement("div");c.$container=e,c.append(...Array.from(e.childNodes)),o.append(c),d.push(c);return}let r=e.querySelector(s);for(;r;){const o=[];let d=r.nextSibling;for(;d&&d.nodeName!==s&&d.nodeName!==m;)o.push(d),d=d.nextSibling;const c=r.textContent,p=document.createElement("div");p.$container=e,p.className="TabPanel",p.hidden=!0,p.dataset.sprinkled="true",p.setAttribute("aria-label",c);const h=r.id;h&&(r.removeAttribute("id"),r.dataset.domid=h),p.id=h||T(c),i.push(p.id),p.append(...o);const I=!!p.textContent.trim();r.before(p),p.prepend(r),a.push(p),r.nodeName===s&&n.push({label:c,longLabel:r.getAttribute("aria-label")||void 0,items:[]}),(r.nodeName===m||I)&&n[n.length-1].items.push({label:c,href:"#"+p.id,"aria-controls":p.id}),r=d}}),n.forEach(e=>{const l=e.items||[];if(l.length<2){const s=l[0]||e;e.href=s.href,e["aria-controls"]=s["aria-controls"],delete e.items}}),{items:n,panelElms:a,ids:i}},M=t=>{const a=U(t),{items:n,panelElms:i,ids:e}=j(a);return{props:{items:n,onItemSelect:l=>{let s;i.forEach(m=>{const r=!!l&&m.id===l;r&&(s=m.$container),H(m,r)}),a.forEach(m=>{m.hidden=m!==s}),a.length===1&&(a[0].hidden=!1)}},panelElms:i,ids:e}},_=(t,a)=>{const{props:n,panelElms:i,ids:e}=M(t);n["aria-label"]=a||{is:"Efnisyfirlit",en:"Table of Contents",pl:"Spis tre\u015Bci"}[R()];const l=document.createElement("div");let s=decodeURIComponent(location.href.split("#")[1]||"");if(!s||!e.includes(s)){const o=n.items[0];o.items?s=o.items[0]["aria-controls"]||"":s=o["aria-controls"]||""}n.onItemSelect(s);const m={rootElm:l,panelElms:i,unmount:()=>{b.unmountComponentAtNode(l),l.remove(),i.flatMap(o=>{const{$merged:d}=o;return d?(delete o.$merged,[o,...d]):[o]}).forEach(o=>{const d=o.querySelector("[data-vttoc-inserted]");d?.remove();const c=o.querySelector("[data-domid]");c&&(c.id=c.dataset.domid,c.removeAttribute("data-domid")),N(o),o.$container.hidden=!1})}},r=w("Tabs").then(()=>(b.render(E(q,{...n,ssr:!1}),l),m));return L&&r.then(()=>{setTimeout($,100)}),Object.assign(r,m,{whenReady:r}),r};export{_ as default};

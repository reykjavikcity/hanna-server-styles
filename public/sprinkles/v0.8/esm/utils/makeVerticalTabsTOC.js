import{F as I,h as S,p as y,C as b}from"../../_chunks/compat.module-edfc5ce4.js";import{f as v,z as x,b as A}from"../../_chunks/qj-f5658347.js";import{u as N}from"../../_chunks/useFormatMonitor-6ee15356.js";import{T}from"../../_chunks/Tabs-d5dfd9c6.js";import{o as E}from"../../_chunks/jsxRuntime.module-53ce29b9.js";import{c as C,e as O}from"../../_chunks/utils-ed8ff0d8.js";import{hasLegacySeenEffectsCSS as w,autoSeenEffectsRefresh as L}from"./addSeenEffect.js";const h=t=>t&&decodeURIComponent(t.split("#")[1]||"")||"",p=t=>h(t&&t.href),$=(t,a)=>{const n=t.map(e=>({...e,"aria-controls":e["aria-controls"]||a})),i={};return n.forEach((e,l)=>{const s=e.items;if(!s){const m=p(e);i[m]={activeIdx:l};return}s.forEach((m,r)=>{i[p(m)]={activeIdx:l,subTabs:{activeIdx:r,"aria-label":e.longLabel||e.label,id:e["aria-controls"],tabs:s,onSetActive:(o,c)=>{const d=p(c);v.setFrag(d)}}},r===0&&(e.href=e.href||"#"+p(m))})}),{itemsById:i,updatedItems:n}},F=t=>{const{onItemSelect:a,items:n}=t,i=N(),e=t.id||i,{itemsById:l,updatedItems:s}=I(()=>$(n,e),[n,e]),[m,r]=S(()=>{const o=typeof location<"u"?h(location.hash):"";return l[o]||l[p(s[0])]||{}});return y(()=>{const o=()=>{const c=h(location.href),d=l[c];d&&(r(d),a(c))};return window.addEventListener("hashchange",o),()=>window.removeEventListener("hashchange",o)},[l,a]),E(T,{wrapperProps:t.wrapperProps,id:e,vertical:!0,"aria-label":t["aria-label"],onSetActive:(o,c)=>{var d;const u=p(c),f=u||p((d=l[u].subTabs)==null?void 0:d.tabs[0]);v.setFrag(f)},tabs:s,role:"tablist",activateOnFocus:t.activateOnFocus,activeIdx:m.activeIdx,subTabs:m.subTabs,ssr:t.ssr})},q=(t,a)=>{a?(t.hidden=!1,t.tabIndex=0):(t.hidden=!0,t.removeAttribute("tabindex"))},H=t=>{const a=typeof t=="string"?Array.from(document.querySelectorAll(t)):t instanceof HTMLElement?[t]:Array.isArray(t)?t.sort((i,e)=>i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1):Array.from(t);let n;return a.filter((i,e)=>n&&n.contains(i)?(console.warn("Content containers must not overlap. Ignoring ",i,"because it is a decendant of",n),!1):(n=a[e],!0))},P=(t,a)=>{let n=t.querySelector("h1, h2, h3");if(!n)if(a)n=document.createElement("h2"),n.dataset.vttocInserted="",n.hidden=!0,n.textContent="Untitled",t.prepend(n);else return[];const i=["H1","H2","H3","H4"],e=i.indexOf(n.nodeName)||1;return i.slice(e,e+2)},R=t=>{const a=[],n=[],i=[];return t.forEach((e,l)=>{const[s,m]=P(e,l===0);if(!s){const o=a[a.length-1],c=o.$merged||(o.$merged=[]),d=document.createElement("div");d.$container=e,d.append(...Array.from(e.childNodes)),o.append(d),c.push(d);return}let r=e.querySelector(s);for(;r;){const o=[];let c=r.nextSibling;for(;c&&c.nodeName!==s&&c.nodeName!==m;)o.push(c),c=c.nextSibling;const d=r.textContent,u=document.createElement("div");u.$container=e,u.className="TabPanel",u.hidden=!0,u.dataset.sprinkled="true",u.setAttribute("aria-label",d);const f=r.id;f&&(r.removeAttribute("id"),r.dataset.domid=f),u.id=f||A(d),i.push(u.id),u.append(...o);const g=!!u.textContent.trim();r.before(u),u.prepend(r),a.push(u),r.nodeName===s&&n.push({label:d,longLabel:r.getAttribute("aria-label")||void 0,items:[]}),(r.nodeName===m||g)&&n[n.length-1].items.push({label:d,href:"#"+u.id,"aria-controls":u.id}),r=c}}),n.forEach(e=>{const l=e.items||[];if(l.length<2){const s=l[0]||e;e.href=s.href,e["aria-controls"]=s["aria-controls"],delete e.items}}),{items:n,panelElms:a,ids:i}},U=t=>{const a=H(t),{items:n,panelElms:i,ids:e}=R(a);return{props:{items:n,onItemSelect:l=>{let s;i.forEach(m=>{const r=!!l&&m.id===l;r&&(s=m.$container),q(m,r)}),a.forEach(m=>{m.hidden=m!==s}),a.length===1&&(a[0].hidden=!1)}},panelElms:i,ids:e}},D=(t,a)=>{const{props:n,panelElms:i,ids:e}=U(t);n["aria-label"]=a||{is:"Efnisyfirlit",en:"Table of Contents",pl:"Spis tre\u015Bci"}[C()];const l=document.createElement("div");let s=decodeURIComponent(location.href.split("#")[1]||"");if(!s||!e.includes(s)){const o=n.items[0];o.items?s=o.items[0]["aria-controls"]||"":s=o["aria-controls"]||""}n.onItemSelect(s);const m={rootElm:l,panelElms:i,unmount:()=>{b.unmountComponentAtNode(l),l.remove(),i.flatMap(o=>{const{$merged:c}=o;return c?(delete o.$merged,[o,...c]):[o]}).forEach(o=>{const c=o.querySelector("[data-vttoc-inserted]");c?.remove();const d=o.querySelector("[data-domid]");d&&(d.id=d.dataset.domid,d.removeAttribute("data-domid")),x(o),o.$container.hidden=!1})}},r=O("Tabs").then(()=>(b.render(E(F,{...n,ssr:!1}),l),m));return w&&r.then(()=>{setTimeout(L,100)}),Object.assign(r,m,{whenReady:r}),r};export{D as default};

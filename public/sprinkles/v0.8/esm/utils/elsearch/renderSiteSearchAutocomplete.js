import"../../initHannaNamespace.js";import{h as ge,a as xe,F as Ke,p as ke,C as Ne}from"../../../_chunks/compat.module-edfc5ce4.js";import{m as Re,k as ze,i as Je}from"../../../_chunks/qj-f5658347.js";import{o as ee}from"../../../_chunks/jsxRuntime.module-53ce29b9.js";import{r as ue}from"../../../_chunks/useFormatMonitor-6ee15356.js";import{b as Ye,e as Qe,c as Xe}from"../../../_chunks/utils-ed8ff0d8.js";import{S as Ge}from"../../../_chunks/SiteSearchInput-55e1d438.js";import{i as Ze}from"../../../_chunks/env-971c3e3e.js";import{createElasticQuery as $e,postQuery as et}from"./reykjavik.is.js";import"../focus-visible.js";var be={exports:{}},tt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nt=tt,rt=nt;function De(){}function Ee(){}Ee.resetWarningCache=De;var ot=function(){function d(w,I,j,x,P,m){if(m!==rt){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}d.isRequired=d;function c(){return d}var i={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:c,element:d,elementType:d,instanceOf:c,node:d,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:Ee,resetWarningCache:De};return i.PropTypes=i,i};be.exports,be.exports=ot();var se=be.exports;const it=d=>{const{Tag:c="h1",align:i,small:w,children:I,wrapperProps:j}=d;return ee(c,{...j,className:Re("PageHeading",[w&&"small",i==="right"&&"align--"+i],(j||{}).className),children:I})};var Te={};function ut(d,c){if(d===c)return!0;if(!d||!c)return!1;var i=d.length;if(c.length!==i)return!1;for(var w=0;w<i;w++)if(d[w]!==c[w])return!1;return!0}var st=ut,Me={},He=function(){function d(c,i){var w=[],I=!0,j=!1,x=void 0;try{for(var P=c[Symbol.iterator](),m;!(I=(m=P.next()).done)&&(w.push(m.value),!(i&&w.length===i));I=!0);}catch(y){j=!0,x=y}finally{try{!I&&P.return&&P.return()}finally{if(j)throw x}}return w}return function(c,i){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return d(c,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),at=function(d){var c=d.data,i=d.multiSection;function w(m){for(m===null?m=0:m++;m<c.length&&c[m]===0;)m++;return m===c.length?null:m}function I(m){for(m===null?m=c.length-1:m--;m>=0&&c[m]===0;)m--;return m===-1?null:m}function j(m){var y=He(m,2),O=y[0],k=y[1];return i?k===null||k===c[O]-1?(O=w(O),O===null?[null,null]:[O,0]):[O,k+1]:c===0||k===c-1?[null,null]:k===null?[null,0]:[null,k+1]}function x(m){var y=He(m,2),O=y[0],k=y[1];return i?k===null||k===0?(O=I(O),O===null?[null,null]:[O,c[O]-1]):[O,k-1]:c===0||k===0?[null,null]:k===null?[null,c-1]:[null,k-1]}function P(m){return j(m)[1]===null}return{next:j,prev:x,isLast:P}},fe={exports:{}},lt=Object.prototype.propertyIsEnumerable;function ct(d){if(d==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(d)}function gt(d){var c=Object.getOwnPropertyNames(d);return Object.getOwnPropertySymbols&&(c=c.concat(Object.getOwnPropertySymbols(d))),c.filter(function(i){return lt.call(d,i)})}var ft=Object.assign||function(d,c){for(var i,w,I=ct(d),j=1;j<arguments.length;j++){i=arguments[j],w=gt(Object(i));for(var x=0;x<w.length;x++)I[w[x]]=i[w[x]]}return I};fe.exports,function(d,c){Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function m(y,O){var k=[],q=!0,F=!1,L=void 0;try{for(var E=y[Symbol.iterator](),A;!(q=(A=E.next()).done)&&(k.push(A.value),!(O&&k.length===O));q=!0);}catch(R){F=!0,L=R}finally{try{!q&&E.return&&E.return()}finally{if(F)throw L}}return k}return function(y,O){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return m(y,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function w(m){return m&&m.__esModule?m:{default:m}}function I(m){if(Array.isArray(m)){for(var y=0,O=Array(m.length);y<m.length;y++)O[y]=m[y];return O}else return Array.from(m)}var j=ft,x=w(j),P=function(m){return m};c.default=function(m){var y=Array.isArray(m)&&m.length===2?m:[m,null],O=i(y,2),k=O[0],q=O[1];return function(F){for(var L=arguments.length,E=Array(L>1?L-1:0),A=1;A<L;A++)E[A-1]=arguments[A];var R=E.map(function(U){return k[U]}).filter(P);return typeof R[0]=="string"||typeof q=="function"?{key:F,className:q?q.apply(void 0,I(R)):R.join(" ")}:{key:F,style:x.default.apply(void 0,[{}].concat(I(R)))}}},d.exports=c.default}(fe,fe.exports);var pt=fe.exports,qe={},pe={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=i;function c(w){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(I){return typeof I}:c=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},c(w)}function i(w,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(w===I)return!1;var x=Object.keys(w),P=Object.keys(I);if(x.length!==P.length)return!0;var m={},y,O;for(y=0,O=j.length;y<O;y++)m[j[y]]=!0;for(y=0,O=x.length;y<O;y++){var k=x[y],q=w[k],F=I[k];if(q!==F){if(!m[k]||q===null||F===null||c(q)!=="object"||c(F)!=="object")return!0;var L=Object.keys(q),E=Object.keys(F);if(L.length!==E.length)return!0;for(var A=0,R=L.length;A<R;A++){var U=L[A];if(q[U]!==F[U])return!0}}}return!1}})(pe),function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=x(ue),i=I(se),w=I(pe);function I(b){return b&&b.__esModule?b:{default:b}}function j(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return j=function(){return b},b}function x(b){if(b&&b.__esModule)return b;if(b===null||P(b)!=="object"&&typeof b!="function")return{default:b};var v=j();if(v&&v.has(b))return v.get(b);var S={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in b)if(Object.prototype.hasOwnProperty.call(b,g)){var r=D?Object.getOwnPropertyDescriptor(b,g):null;r&&(r.get||r.set)?Object.defineProperty(S,g,r):S[g]=b[g]}return S.default=b,v&&v.set(b,S),S}function P(b){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(v){return typeof v}:P=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},P(b)}function m(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function y(b,v){for(var S=0;S<v.length;S++){var D=v[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}function O(b,v,S){return v&&y(b.prototype,v),S&&y(b,S),b}function k(b){return function(){var v=E(b),S;if(L()){var D=E(this).constructor;S=Reflect.construct(v,arguments,D)}else S=v.apply(this,arguments);return q(this,S)}}function q(b,v){return v&&(P(v)==="object"||typeof v=="function")?v:F(b)}function F(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(b){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},E(b)}function A(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),v&&R(b,v)}function R(b,v){return R=Object.setPrototypeOf||function(S,D){return S.__proto__=D,S},R(b,v)}function U(b,v,S){return v in b?Object.defineProperty(b,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):b[v]=S,b}var z=function(b){A(S,b);var v=k(S);function S(){return m(this,S),v.apply(this,arguments)}return O(S,[{key:"shouldComponentUpdate",value:function(D){return(0,w.default)(D,this.props)}},{key:"render",value:function(){var D=this.props,g=D.section,r=D.renderSectionTitle,u=D.theme,f=D.sectionKeyPrefix,p=r(g);return p?c.default.createElement("div",u("".concat(f,"title"),"sectionTitle"),p):null}}]),S}(c.Component);d.default=z,U(z,"propTypes",{section:i.default.any.isRequired,renderSectionTitle:i.default.func.isRequired,theme:i.default.func.isRequired,sectionKeyPrefix:i.default.string.isRequired})}(qe);var Fe={},Le={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=x(ue),i=I(se),w=I(pe);function I(r){return r&&r.__esModule?r:{default:r}}function j(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return j=function(){return r},r}function x(r){if(r&&r.__esModule)return r;if(r===null||P(r)!=="object"&&typeof r!="function")return{default:r};var u=j();if(u&&u.has(r))return u.get(r);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in r)if(Object.prototype.hasOwnProperty.call(r,C)){var H=p?Object.getOwnPropertyDescriptor(r,C):null;H&&(H.get||H.set)?Object.defineProperty(f,C,H):f[C]=r[C]}return f.default=r,u&&u.set(r,f),f}function P(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(u){return typeof u}:P=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},P(r)}function m(){return m=Object.assign||function(r){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(r[p]=f[p])}return r},m.apply(this,arguments)}function y(r,u){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(r);u&&(p=p.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),f.push.apply(f,p)}return f}function O(r){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?y(Object(f),!0).forEach(function(p){D(r,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):y(Object(f)).forEach(function(p){Object.defineProperty(r,p,Object.getOwnPropertyDescriptor(f,p))})}return r}function k(r,u){if(r==null)return{};var f=q(r,u),p,C;if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(r);for(C=0;C<H.length;C++)p=H[C],!(u.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(r,p)&&(f[p]=r[p])}return f}function q(r,u){if(r==null)return{};var f={},p=Object.keys(r),C,H;for(H=0;H<p.length;H++)C=p[H],!(u.indexOf(C)>=0)&&(f[C]=r[C]);return f}function F(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")}function L(r,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(r,p.key,p)}}function E(r,u,f){return u&&L(r.prototype,u),f&&L(r,f),r}function A(r){return function(){var u=b(r),f;if(z()){var p=b(this).constructor;f=Reflect.construct(u,arguments,p)}else f=u.apply(this,arguments);return R(this,f)}}function R(r,u){return u&&(P(u)==="object"||typeof u=="function")?u:U(r)}function U(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(r){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},b(r)}function v(r,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(u&&u.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),u&&S(r,u)}function S(r,u){return S=Object.setPrototypeOf||function(f,p){return f.__proto__=p,f},S(r,u)}function D(r,u,f){return u in r?Object.defineProperty(r,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[u]=f,r}var g=function(r){v(f,r);var u=A(f);function f(){var p;F(this,f);for(var C=arguments.length,H=new Array(C),Y=0;Y<C;Y++)H[Y]=arguments[Y];return p=u.call.apply(u,[this].concat(H)),D(U(p),"storeItemReference",function(W){W!==null&&(p.item=W)}),D(U(p),"onMouseEnter",function(W){var T=p.props,l=T.sectionIndex,t=T.itemIndex;p.props.onMouseEnter(W,{sectionIndex:l,itemIndex:t})}),D(U(p),"onMouseLeave",function(W){var T=p.props,l=T.sectionIndex,t=T.itemIndex;p.props.onMouseLeave(W,{sectionIndex:l,itemIndex:t})}),D(U(p),"onMouseDown",function(W){var T=p.props,l=T.sectionIndex,t=T.itemIndex;p.props.onMouseDown(W,{sectionIndex:l,itemIndex:t})}),D(U(p),"onClick",function(W){var T=p.props,l=T.sectionIndex,t=T.itemIndex;p.props.onClick(W,{sectionIndex:l,itemIndex:t})}),p}return E(f,[{key:"shouldComponentUpdate",value:function(p){return(0,w.default)(p,this.props,["renderItemData"])}},{key:"render",value:function(){var p=this.props,C=p.isHighlighted,H=p.item,Y=p.renderItem,W=p.renderItemData,T=k(p,["isHighlighted","item","renderItem","renderItemData"]);return delete T.sectionIndex,delete T.itemIndex,typeof T.onMouseEnter=="function"&&(T.onMouseEnter=this.onMouseEnter),typeof T.onMouseLeave=="function"&&(T.onMouseLeave=this.onMouseLeave),typeof T.onMouseDown=="function"&&(T.onMouseDown=this.onMouseDown),typeof T.onClick=="function"&&(T.onClick=this.onClick),c.default.createElement("li",m({role:"option"},T,{ref:this.storeItemReference}),Y(H,O({isHighlighted:C},W)))}}]),f}(c.Component);d.default=g,D(g,"propTypes",{sectionIndex:i.default.number,isHighlighted:i.default.bool.isRequired,itemIndex:i.default.number.isRequired,item:i.default.any.isRequired,renderItem:i.default.func.isRequired,renderItemData:i.default.object.isRequired,onMouseEnter:i.default.func,onMouseLeave:i.default.func,onMouseDown:i.default.func,onClick:i.default.func})})(Le),function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=P(ue),i=j(se),w=j(Le),I=j(pe);function j(g){return g&&g.__esModule?g:{default:g}}function x(){if(typeof WeakMap!="function")return null;var g=new WeakMap;return x=function(){return g},g}function P(g){if(g&&g.__esModule)return g;if(g===null||m(g)!=="object"&&typeof g!="function")return{default:g};var r=x();if(r&&r.has(g))return r.get(g);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in g)if(Object.prototype.hasOwnProperty.call(g,p)){var C=f?Object.getOwnPropertyDescriptor(g,p):null;C&&(C.get||C.set)?Object.defineProperty(u,p,C):u[p]=g[p]}return u.default=g,r&&r.set(g,u),u}function m(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(r){return typeof r}:m=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},m(g)}function y(){return y=Object.assign||function(g){for(var r=1;r<arguments.length;r++){var u=arguments[r];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(g[f]=u[f])}return g},y.apply(this,arguments)}function O(g,r){var u=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);r&&(f=f.filter(function(p){return Object.getOwnPropertyDescriptor(g,p).enumerable})),u.push.apply(u,f)}return u}function k(g){for(var r=1;r<arguments.length;r++){var u=arguments[r]!=null?arguments[r]:{};r%2?O(Object(u),!0).forEach(function(f){S(g,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(u)):O(Object(u)).forEach(function(f){Object.defineProperty(g,f,Object.getOwnPropertyDescriptor(u,f))})}return g}function q(g,r){if(!(g instanceof r))throw new TypeError("Cannot call a class as a function")}function F(g,r){for(var u=0;u<r.length;u++){var f=r[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(g,f.key,f)}}function L(g,r,u){return r&&F(g.prototype,r),u&&F(g,u),g}function E(g){return function(){var r=z(g),u;if(U()){var f=z(this).constructor;u=Reflect.construct(r,arguments,f)}else u=r.apply(this,arguments);return A(this,u)}}function A(g,r){return r&&(m(r)==="object"||typeof r=="function")?r:R(g)}function R(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function z(g){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},z(g)}function b(g,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(r&&r.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),r&&v(g,r)}function v(g,r){return v=Object.setPrototypeOf||function(u,f){return u.__proto__=f,u},v(g,r)}function S(g,r,u){return r in g?Object.defineProperty(g,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):g[r]=u,g}var D=function(g){b(u,g);var r=E(u);function u(){var f;q(this,u);for(var p=arguments.length,C=new Array(p),H=0;H<p;H++)C[H]=arguments[H];return f=r.call.apply(r,[this].concat(C)),S(R(f),"storeHighlightedItemReference",function(Y){f.props.onHighlightedItemChange(Y===null?null:Y.item)}),f}return L(u,[{key:"shouldComponentUpdate",value:function(f){return(0,I.default)(f,this.props,["itemProps"])}},{key:"render",value:function(){var f=this,p=this.props,C=p.items,H=p.itemProps,Y=p.renderItem,W=p.renderItemData,T=p.sectionIndex,l=p.highlightedItemIndex,t=p.getItemId,o=p.theme,n=p.keyPrefix,e=T===null?n:"".concat(n,"section-").concat(T,"-"),s=typeof H=="function";return c.default.createElement("ul",y({role:"listbox"},o("".concat(e,"items-list"),"itemsList")),C.map(function(a,h){var _=h===0,M=h===l,B="".concat(e,"item-").concat(h),V=s?H({sectionIndex:T,itemIndex:h}):H,K=k({id:t(T,h),"aria-selected":M},o(B,"item",_&&"itemFirst",M&&"itemHighlighted"),{},V);return M&&(K.ref=f.storeHighlightedItemReference),c.default.createElement(w.default,y({},K,{sectionIndex:T,isHighlighted:M,itemIndex:h,item:a,renderItem:Y,renderItemData:W}))}))}}]),u}(c.Component);d.default=D,S(D,"propTypes",{items:i.default.array.isRequired,itemProps:i.default.oneOfType([i.default.object,i.default.func]),renderItem:i.default.func.isRequired,renderItemData:i.default.object.isRequired,sectionIndex:i.default.number,highlightedItemIndex:i.default.number,onHighlightedItemChange:i.default.func.isRequired,getItemId:i.default.func.isRequired,theme:i.default.func.isRequired,keyPrefix:i.default.string.isRequired}),S(D,"defaultProps",{sectionIndex:null})}(Fe),function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=y(ue),i=P(se),w=P(at),I=P(pt),j=P(qe),x=P(Fe);function P(t){return t&&t.__esModule?t:{default:t}}function m(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return m=function(){return t},t}function y(t){if(t&&t.__esModule)return t;if(t===null||U(t)!=="object"&&typeof t!="function")return{default:t};var o=m();if(o&&o.has(t))return o.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=e?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,o&&o.set(t,n),n}function O(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,e)}return n}function k(t){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?O(Object(n),!0).forEach(function(e){C(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function q(t,o){return R(t)||A(t,o)||L(t,o)||F()}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(t,o){if(t){if(typeof t=="string")return E(t,o);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,o)}}function E(t,o){(o==null||o>t.length)&&(o=t.length);for(var n=0,e=new Array(o);n<o;n++)e[n]=t[n];return e}function A(t,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],e=!0,s=!1,a=void 0;try{for(var h=t[Symbol.iterator](),_;!(e=(_=h.next()).done)&&(n.push(_.value),!(o&&n.length===o));e=!0);}catch(M){s=!0,a=M}finally{try{!e&&h.return!=null&&h.return()}finally{if(s)throw a}}return n}}function R(t){if(Array.isArray(t))return t}function U(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U=function(o){return typeof o}:U=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U(t)}function z(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function b(t,o){for(var n=0;n<o.length;n++){var e=o[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function v(t,o,n){return o&&b(t.prototype,o),n&&b(t,n),t}function S(t){return function(){var o=u(t),n;if(r()){var e=u(this).constructor;n=Reflect.construct(o,arguments,e)}else n=o.apply(this,arguments);return D(this,n)}}function D(t,o){return o&&(U(o)==="object"||typeof o=="function")?o:g(t)}function g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},u(t)}function f(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&p(t,o)}function p(t,o){return p=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},p(t,o)}function C(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}var H={},Y=function(t){return c.default.createElement("input",t)},W=function(t){var o=t.containerProps,n=t.children;return c.default.createElement("div",o,n)},T={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},l=function(t){f(n,t);var o=S(n);function n(e){var s;return z(this,n),s=o.call(this,e),C(g(s),"storeInputReference",function(a){a!==null&&(s.input=a);var h=s.props.inputProps.ref;h&&(typeof h=="function"?h(a):U(h)==="object"&&Object.prototype.hasOwnProperty.call(h,"current")&&(h.current=a))}),C(g(s),"storeItemsContainerReference",function(a){a!==null&&(s.itemsContainer=a)}),C(g(s),"onHighlightedItemChange",function(a){s.highlightedItem=a}),C(g(s),"getItemId",function(a,h){if(h===null)return null;var _=s.props.id,M=a===null?"":"section-".concat(a);return"react-autowhatever-".concat(_,"-").concat(M,"-item-").concat(h)}),C(g(s),"onFocus",function(a){var h=s.props.inputProps;s.setState({isInputFocused:!0}),h.onFocus&&h.onFocus(a)}),C(g(s),"onBlur",function(a){var h=s.props.inputProps;s.setState({isInputFocused:!1}),h.onBlur&&h.onBlur(a)}),C(g(s),"onKeyDown",function(a){var h=s.props,_=h.inputProps,M=h.highlightedSectionIndex,B=h.highlightedItemIndex,V=a.keyCode;switch(V){case 40:case 38:{var K=V===40?"next":"prev",X=s.sectionIterator[K]([M,B]),Q=q(X,2),G=Q[0],J=Q[1];_.onKeyDown(a,{newHighlightedSectionIndex:G,newHighlightedItemIndex:J});break}default:_.onKeyDown(a,{highlightedSectionIndex:M,highlightedItemIndex:B})}}),s.highlightedItem=null,s.state={isInputFocused:!1},s.setSectionsItems(e),s.setSectionIterator(e),s.setTheme(e),s}return v(n,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setSectionsItems(e),(e.items!==this.props.items||e.multiSection!==this.props.multiSection)&&this.setSectionIterator(e),e.theme!==this.props.theme&&this.setTheme(e)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(e){e.multiSection&&(this.sectionsItems=e.items.map(function(s){return e.getSectionItems(s)}),this.sectionsLengths=this.sectionsItems.map(function(s){return s.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(s){return s===0}))}},{key:"setSectionIterator",value:function(e){this.sectionIterator=(0,w.default)({multiSection:e.multiSection,data:e.multiSection?this.sectionsLengths:e.items.length})}},{key:"setTheme",value:function(e){this.theme=(0,I.default)(e.theme)}},{key:"renderSections",value:function(){var e=this;if(this.allSectionsAreEmpty)return null;var s=this.theme,a=this.props,h=a.id,_=a.items,M=a.renderItem,B=a.renderItemData,V=a.renderSectionTitle,K=a.highlightedSectionIndex,X=a.highlightedItemIndex,Q=a.itemProps;return _.map(function(G,J){var te="react-autowhatever-".concat(h,"-"),ne="".concat(te,"section-").concat(J,"-"),Z=J===0;return c.default.createElement("div",s("".concat(ne,"container"),"sectionContainer",Z&&"sectionContainerFirst"),c.default.createElement(j.default,{section:G,renderSectionTitle:V,theme:s,sectionKeyPrefix:ne}),c.default.createElement(x.default,{items:e.sectionsItems[J],itemProps:Q,renderItem:M,renderItemData:B,sectionIndex:J,highlightedItemIndex:K===J?X:null,onHighlightedItemChange:e.onHighlightedItemChange,getItemId:e.getItemId,theme:s,keyPrefix:te,ref:e.storeItemsListReference}))})}},{key:"renderItems",value:function(){var e=this.props.items;if(e.length===0)return null;var s=this.theme,a=this.props,h=a.id,_=a.renderItem,M=a.renderItemData,B=a.highlightedSectionIndex,V=a.highlightedItemIndex,K=a.itemProps;return c.default.createElement(x.default,{items:e,itemProps:K,renderItem:_,renderItemData:M,highlightedItemIndex:B===null?V:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:s,keyPrefix:"react-autowhatever-".concat(h,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var e=this.highlightedItem;if(e){var s=this.itemsContainer,a=e.offsetParent===s?e.offsetTop:e.offsetTop-s.offsetTop,h=s.scrollTop;a<h?h=a:a+e.offsetHeight>h+s.offsetHeight&&(h=a+e.offsetHeight-s.offsetHeight),h!==s.scrollTop&&(s.scrollTop=h)}}},{key:"render",value:function(){var e=this.theme,s=this.props,a=s.id,h=s.multiSection,_=s.renderInputComponent,M=s.renderItemsContainer,B=s.highlightedSectionIndex,V=s.highlightedItemIndex,K=this.state.isInputFocused,X=h?this.renderSections():this.renderItems(),Q=X!==null,G=this.getItemId(B,V),J="react-autowhatever-".concat(a),te=k({role:"combobox","aria-haspopup":"listbox","aria-owns":J,"aria-expanded":Q},e("react-autowhatever-".concat(a,"-container"),"container",Q&&"containerOpen"),{},this.props.containerProps),ne=_(k({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":J,"aria-activedescendant":G},e("react-autowhatever-".concat(a,"-input"),"input",Q&&"inputOpen",K&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),Z=M({containerProps:k({id:J,role:"listbox"},e("react-autowhatever-".concat(a,"-items-container"),"itemsContainer",Q&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:X});return c.default.createElement("div",te,ne,Z)}}]),n}(c.Component);d.default=l,C(l,"propTypes",{id:i.default.string,multiSection:i.default.bool,renderInputComponent:i.default.func,renderItemsContainer:i.default.func,items:i.default.array.isRequired,renderItem:i.default.func,renderItemData:i.default.object,renderSectionTitle:i.default.func,getSectionItems:i.default.func,containerProps:i.default.object,inputProps:i.default.object,itemProps:i.default.oneOfType([i.default.object,i.default.func]),highlightedSectionIndex:i.default.number,highlightedItemIndex:i.default.number,theme:i.default.oneOfType([i.default.object,i.default.array])}),C(l,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:Y,renderItemsContainer:W,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:H,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:H,inputProps:H,itemProps:H,highlightedSectionIndex:null,highlightedItemIndex:null,theme:T})}(Me);var oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.mapToAutowhateverTheme=oe.defaultTheme=void 0;var dt={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};oe.defaultTheme=dt;var ht=function(d){var c={};for(var i in d)switch(i){case"suggestionsContainer":c.itemsContainer=d[i];break;case"suggestionsContainerOpen":c.itemsContainerOpen=d[i];break;case"suggestion":c.item=d[i];break;case"suggestionFirst":c.itemFirst=d[i];break;case"suggestionHighlighted":c.itemHighlighted=d[i];break;case"suggestionsList":c.itemsList=d[i];break;default:c[i]=d[i]}return c};oe.mapToAutowhateverTheme=ht,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var c=m(ue),i=x(se),w=x(st),I=x(Me),j=oe;function x(l){return l&&l.__esModule?l:{default:l}}function P(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return P=function(){return l},l}function m(l){if(l&&l.__esModule)return l;if(l===null||y(l)!=="object"&&typeof l!="function")return{default:l};var t=P();if(t&&t.has(l))return t.get(l);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in l)if(Object.prototype.hasOwnProperty.call(l,e)){var s=n?Object.getOwnPropertyDescriptor(l,e):null;s&&(s.get||s.set)?Object.defineProperty(o,e,s):o[e]=l[e]}return o.default=l,t&&t.set(l,o),o}function y(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(t){return typeof t}:y=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(l)}function O(l,t){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);t&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})),o.push.apply(o,n)}return o}function k(l){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?O(Object(o),!0).forEach(function(n){S(l,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(o,n))})}return l}function q(l,t){if(!(l instanceof t))throw new TypeError("Cannot call a class as a function")}function F(l,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(l,n.key,n)}}function L(l,t,o){return t&&F(l.prototype,t),o&&F(l,o),l}function E(l){return function(){var t=z(l),o;if(U()){var n=z(this).constructor;o=Reflect.construct(t,arguments,n)}else o=t.apply(this,arguments);return A(this,o)}}function A(l,t){return t&&(y(t)==="object"||typeof t=="function")?t:R(l)}function R(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function z(l){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},z(l)}function b(l,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(t&&t.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),t&&v(l,t)}function v(l,t){return v=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},v(l,t)}function S(l,t,o){return t in l?Object.defineProperty(l,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[t]=o,l}var D=function(){return!0},g=function(l){return l.trim().length>0},r=function(l){var t=l.containerProps,o=l.children;return c.default.createElement("div",t,o)},u="suggestions-revealed",f="suggestions-updated",p="suggestion-selected",C="input-focused",H="input-changed",Y="input-blurred",W="escape-pressed",T=function(l){b(o,l);var t=E(o);function o(n){var e,s=n.alwaysRenderSuggestions;return q(this,o),e=t.call(this),S(R(e),"onDocumentMouseDown",function(a){e.justClickedOnSuggestionsContainer=!1;for(var h=a.detail&&a.detail.target||a.target;h!==null&&h!==document;){if(h.getAttribute&&h.getAttribute("data-suggestion-index")!==null)return;if(h===e.suggestionsContainer){e.justClickedOnSuggestionsContainer=!0;return}h=h.parentNode}}),S(R(e),"storeAutowhateverRef",function(a){a!==null&&(e.autowhatever=a)}),S(R(e),"onSuggestionMouseEnter",function(a,h){var _=h.sectionIndex,M=h.itemIndex;e.updateHighlightedSuggestion(_,M),a.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!0),e.justMouseEntered=!0,setTimeout(function(){e.justMouseEntered=!1})}),S(R(e),"highlightFirstSuggestion",function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)}),S(R(e),"onDocumentMouseUp",function(){e.pressedSuggestion&&!e.justSelectedSuggestion&&e.input.focus(),e.pressedSuggestion=null}),S(R(e),"onSuggestionMouseDown",function(a){e.justSelectedSuggestion||(e.justSelectedSuggestion=!0,e.pressedSuggestion=a.target)}),S(R(e),"onSuggestionsClearRequested",function(){var a=e.props.onSuggestionsClearRequested;a&&a()}),S(R(e),"onSuggestionSelected",function(a,h){var _=e.props,M=_.alwaysRenderSuggestions,B=_.onSuggestionSelected,V=_.onSuggestionsFetchRequested;B&&B(a,h);var K=e.props.shouldKeepSuggestionsOnSelect(h.suggestion);M||K?V({value:h.suggestionValue,reason:p}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()}),S(R(e),"onSuggestionClick",function(a){var h=e.props,_=h.alwaysRenderSuggestions,M=h.focusInputOnSuggestionClick,B=e.getSuggestionIndices(e.findSuggestionElement(a.target)),V=B.sectionIndex,K=B.suggestionIndex,X=e.getSuggestion(V,K),Q=e.props.getSuggestionValue(X);e.maybeCallOnChange(a,Q,"click"),e.onSuggestionSelected(a,{suggestion:X,suggestionValue:Q,suggestionIndex:K,sectionIndex:V,method:"click"});var G=e.props.shouldKeepSuggestionsOnSelect(X);_||G||e.closeSuggestions(),M===!0?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})}),S(R(e),"onBlur",function(){var a=e.props,h=a.inputProps,_=a.shouldRenderSuggestions,M=h.value,B=h.onBlur,V=e.getHighlightedSuggestion(),K=_(M,Y);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!K}),B&&B(e.blurEvent,{highlightedSuggestion:V})}),S(R(e),"onSuggestionMouseLeave",function(a){e.resetHighlightedSuggestion(!1),e.justSelectedSuggestion&&a.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!1)}),S(R(e),"onSuggestionTouchStart",function(){e.justSelectedSuggestion=!0}),S(R(e),"onSuggestionTouchMove",function(){e.justSelectedSuggestion=!1,e.pressedSuggestion=null,e.input.focus()}),S(R(e),"itemProps",function(a){var h=a.sectionIndex,_=a.itemIndex;return{"data-section-index":h,"data-suggestion-index":_,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.onSuggestionMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionTouchStart,onTouchMove:e.onSuggestionTouchMove,onClick:e.onSuggestionClick}}),S(R(e),"renderSuggestionsContainer",function(a){var h=a.containerProps,_=a.children,M=e.props.renderSuggestionsContainer;return M({containerProps:h,children:_,query:e.getQuery()})}),e.state={isFocused:!1,isCollapsed:!s,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},e.justPressedUpDown=!1,e.justMouseEntered=!1,e.pressedSuggestion=null,e}return L(o,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var e=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!n.highlightFirstSuggestion;(0,w.default)(n.suggestions,this.props.suggestions)?n.highlightFirstSuggestion&&n.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():e&&this.resetHighlightedSuggestion():this.willRenderSuggestions(n,f)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),e&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(n,e){var s=this.props,a=s.suggestions,h=s.onSuggestionHighlighted,_=s.highlightFirstSuggestion;if(!(0,w.default)(a,n.suggestions)&&a.length>0&&_){this.highlightFirstSuggestion();return}if(h){var M=this.getHighlightedSuggestion(),B=e.highlightedSuggestion;M!=B&&h({suggestion:M})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(n,e,s){var a=this;this.setState(function(h){var _=h.valueBeforeUpDown;return e===null?_=null:_===null&&typeof s<"u"&&(_=s),{highlightedSectionIndex:n,highlightedSuggestionIndex:e,highlightedSuggestion:e===null?null:a.getSuggestion(n,e),valueBeforeUpDown:_}})}},{key:"resetHighlightedSuggestion",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(e){var s=e.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:n?null:s}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(n,e){var s=this.props,a=s.suggestions,h=s.multiSection,_=s.getSectionSuggestions;return h?_(a[n])[e]:a[e]}},{key:"getHighlightedSuggestion",value:function(){var n=this.state,e=n.highlightedSectionIndex,s=n.highlightedSuggestionIndex;return s===null?null:this.getSuggestion(e,s)}},{key:"getSuggestionValueByIndex",value:function(n,e){var s=this.props.getSuggestionValue;return s(this.getSuggestion(n,e))}},{key:"getSuggestionIndices",value:function(n){var e=n.getAttribute("data-section-index"),s=n.getAttribute("data-suggestion-index");return{sectionIndex:typeof e=="string"?parseInt(e,10):null,suggestionIndex:parseInt(s,10)}}},{key:"findSuggestionElement",value:function(n){var e=n;do{if(e.getAttribute&&e.getAttribute("data-suggestion-index")!==null)return e;e=e.parentNode}while(e!==null);throw console.error("Clicked element:",n),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(n,e,s){var a=this.props.inputProps,h=a.value,_=a.onChange;e!==h&&_(n,{newValue:e,method:s})}},{key:"willRenderSuggestions",value:function(n,e){var s=n.suggestions,a=n.inputProps,h=n.shouldRenderSuggestions,_=a.value;return s.length>0&&h(_,e)}},{key:"getQuery",value:function(){var n=this.props.inputProps,e=n.value,s=this.state.valueBeforeUpDown;return(s===null?e:s).trim()}},{key:"render",value:function(){var n=this,e=this.props,s=e.suggestions,a=e.renderInputComponent,h=e.onSuggestionsFetchRequested,_=e.renderSuggestion,M=e.inputProps,B=e.multiSection,V=e.renderSectionTitle,K=e.id,X=e.getSectionSuggestions,Q=e.theme,G=e.getSuggestionValue,J=e.alwaysRenderSuggestions,te=e.highlightFirstSuggestion,ne=e.containerProps,Z=this.state,Ae=Z.isFocused,Se=Z.isCollapsed,Oe=Z.highlightedSectionIndex,we=Z.highlightedSuggestionIndex,ae=Z.valueBeforeUpDown,le=J?D:this.props.shouldRenderSuggestions,re=M.value,Ie=M.onFocus,je=M.onKeyDown,Ue=this.willRenderSuggestions(this.props,"render"),ce=J||Ae&&!Se&&Ue,Be=ce?s:[],We=k({},M,{onFocus:function(N){if(!n.justSelectedSuggestion&&!n.justClickedOnSuggestionsContainer){var $=le(re,C);n.setState({isFocused:!0,isCollapsed:!$}),Ie&&Ie(N),$&&h({value:re,reason:C})}},onBlur:function(N){if(n.justClickedOnSuggestionsContainer){n.input.focus();return}n.blurEvent=N,n.justSelectedSuggestion||(n.onBlur(),n.onSuggestionsClearRequested())},onChange:function(N){var $=N.target.value,ie=le($,H);n.maybeCallOnChange(N,$,"type"),n.suggestionsContainer&&(n.suggestionsContainer.scrollTop=0),n.setState(k({},te?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!ie})),ie?h({value:$,reason:H}):n.onSuggestionsClearRequested()},onKeyDown:function(N,$){var ie=N.keyCode;switch(ie){case 40:case 38:if(Se)le(re,u)&&(h({value:re,reason:u}),n.revealSuggestions(),N.preventDefault());else if(s.length>0){var Pe=$.newHighlightedSectionIndex,de=$.newHighlightedItemIndex,he;de===null?he=ae===null?re:ae:he=n.getSuggestionValueByIndex(Pe,de),n.updateHighlightedSuggestion(Pe,de,re),n.maybeCallOnChange(N,he,ie===40?"down":"up"),N.preventDefault()}n.justPressedUpDown=!0,setTimeout(function(){n.justPressedUpDown=!1});break;case 13:{if(N.keyCode===229)break;var me=n.getHighlightedSuggestion();if(ce&&!J&&n.closeSuggestions(),me!=null){N.preventDefault();var Ce=G(me);n.maybeCallOnChange(N,Ce,"enter"),n.onSuggestionSelected(N,{suggestion:me,suggestionValue:Ce,suggestionIndex:we,sectionIndex:Oe,method:"enter"}),n.justSelectedSuggestion=!0,setTimeout(function(){n.justSelectedSuggestion=!1})}break}case 27:{ce&&N.preventDefault();var _e=ce&&!J;if(ae===null){if(!_e){var ye="";n.maybeCallOnChange(N,ye,"escape"),le(ye,W)?h({value:ye,reason:W}):n.onSuggestionsClearRequested()}}else n.maybeCallOnChange(N,ae,"escape");_e?(n.onSuggestionsClearRequested(),n.closeSuggestions()):n.resetHighlightedSuggestion();break}}je&&je(N)}}),Ve={query:this.getQuery()};return c.default.createElement(I.default,{multiSection:B,items:Be,renderInputComponent:a,renderItemsContainer:this.renderSuggestionsContainer,renderItem:_,renderItemData:Ve,renderSectionTitle:V,getSectionItems:X,highlightedSectionIndex:Oe,highlightedItemIndex:we,containerProps:ne,inputProps:We,itemProps:this.itemProps,theme:(0,j.mapToAutowhateverTheme)(Q),id:K,ref:this.storeAutowhateverRef})}}]),o}(c.Component);d.default=T,S(T,"propTypes",{suggestions:i.default.array.isRequired,onSuggestionsFetchRequested:function(l,t){var o=l[t];if(typeof o!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(l,t){var o=l[t];if(l.alwaysRenderSuggestions===!1&&typeof o!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:i.default.func,onSuggestionSelected:i.default.func,onSuggestionHighlighted:i.default.func,renderInputComponent:i.default.func,renderSuggestionsContainer:i.default.func,getSuggestionValue:i.default.func.isRequired,renderSuggestion:i.default.func.isRequired,inputProps:function(l,t){var o=l[t];if(!o)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(o,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(o,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:i.default.func,alwaysRenderSuggestions:i.default.bool,multiSection:i.default.bool,renderSectionTitle:function(l,t){var o=l[t];if(l.multiSection===!0&&typeof o!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(l,t){var o=l[t];if(l.multiSection===!0&&typeof o!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:i.default.bool,highlightFirstSuggestion:i.default.bool,theme:i.default.object,id:i.default.string,containerProps:i.default.object}),S(T,"defaultProps",{renderSuggestionsContainer:r,shouldRenderSuggestions:g,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:j.defaultTheme,id:"1",containerProps:{}})}(Te);var mt=Te.default;const yt=ze(mt),bt={is:{label:"Leit \xE1 vefnum",inputLabel:"Leitaror\xF0",buttonText:"Leita",placeholder:"Sl\xE1\xF0u inn leitaror\xF0",suggestionsLabel:"Till\xF6gur"},en:{label:"Site search",inputLabel:"Search terms",buttonText:"Search",placeholder:"Enter search terms",suggestionsLabel:"Suggestions"},pl:{label:"Wyszukiwanie na stronie",inputLabel:"Wyszukiwane s\u0142owa",buttonText:"Szukaj",placeholder:"Wpisz wyszukiwane s\u0142owa",suggestionsLabel:"Sugestie"}},vt=d=>{const{suggestions:c,setSuggestions:i,renderSuggestion:w,getSuggestionValue:I,onSuggestionsFetchRequested:j,onSuggestionSelected:x,onSuggestionHighlighted:P,onSubmit:m,onButtonClick:y,bem:O="SiteSearchAutocomplete",wrapperProps:k}=d,[q,F]=ge(""),L=xe(null),E=Ye(d,bt);return ee(yt,{theme:{container:O,containerOpen:O+"--open",suggestionsContainer:O+"__container",suggestionsContainerOpen:O+"__container--open",suggestionsList:O+"__list",suggestion:O+"__item",suggestionHighlighted:O+"__item--highlighted"},focusInputOnSuggestionClick:!0,suggestions:c,onSuggestionsClearRequested:()=>i([]),onSuggestionsFetchRequested:j,getSuggestionValue:I,onSuggestionSelected:x,onSuggestionHighlighted:P,renderSuggestion:w||(A=>String(A)),containerProps:{...k,"aria-label":E.label},renderSuggestionsContainer:({containerProps:A,children:R})=>ee("div",{...A,"aria-label":c.length?E.suggestionsLabel:void 0,children:R}),inputProps:{ref:L,value:q,onChange:(A,{newValue:R})=>{F(R)}},renderInputComponent:A=>{const{className:R,type:U,disabled:z,readOnly:b,required:v,children:S,ref:D,...g}=A;return ee(Ge,{...g,inputRef:D,label:d.label||E.inputLabel,placeholder:E.placeholder,buttonText:E.buttonText,onSubmit:m&&(()=>m(q)),onButtonClick:y&&(()=>y(q))})}})},St=(d,c=0,i)=>{const w=xe(),[[I,j],x]=ge(()=>{const m=typeof d=="function"?d():d;return[m,m]}),P=Ke(()=>{const m=(y,O)=>{w.current&&clearTimeout(w.current);const k=O!==void 0?O:c;x(q=>{const[F,L]=q,E=typeof y=="function"?y(F,L):y;return!k||E===F?E===F&&E===L?q:[E,E]:(w.current=setTimeout(()=>x([E,E]),k),[F,E])})};return m.cancel=()=>{m(y=>y,null)},m},[]);return ke(()=>(i!==void 0&&P(i),()=>{w.current&&clearTimeout(w.current)}),[]),[I,P,j,I!==j||void 0]},Ot=d=>{const[c,i]=St(!1);ke(()=>{const j=x=>{x.key==="Escape"&&i(!1)};return document.addEventListener("keyup",j),()=>document.removeEventListener("keyup",j)},[]);const w=()=>{i(!0)},I=j=>{(!j.relatedTarget||!j.currentTarget.contains(j.relatedTarget))&&i(!1,100)};return ee("div",{className:Re("SiteSearchCurtain",[c&&"focused"]),onFocus:w,onBlur:I,...Ze&&{onfocusin:w,onfocusout:I},children:d.children})},ve=(...d)=>console.error("renderSiteSearchAutocomplete: ",...d),wt=d=>{const{title:c,lang:i,apiUri:w,searchPagePath:I,exceptBundles:j}=d,[x,P]=ge([]),[m]=ge(()=>Je.d(200));return ee(Ot,{children:[c&&ee(it,{children:c}),ee(vt,{lang:i,suggestions:x,renderSuggestion:({label:y})=>y,setSuggestions:P,onSuggestionSelected:(y,{suggestion:O})=>{window.location.href=O.href},getSuggestionValue:({label:y})=>y,onSubmit:y=>{window.location.href=I+"?q="+encodeURIComponent(y)},onSuggestionsFetchRequested:({value:y})=>{m.cancel(),y.length>=2&&m(()=>{const O=$e({value:y,preference:"searchbox",size:5,_source:["label","url_alias"],exceptBundles:j});et(w,[O]).then(k=>{const[q]=k;if(!q)throw new Error;P(q.items.map(({label:F,url_alias:L})=>({label:F,href:L})))})})}})]})},It=d=>{var c;const{insertAt:i,apiUri:w,searchPagePath:I,exceptBundles:j}=d;if(!w||!I){!w&&ve("`apiUri` missing"),!I&&ve("`searchPagePath` missing");return}const x=document.querySelector(i),P=x?.closest(".RowBlockColumn");if(!P){ve(x?"RowBlockColumn parent not found":'Insertion point "'+i+'" not found');return}const m=((c=P.querySelector(".PageHeading"))==null?void 0:c.textContent)||void 0;Qe("SiteSearchCurtain").then(()=>{const y=document.createElement("div");Ne.render(ee(wt,{lang:Xe(P),title:m,apiUri:w,searchPagePath:I,exceptBundles:j}),y,()=>{P.textContent="",P.append(y)})})};export{It as default};

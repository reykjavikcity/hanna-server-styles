import"../../initHannaNamespace.js";import{h as ye,d as We,p as Ke,C as Ne}from"../../../_chunks/compat.module-8a0f8b99.js";import{m as xe,g as Ve,h as Qe,i as Ge}from"../../../_chunks/qj-a13fcd70.js";import{o as ee}from"../../../_chunks/jsxRuntime.module-ece33ea3.js";import{r as ue,h as Je}from"../../../_chunks/useFormatMonitor-a717dd05.js";import{a as Ye,j as Xe}from"../../../_chunks/utils-9450e812.js";import{S as ze}from"../../../_chunks/SiteSearchInput-21f05001.js";import{i as Ze}from"../../../_chunks/env-7ef80a23.js";import{createElasticQuery as $e,postQuery as et}from"./reykjavik.is.js";import"../../../_chunks/focus-visible-afa5ee60.js";var be={exports:{}},tt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nt=tt,rt=nt;function Re(){}function ke(){}ke.resetWarningCache=Re;var ot=function(){function h(w,I,j,R,C,m){if(m!==rt){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}h.isRequired=h;function l(){return h}var u={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:l,element:h,elementType:h,instanceOf:l,node:h,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:ke,resetWarningCache:Re};return u.PropTypes=u,u};be.exports,be.exports=ot();var se=be.exports;const it=h=>{const{Tag:l="h1",align:u,small:w,children:I,wrapperProps:j}=h;return ee(l,{...j,className:xe("PageHeading",[w&&"small",u==="right"&&"align--"+u],(j||{}).className),children:I})};var De={};function ut(h,l){if(h===l)return!0;if(!h||!l)return!1;var u=h.length;if(l.length!==u)return!1;for(var w=0;w<u;w++)if(h[w]!==l[w])return!1;return!0}var st=ut,Ee={},Te=function(){function h(l,u){var w=[],I=!0,j=!1,R=void 0;try{for(var C=l[Symbol.iterator](),m;!(I=(m=C.next()).done)&&(w.push(m.value),!(u&&w.length===u));I=!0);}catch(b){j=!0,R=b}finally{try{!I&&C.return&&C.return()}finally{if(j)throw R}}return w}return function(l,u){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return h(l,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),at=function(h){var l=h.data,u=h.multiSection;function w(m){for(m===null?m=0:m++;m<l.length&&l[m]===0;)m++;return m===l.length?null:m}function I(m){for(m===null?m=l.length-1:m--;m>=0&&l[m]===0;)m--;return m===-1?null:m}function j(m){var b=Te(m,2),O=b[0],k=b[1];return u?k===null||k===l[O]-1?(O=w(O),O===null?[null,null]:[O,0]):[O,k+1]:l===0||k===l-1?[null,null]:k===null?[null,0]:[null,k+1]}function R(m){var b=Te(m,2),O=b[0],k=b[1];return u?k===null||k===0?(O=I(O),O===null?[null,null]:[O,l[O]-1]):[O,k-1]:l===0||k===0?[null,null]:k===null?[null,l-1]:[null,k-1]}function C(m){return j(m)[1]===null}return{next:j,prev:R,isLast:C}},ge={exports:{}},ct=Object.prototype.propertyIsEnumerable;function lt(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function gt(h){var l=Object.getOwnPropertyNames(h);return Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(h))),l.filter(function(u){return ct.call(h,u)})}var ft=Object.assign||function(h,l){for(var u,w,I=lt(h),j=1;j<arguments.length;j++){u=arguments[j],w=gt(Object(u));for(var R=0;R<w.length;R++)I[w[R]]=u[w[R]]}return I};ge.exports,function(h,l){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function m(b,O){var k=[],H=!0,F=!1,A=void 0;try{for(var L=b[Symbol.iterator](),q;!(H=(q=L.next()).done)&&(k.push(q.value),!(O&&k.length===O));H=!0);}catch(x){F=!0,A=x}finally{try{!H&&L.return&&L.return()}finally{if(F)throw A}}return k}return function(b,O){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return m(b,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function w(m){return m&&m.__esModule?m:{default:m}}function I(m){if(Array.isArray(m)){for(var b=0,O=Array(m.length);b<m.length;b++)O[b]=m[b];return O}else return Array.from(m)}var j=ft,R=w(j),C=function(m){return m};l.default=function(m){var b=Array.isArray(m)&&m.length===2?m:[m,null],O=u(b,2),k=O[0],H=O[1];return function(F){for(var A=arguments.length,L=Array(A>1?A-1:0),q=1;q<A;q++)L[q-1]=arguments[q];var x=L.map(function(U){return k[U]}).filter(C);return typeof x[0]=="string"||typeof H=="function"?{key:F,className:H?H.apply(void 0,I(x)):x.join(" ")}:{key:F,style:R.default.apply(void 0,[{}].concat(I(x)))}}},h.exports=l.default}(ge,ge.exports);var pt=ge.exports,Me={},fe={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=u;function l(w){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(I){return typeof I}:l=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},l(w)}function u(w,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(w===I)return!1;var R=Object.keys(w),C=Object.keys(I);if(R.length!==C.length)return!0;var m={},b,O;for(b=0,O=j.length;b<O;b++)m[j[b]]=!0;for(b=0,O=R.length;b<O;b++){var k=R[b],H=w[k],F=I[k];if(H!==F){if(!m[k]||H===null||F===null||l(H)!=="object"||l(F)!=="object")return!0;var A=Object.keys(H),L=Object.keys(F);if(A.length!==L.length)return!0;for(var q=0,x=A.length;q<x;q++){var U=A[q];if(H[U]!==F[U])return!0}}}return!1}})(fe),function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=R(ue),u=I(se),w=I(fe);function I(y){return y&&y.__esModule?y:{default:y}}function j(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return j=function(){return y},y}function R(y){if(y&&y.__esModule)return y;if(y===null||C(y)!=="object"&&typeof y!="function")return{default:y};var v=j();if(v&&v.has(y))return v.get(y);var S={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in y)if(Object.prototype.hasOwnProperty.call(y,p)){var r=D?Object.getOwnPropertyDescriptor(y,p):null;r&&(r.get||r.set)?Object.defineProperty(S,p,r):S[p]=y[p]}return S.default=y,v&&v.set(y,S),S}function C(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(v){return typeof v}:C=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},C(y)}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function b(y,v){for(var S=0;S<v.length;S++){var D=v[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(y,D.key,D)}}function O(y,v,S){return v&&b(y.prototype,v),S&&b(y,S),y}function k(y){return function(){var v=L(y),S;if(A()){var D=L(this).constructor;S=Reflect.construct(v,arguments,D)}else S=v.apply(this,arguments);return H(this,S)}}function H(y,v){return v&&(C(v)==="object"||typeof v=="function")?v:F(y)}function F(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function L(y){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},L(y)}function q(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),v&&x(y,v)}function x(y,v){return x=Object.setPrototypeOf||function(S,D){return S.__proto__=D,S},x(y,v)}function U(y,v,S){return v in y?Object.defineProperty(y,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[v]=S,y}var Q=function(y){q(S,y);var v=k(S);function S(){return m(this,S),v.apply(this,arguments)}return O(S,[{key:"shouldComponentUpdate",value:function(D){return(0,w.default)(D,this.props)}},{key:"render",value:function(){var D=this.props,p=D.section,r=D.renderSectionTitle,i=D.theme,g=D.sectionKeyPrefix,f=r(p);return f?l.default.createElement("div",i("".concat(g,"title"),"sectionTitle"),f):null}}]),S}(l.Component);h.default=Q,U(Q,"propTypes",{section:u.default.any.isRequired,renderSectionTitle:u.default.func.isRequired,theme:u.default.func.isRequired,sectionKeyPrefix:u.default.string.isRequired})}(Me);var He={},qe={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=R(ue),u=I(se),w=I(fe);function I(r){return r&&r.__esModule?r:{default:r}}function j(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return j=function(){return r},r}function R(r){if(r&&r.__esModule)return r;if(r===null||C(r)!=="object"&&typeof r!="function")return{default:r};var i=j();if(i&&i.has(r))return i.get(r);var g={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in r)if(Object.prototype.hasOwnProperty.call(r,P)){var M=f?Object.getOwnPropertyDescriptor(r,P):null;M&&(M.get||M.set)?Object.defineProperty(g,P,M):g[P]=r[P]}return g.default=r,i&&i.set(r,g),g}function C(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(i){return typeof i}:C=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},C(r)}function m(){return m=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var g=arguments[i];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(r[f]=g[f])}return r},m.apply(this,arguments)}function b(r,i){var g=Object.keys(r);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);i&&(f=f.filter(function(P){return Object.getOwnPropertyDescriptor(r,P).enumerable})),g.push.apply(g,f)}return g}function O(r){for(var i=1;i<arguments.length;i++){var g=arguments[i]!=null?arguments[i]:{};i%2?b(Object(g),!0).forEach(function(f){D(r,f,g[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(g)):b(Object(g)).forEach(function(f){Object.defineProperty(r,f,Object.getOwnPropertyDescriptor(g,f))})}return r}function k(r,i){if(r==null)return{};var g=H(r,i),f,P;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(r);for(P=0;P<M.length;P++)f=M[P],!(i.indexOf(f)>=0)&&Object.prototype.propertyIsEnumerable.call(r,f)&&(g[f]=r[f])}return g}function H(r,i){if(r==null)return{};var g={},f=Object.keys(r),P,M;for(M=0;M<f.length;M++)P=f[M],!(i.indexOf(P)>=0)&&(g[P]=r[P]);return g}function F(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function A(r,i){for(var g=0;g<i.length;g++){var f=i[g];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}function L(r,i,g){return i&&A(r.prototype,i),g&&A(r,g),r}function q(r){return function(){var i=y(r),g;if(Q()){var f=y(this).constructor;g=Reflect.construct(i,arguments,f)}else g=i.apply(this,arguments);return x(this,g)}}function x(r,i){return i&&(C(i)==="object"||typeof i=="function")?i:U(r)}function U(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Q(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(r){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},y(r)}function v(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),i&&S(r,i)}function S(r,i){return S=Object.setPrototypeOf||function(g,f){return g.__proto__=f,g},S(r,i)}function D(r,i,g){return i in r?Object.defineProperty(r,i,{value:g,enumerable:!0,configurable:!0,writable:!0}):r[i]=g,r}var p=function(r){v(g,r);var i=q(g);function g(){var f;F(this,g);for(var P=arguments.length,M=new Array(P),J=0;J<P;J++)M[J]=arguments[J];return f=i.call.apply(i,[this].concat(M)),D(U(f),"storeItemReference",function(W){W!==null&&(f.item=W)}),D(U(f),"onMouseEnter",function(W){var E=f.props,c=E.sectionIndex,t=E.itemIndex;f.props.onMouseEnter(W,{sectionIndex:c,itemIndex:t})}),D(U(f),"onMouseLeave",function(W){var E=f.props,c=E.sectionIndex,t=E.itemIndex;f.props.onMouseLeave(W,{sectionIndex:c,itemIndex:t})}),D(U(f),"onMouseDown",function(W){var E=f.props,c=E.sectionIndex,t=E.itemIndex;f.props.onMouseDown(W,{sectionIndex:c,itemIndex:t})}),D(U(f),"onClick",function(W){var E=f.props,c=E.sectionIndex,t=E.itemIndex;f.props.onClick(W,{sectionIndex:c,itemIndex:t})}),f}return L(g,[{key:"shouldComponentUpdate",value:function(f){return(0,w.default)(f,this.props,["renderItemData"])}},{key:"render",value:function(){var f=this.props,P=f.isHighlighted,M=f.item,J=f.renderItem,W=f.renderItemData,E=k(f,["isHighlighted","item","renderItem","renderItemData"]);return delete E.sectionIndex,delete E.itemIndex,typeof E.onMouseEnter=="function"&&(E.onMouseEnter=this.onMouseEnter),typeof E.onMouseLeave=="function"&&(E.onMouseLeave=this.onMouseLeave),typeof E.onMouseDown=="function"&&(E.onMouseDown=this.onMouseDown),typeof E.onClick=="function"&&(E.onClick=this.onClick),l.default.createElement("li",m({role:"option"},E,{ref:this.storeItemReference}),J(M,O({isHighlighted:P},W)))}}]),g}(l.Component);h.default=p,D(p,"propTypes",{sectionIndex:u.default.number,isHighlighted:u.default.bool.isRequired,itemIndex:u.default.number.isRequired,item:u.default.any.isRequired,renderItem:u.default.func.isRequired,renderItemData:u.default.object.isRequired,onMouseEnter:u.default.func,onMouseLeave:u.default.func,onMouseDown:u.default.func,onClick:u.default.func})})(qe),function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=C(ue),u=j(se),w=j(qe),I=j(fe);function j(p){return p&&p.__esModule?p:{default:p}}function R(){if(typeof WeakMap!="function")return null;var p=new WeakMap;return R=function(){return p},p}function C(p){if(p&&p.__esModule)return p;if(p===null||m(p)!=="object"&&typeof p!="function")return{default:p};var r=R();if(r&&r.has(p))return r.get(p);var i={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in p)if(Object.prototype.hasOwnProperty.call(p,f)){var P=g?Object.getOwnPropertyDescriptor(p,f):null;P&&(P.get||P.set)?Object.defineProperty(i,f,P):i[f]=p[f]}return i.default=p,r&&r.set(p,i),i}function m(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(r){return typeof r}:m=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},m(p)}function b(){return b=Object.assign||function(p){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var g in i)Object.prototype.hasOwnProperty.call(i,g)&&(p[g]=i[g])}return p},b.apply(this,arguments)}function O(p,r){var i=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);r&&(g=g.filter(function(f){return Object.getOwnPropertyDescriptor(p,f).enumerable})),i.push.apply(i,g)}return i}function k(p){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?O(Object(i),!0).forEach(function(g){S(p,g,i[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(i,g))})}return p}function H(p,r){if(!(p instanceof r))throw new TypeError("Cannot call a class as a function")}function F(p,r){for(var i=0;i<r.length;i++){var g=r[i];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}function A(p,r,i){return r&&F(p.prototype,r),i&&F(p,i),p}function L(p){return function(){var r=Q(p),i;if(U()){var g=Q(this).constructor;i=Reflect.construct(r,arguments,g)}else i=r.apply(this,arguments);return q(this,i)}}function q(p,r){return r&&(m(r)==="object"||typeof r=="function")?r:x(p)}function x(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Q(p){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Q(p)}function y(p,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),r&&v(p,r)}function v(p,r){return v=Object.setPrototypeOf||function(i,g){return i.__proto__=g,i},v(p,r)}function S(p,r,i){return r in p?Object.defineProperty(p,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):p[r]=i,p}var D=function(p){y(i,p);var r=L(i);function i(){var g;H(this,i);for(var f=arguments.length,P=new Array(f),M=0;M<f;M++)P[M]=arguments[M];return g=r.call.apply(r,[this].concat(P)),S(x(g),"storeHighlightedItemReference",function(J){g.props.onHighlightedItemChange(J===null?null:J.item)}),g}return A(i,[{key:"shouldComponentUpdate",value:function(g){return(0,I.default)(g,this.props,["itemProps"])}},{key:"render",value:function(){var g=this,f=this.props,P=f.items,M=f.itemProps,J=f.renderItem,W=f.renderItemData,E=f.sectionIndex,c=f.highlightedItemIndex,t=f.getItemId,o=f.theme,n=f.keyPrefix,e=E===null?n:"".concat(n,"section-").concat(E,"-"),s=typeof M=="function";return l.default.createElement("ul",b({role:"listbox"},o("".concat(e,"items-list"),"itemsList")),P.map(function(a,d){var _=d===0,T=d===c,B="".concat(e,"item-").concat(d),K=s?M({sectionIndex:E,itemIndex:d}):M,N=k({id:t(E,d),"aria-selected":T},o(B,"item",_&&"itemFirst",T&&"itemHighlighted"),{},K);return T&&(N.ref=g.storeHighlightedItemReference),l.default.createElement(w.default,b({},N,{sectionIndex:E,isHighlighted:T,itemIndex:d,item:a,renderItem:J,renderItemData:W}))}))}}]),i}(l.Component);h.default=D,S(D,"propTypes",{items:u.default.array.isRequired,itemProps:u.default.oneOfType([u.default.object,u.default.func]),renderItem:u.default.func.isRequired,renderItemData:u.default.object.isRequired,sectionIndex:u.default.number,highlightedItemIndex:u.default.number,onHighlightedItemChange:u.default.func.isRequired,getItemId:u.default.func.isRequired,theme:u.default.func.isRequired,keyPrefix:u.default.string.isRequired}),S(D,"defaultProps",{sectionIndex:null})}(He),function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=b(ue),u=C(se),w=C(at),I=C(pt),j=C(Me),R=C(He);function C(t){return t&&t.__esModule?t:{default:t}}function m(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return m=function(){return t},t}function b(t){if(t&&t.__esModule)return t;if(t===null||U(t)!=="object"&&typeof t!="function")return{default:t};var o=m();if(o&&o.has(t))return o.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=e?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,o&&o.set(t,n),n}function O(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,e)}return n}function k(t){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?O(Object(n),!0).forEach(function(e){P(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function H(t,o){return x(t)||q(t,o)||A(t,o)||F()}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(t,o){if(t){if(typeof t=="string")return L(t,o);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,o)}}function L(t,o){(o==null||o>t.length)&&(o=t.length);for(var n=0,e=new Array(o);n<o;n++)e[n]=t[n];return e}function q(t,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],e=!0,s=!1,a=void 0;try{for(var d=t[Symbol.iterator](),_;!(e=(_=d.next()).done)&&(n.push(_.value),!(o&&n.length===o));e=!0);}catch(T){s=!0,a=T}finally{try{!e&&d.return!=null&&d.return()}finally{if(s)throw a}}return n}}function x(t){if(Array.isArray(t))return t}function U(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U=function(o){return typeof o}:U=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U(t)}function Q(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function y(t,o){for(var n=0;n<o.length;n++){var e=o[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function v(t,o,n){return o&&y(t.prototype,o),n&&y(t,n),t}function S(t){return function(){var o=i(t),n;if(r()){var e=i(this).constructor;n=Reflect.construct(o,arguments,e)}else n=o.apply(this,arguments);return D(this,n)}}function D(t,o){return o&&(U(o)==="object"||typeof o=="function")?o:p(t)}function p(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},i(t)}function g(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&f(t,o)}function f(t,o){return f=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},f(t,o)}function P(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}var M={},J=function(t){return l.default.createElement("input",t)},W=function(t){var o=t.containerProps,n=t.children;return l.default.createElement("div",o,n)},E={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},c=function(t){g(n,t);var o=S(n);function n(e){var s;return Q(this,n),s=o.call(this,e),P(p(s),"storeInputReference",function(a){a!==null&&(s.input=a);var d=s.props.inputProps.ref;d&&(typeof d=="function"?d(a):U(d)==="object"&&Object.prototype.hasOwnProperty.call(d,"current")&&(d.current=a))}),P(p(s),"storeItemsContainerReference",function(a){a!==null&&(s.itemsContainer=a)}),P(p(s),"onHighlightedItemChange",function(a){s.highlightedItem=a}),P(p(s),"getItemId",function(a,d){if(d===null)return null;var _=s.props.id,T=a===null?"":"section-".concat(a);return"react-autowhatever-".concat(_,"-").concat(T,"-item-").concat(d)}),P(p(s),"onFocus",function(a){var d=s.props.inputProps;s.setState({isInputFocused:!0}),d.onFocus&&d.onFocus(a)}),P(p(s),"onBlur",function(a){var d=s.props.inputProps;s.setState({isInputFocused:!1}),d.onBlur&&d.onBlur(a)}),P(p(s),"onKeyDown",function(a){var d=s.props,_=d.inputProps,T=d.highlightedSectionIndex,B=d.highlightedItemIndex,K=a.keyCode;switch(K){case 40:case 38:{var N=K===40?"next":"prev",X=s.sectionIterator[N]([T,B]),Y=H(X,2),z=Y[0],G=Y[1];_.onKeyDown(a,{newHighlightedSectionIndex:z,newHighlightedItemIndex:G});break}default:_.onKeyDown(a,{highlightedSectionIndex:T,highlightedItemIndex:B})}}),s.highlightedItem=null,s.state={isInputFocused:!1},s.setSectionsItems(e),s.setSectionIterator(e),s.setTheme(e),s}return v(n,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setSectionsItems(e),(e.items!==this.props.items||e.multiSection!==this.props.multiSection)&&this.setSectionIterator(e),e.theme!==this.props.theme&&this.setTheme(e)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(e){e.multiSection&&(this.sectionsItems=e.items.map(function(s){return e.getSectionItems(s)}),this.sectionsLengths=this.sectionsItems.map(function(s){return s.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(s){return s===0}))}},{key:"setSectionIterator",value:function(e){this.sectionIterator=(0,w.default)({multiSection:e.multiSection,data:e.multiSection?this.sectionsLengths:e.items.length})}},{key:"setTheme",value:function(e){this.theme=(0,I.default)(e.theme)}},{key:"renderSections",value:function(){var e=this;if(this.allSectionsAreEmpty)return null;var s=this.theme,a=this.props,d=a.id,_=a.items,T=a.renderItem,B=a.renderItemData,K=a.renderSectionTitle,N=a.highlightedSectionIndex,X=a.highlightedItemIndex,Y=a.itemProps;return _.map(function(z,G){var te="react-autowhatever-".concat(d,"-"),ne="".concat(te,"section-").concat(G,"-"),Z=G===0;return l.default.createElement("div",s("".concat(ne,"container"),"sectionContainer",Z&&"sectionContainerFirst"),l.default.createElement(j.default,{section:z,renderSectionTitle:K,theme:s,sectionKeyPrefix:ne}),l.default.createElement(R.default,{items:e.sectionsItems[G],itemProps:Y,renderItem:T,renderItemData:B,sectionIndex:G,highlightedItemIndex:N===G?X:null,onHighlightedItemChange:e.onHighlightedItemChange,getItemId:e.getItemId,theme:s,keyPrefix:te,ref:e.storeItemsListReference}))})}},{key:"renderItems",value:function(){var e=this.props.items;if(e.length===0)return null;var s=this.theme,a=this.props,d=a.id,_=a.renderItem,T=a.renderItemData,B=a.highlightedSectionIndex,K=a.highlightedItemIndex,N=a.itemProps;return l.default.createElement(R.default,{items:e,itemProps:N,renderItem:_,renderItemData:T,highlightedItemIndex:B===null?K:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:s,keyPrefix:"react-autowhatever-".concat(d,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var e=this.highlightedItem;if(e){var s=this.itemsContainer,a=e.offsetParent===s?e.offsetTop:e.offsetTop-s.offsetTop,d=s.scrollTop;a<d?d=a:a+e.offsetHeight>d+s.offsetHeight&&(d=a+e.offsetHeight-s.offsetHeight),d!==s.scrollTop&&(s.scrollTop=d)}}},{key:"render",value:function(){var e=this.theme,s=this.props,a=s.id,d=s.multiSection,_=s.renderInputComponent,T=s.renderItemsContainer,B=s.highlightedSectionIndex,K=s.highlightedItemIndex,N=this.state.isInputFocused,X=d?this.renderSections():this.renderItems(),Y=X!==null,z=this.getItemId(B,K),G="react-autowhatever-".concat(a),te=k({role:"combobox","aria-haspopup":"listbox","aria-owns":G,"aria-expanded":Y},e("react-autowhatever-".concat(a,"-container"),"container",Y&&"containerOpen"),{},this.props.containerProps),ne=_(k({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":G,"aria-activedescendant":z},e("react-autowhatever-".concat(a,"-input"),"input",Y&&"inputOpen",N&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),Z=T({containerProps:k({id:G,role:"listbox"},e("react-autowhatever-".concat(a,"-items-container"),"itemsContainer",Y&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:X});return l.default.createElement("div",te,ne,Z)}}]),n}(l.Component);h.default=c,P(c,"propTypes",{id:u.default.string,multiSection:u.default.bool,renderInputComponent:u.default.func,renderItemsContainer:u.default.func,items:u.default.array.isRequired,renderItem:u.default.func,renderItemData:u.default.object,renderSectionTitle:u.default.func,getSectionItems:u.default.func,containerProps:u.default.object,inputProps:u.default.object,itemProps:u.default.oneOfType([u.default.object,u.default.func]),highlightedSectionIndex:u.default.number,highlightedItemIndex:u.default.number,theme:u.default.oneOfType([u.default.object,u.default.array])}),P(c,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:J,renderItemsContainer:W,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:M,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:M,inputProps:M,itemProps:M,highlightedSectionIndex:null,highlightedItemIndex:null,theme:E})}(Ee);var oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.mapToAutowhateverTheme=oe.defaultTheme=void 0;var dt={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};oe.defaultTheme=dt;var ht=function(h){var l={};for(var u in h)switch(u){case"suggestionsContainer":l.itemsContainer=h[u];break;case"suggestionsContainerOpen":l.itemsContainerOpen=h[u];break;case"suggestion":l.item=h[u];break;case"suggestionFirst":l.itemFirst=h[u];break;case"suggestionHighlighted":l.itemHighlighted=h[u];break;case"suggestionsList":l.itemsList=h[u];break;default:l[u]=h[u]}return l};oe.mapToAutowhateverTheme=ht,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=m(ue),u=R(se),w=R(st),I=R(Ee),j=oe;function R(c){return c&&c.__esModule?c:{default:c}}function C(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return C=function(){return c},c}function m(c){if(c&&c.__esModule)return c;if(c===null||b(c)!=="object"&&typeof c!="function")return{default:c};var t=C();if(t&&t.has(c))return t.get(c);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in c)if(Object.prototype.hasOwnProperty.call(c,e)){var s=n?Object.getOwnPropertyDescriptor(c,e):null;s&&(s.get||s.set)?Object.defineProperty(o,e,s):o[e]=c[e]}return o.default=c,t&&t.set(c,o),o}function b(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(t){return typeof t}:b=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(c)}function O(c,t){var o=Object.keys(c);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(c);t&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(c,e).enumerable})),o.push.apply(o,n)}return o}function k(c){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?O(Object(o),!0).forEach(function(n){S(c,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach(function(n){Object.defineProperty(c,n,Object.getOwnPropertyDescriptor(o,n))})}return c}function H(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}function F(c,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(c,n.key,n)}}function A(c,t,o){return t&&F(c.prototype,t),o&&F(c,o),c}function L(c){return function(){var t=Q(c),o;if(U()){var n=Q(this).constructor;o=Reflect.construct(t,arguments,n)}else o=t.apply(this,arguments);return q(this,o)}}function q(c,t){return t&&(b(t)==="object"||typeof t=="function")?t:x(c)}function x(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Q(c){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(c)}function y(c,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(t&&t.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),t&&v(c,t)}function v(c,t){return v=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},v(c,t)}function S(c,t,o){return t in c?Object.defineProperty(c,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):c[t]=o,c}var D=function(){return!0},p=function(c){return c.trim().length>0},r=function(c){var t=c.containerProps,o=c.children;return l.default.createElement("div",t,o)},i="suggestions-revealed",g="suggestions-updated",f="suggestion-selected",P="input-focused",M="input-changed",J="input-blurred",W="escape-pressed",E=function(c){y(o,c);var t=L(o);function o(n){var e,s=n.alwaysRenderSuggestions;return H(this,o),e=t.call(this),S(x(e),"onDocumentMouseDown",function(a){e.justClickedOnSuggestionsContainer=!1;for(var d=a.detail&&a.detail.target||a.target;d!==null&&d!==document;){if(d.getAttribute&&d.getAttribute("data-suggestion-index")!==null)return;if(d===e.suggestionsContainer){e.justClickedOnSuggestionsContainer=!0;return}d=d.parentNode}}),S(x(e),"storeAutowhateverRef",function(a){a!==null&&(e.autowhatever=a)}),S(x(e),"onSuggestionMouseEnter",function(a,d){var _=d.sectionIndex,T=d.itemIndex;e.updateHighlightedSuggestion(_,T),a.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!0),e.justMouseEntered=!0,setTimeout(function(){e.justMouseEntered=!1})}),S(x(e),"highlightFirstSuggestion",function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)}),S(x(e),"onDocumentMouseUp",function(){e.pressedSuggestion&&!e.justSelectedSuggestion&&e.input.focus(),e.pressedSuggestion=null}),S(x(e),"onSuggestionMouseDown",function(a){e.justSelectedSuggestion||(e.justSelectedSuggestion=!0,e.pressedSuggestion=a.target)}),S(x(e),"onSuggestionsClearRequested",function(){var a=e.props.onSuggestionsClearRequested;a&&a()}),S(x(e),"onSuggestionSelected",function(a,d){var _=e.props,T=_.alwaysRenderSuggestions,B=_.onSuggestionSelected,K=_.onSuggestionsFetchRequested;B&&B(a,d);var N=e.props.shouldKeepSuggestionsOnSelect(d.suggestion);T||N?K({value:d.suggestionValue,reason:f}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()}),S(x(e),"onSuggestionClick",function(a){var d=e.props,_=d.alwaysRenderSuggestions,T=d.focusInputOnSuggestionClick,B=e.getSuggestionIndices(e.findSuggestionElement(a.target)),K=B.sectionIndex,N=B.suggestionIndex,X=e.getSuggestion(K,N),Y=e.props.getSuggestionValue(X);e.maybeCallOnChange(a,Y,"click"),e.onSuggestionSelected(a,{suggestion:X,suggestionValue:Y,suggestionIndex:N,sectionIndex:K,method:"click"});var z=e.props.shouldKeepSuggestionsOnSelect(X);_||z||e.closeSuggestions(),T===!0?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})}),S(x(e),"onBlur",function(){var a=e.props,d=a.inputProps,_=a.shouldRenderSuggestions,T=d.value,B=d.onBlur,K=e.getHighlightedSuggestion(),N=_(T,J);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!N}),B&&B(e.blurEvent,{highlightedSuggestion:K})}),S(x(e),"onSuggestionMouseLeave",function(a){e.resetHighlightedSuggestion(!1),e.justSelectedSuggestion&&a.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!1)}),S(x(e),"onSuggestionTouchStart",function(){e.justSelectedSuggestion=!0}),S(x(e),"onSuggestionTouchMove",function(){e.justSelectedSuggestion=!1,e.pressedSuggestion=null,e.input.focus()}),S(x(e),"itemProps",function(a){var d=a.sectionIndex,_=a.itemIndex;return{"data-section-index":d,"data-suggestion-index":_,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.onSuggestionMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionTouchStart,onTouchMove:e.onSuggestionTouchMove,onClick:e.onSuggestionClick}}),S(x(e),"renderSuggestionsContainer",function(a){var d=a.containerProps,_=a.children,T=e.props.renderSuggestionsContainer;return T({containerProps:d,children:_,query:e.getQuery()})}),e.state={isFocused:!1,isCollapsed:!s,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},e.justPressedUpDown=!1,e.justMouseEntered=!1,e.pressedSuggestion=null,e}return A(o,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var e=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!n.highlightFirstSuggestion;(0,w.default)(n.suggestions,this.props.suggestions)?n.highlightFirstSuggestion&&n.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():e&&this.resetHighlightedSuggestion():this.willRenderSuggestions(n,g)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),e&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(n,e){var s=this.props,a=s.suggestions,d=s.onSuggestionHighlighted,_=s.highlightFirstSuggestion;if(!(0,w.default)(a,n.suggestions)&&a.length>0&&_){this.highlightFirstSuggestion();return}if(d){var T=this.getHighlightedSuggestion(),B=e.highlightedSuggestion;T!=B&&d({suggestion:T})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(n,e,s){var a=this;this.setState(function(d){var _=d.valueBeforeUpDown;return e===null?_=null:_===null&&typeof s<"u"&&(_=s),{highlightedSectionIndex:n,highlightedSuggestionIndex:e,highlightedSuggestion:e===null?null:a.getSuggestion(n,e),valueBeforeUpDown:_}})}},{key:"resetHighlightedSuggestion",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(e){var s=e.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:n?null:s}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(n,e){var s=this.props,a=s.suggestions,d=s.multiSection,_=s.getSectionSuggestions;return d?_(a[n])[e]:a[e]}},{key:"getHighlightedSuggestion",value:function(){var n=this.state,e=n.highlightedSectionIndex,s=n.highlightedSuggestionIndex;return s===null?null:this.getSuggestion(e,s)}},{key:"getSuggestionValueByIndex",value:function(n,e){var s=this.props.getSuggestionValue;return s(this.getSuggestion(n,e))}},{key:"getSuggestionIndices",value:function(n){var e=n.getAttribute("data-section-index"),s=n.getAttribute("data-suggestion-index");return{sectionIndex:typeof e=="string"?parseInt(e,10):null,suggestionIndex:parseInt(s,10)}}},{key:"findSuggestionElement",value:function(n){var e=n;do{if(e.getAttribute&&e.getAttribute("data-suggestion-index")!==null)return e;e=e.parentNode}while(e!==null);throw console.error("Clicked element:",n),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(n,e,s){var a=this.props.inputProps,d=a.value,_=a.onChange;e!==d&&_(n,{newValue:e,method:s})}},{key:"willRenderSuggestions",value:function(n,e){var s=n.suggestions,a=n.inputProps,d=n.shouldRenderSuggestions,_=a.value;return s.length>0&&d(_,e)}},{key:"getQuery",value:function(){var n=this.props.inputProps,e=n.value,s=this.state.valueBeforeUpDown;return(s===null?e:s).trim()}},{key:"render",value:function(){var n=this,e=this.props,s=e.suggestions,a=e.renderInputComponent,d=e.onSuggestionsFetchRequested,_=e.renderSuggestion,T=e.inputProps,B=e.multiSection,K=e.renderSectionTitle,N=e.id,X=e.getSectionSuggestions,Y=e.theme,z=e.getSuggestionValue,G=e.alwaysRenderSuggestions,te=e.highlightFirstSuggestion,ne=e.containerProps,Z=this.state,Fe=Z.isFocused,Se=Z.isCollapsed,Oe=Z.highlightedSectionIndex,we=Z.highlightedSuggestionIndex,ae=Z.valueBeforeUpDown,ce=G?D:this.props.shouldRenderSuggestions,re=T.value,Ie=T.onFocus,je=T.onKeyDown,Le=this.willRenderSuggestions(this.props,"render"),le=G||Fe&&!Se&&Le,Ae=le?s:[],Ue=k({},T,{onFocus:function(V){if(!n.justSelectedSuggestion&&!n.justClickedOnSuggestionsContainer){var $=ce(re,P);n.setState({isFocused:!0,isCollapsed:!$}),Ie&&Ie(V),$&&d({value:re,reason:P})}},onBlur:function(V){if(n.justClickedOnSuggestionsContainer){n.input.focus();return}n.blurEvent=V,n.justSelectedSuggestion||(n.onBlur(),n.onSuggestionsClearRequested())},onChange:function(V){var $=V.target.value,ie=ce($,M);n.maybeCallOnChange(V,$,"type"),n.suggestionsContainer&&(n.suggestionsContainer.scrollTop=0),n.setState(k({},te?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!ie})),ie?d({value:$,reason:M}):n.onSuggestionsClearRequested()},onKeyDown:function(V,$){var ie=V.keyCode;switch(ie){case 40:case 38:if(Se)ce(re,i)&&(d({value:re,reason:i}),n.revealSuggestions(),V.preventDefault());else if(s.length>0){var Pe=$.newHighlightedSectionIndex,pe=$.newHighlightedItemIndex,de;pe===null?de=ae===null?re:ae:de=n.getSuggestionValueByIndex(Pe,pe),n.updateHighlightedSuggestion(Pe,pe,re),n.maybeCallOnChange(V,de,ie===40?"down":"up"),V.preventDefault()}n.justPressedUpDown=!0,setTimeout(function(){n.justPressedUpDown=!1});break;case 13:{if(V.keyCode===229)break;var he=n.getHighlightedSuggestion();if(le&&!G&&n.closeSuggestions(),he!=null){V.preventDefault();var _e=z(he);n.maybeCallOnChange(V,_e,"enter"),n.onSuggestionSelected(V,{suggestion:he,suggestionValue:_e,suggestionIndex:we,sectionIndex:Oe,method:"enter"}),n.justSelectedSuggestion=!0,setTimeout(function(){n.justSelectedSuggestion=!1})}break}case 27:{le&&V.preventDefault();var Ce=le&&!G;if(ae===null){if(!Ce){var me="";n.maybeCallOnChange(V,me,"escape"),ce(me,W)?d({value:me,reason:W}):n.onSuggestionsClearRequested()}}else n.maybeCallOnChange(V,ae,"escape");Ce?(n.onSuggestionsClearRequested(),n.closeSuggestions()):n.resetHighlightedSuggestion();break}}je&&je(V)}}),Be={query:this.getQuery()};return l.default.createElement(I.default,{multiSection:B,items:Ae,renderInputComponent:a,renderItemsContainer:this.renderSuggestionsContainer,renderItem:_,renderItemData:Be,renderSectionTitle:K,getSectionItems:X,highlightedSectionIndex:Oe,highlightedItemIndex:we,containerProps:ne,inputProps:Ue,itemProps:this.itemProps,theme:(0,j.mapToAutowhateverTheme)(Y),id:N,ref:this.storeAutowhateverRef})}}]),o}(l.Component);h.default=E,S(E,"propTypes",{suggestions:u.default.array.isRequired,onSuggestionsFetchRequested:function(c,t){var o=c[t];if(typeof o!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(c,t){var o=c[t];if(c.alwaysRenderSuggestions===!1&&typeof o!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:u.default.func,onSuggestionSelected:u.default.func,onSuggestionHighlighted:u.default.func,renderInputComponent:u.default.func,renderSuggestionsContainer:u.default.func,getSuggestionValue:u.default.func.isRequired,renderSuggestion:u.default.func.isRequired,inputProps:function(c,t){var o=c[t];if(!o)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(o,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(o,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:u.default.func,alwaysRenderSuggestions:u.default.bool,multiSection:u.default.bool,renderSectionTitle:function(c,t){var o=c[t];if(c.multiSection===!0&&typeof o!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(c,t){var o=c[t];if(c.multiSection===!0&&typeof o!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:u.default.bool,highlightFirstSuggestion:u.default.bool,theme:u.default.object,id:u.default.string,containerProps:u.default.object}),S(E,"defaultProps",{renderSuggestionsContainer:r,shouldRenderSuggestions:p,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:j.defaultTheme,id:"1",containerProps:{}})}(De);var mt=De.default;const yt=Ve(mt),bt={is:{lang:"is",label:"Leit \xE1 vefnum",inputLabel:"Leitaror\xF0",placeholder:"Sl\xE1\xF0u inn leitaror\xF0",suggestionsLabel:"Till\xF6gur"},en:{lang:"en",label:"Site search",inputLabel:"Search terms",placeholder:"Enter search terms",suggestionsLabel:"Suggestions"}},vt=h=>{const{suggestions:l,setSuggestions:u,renderSuggestion:w,getSuggestionValue:I,onSuggestionsFetchRequested:j,onSuggestionSelected:R,onSuggestionHighlighted:C,onSubmit:m,onButtonClick:b=m,bem:O="SiteSearchAutocomplete",wrapperProps:k}=h,[H,F]=ye(""),A=We(),L=Ye(h,bt);return ee(yt,{theme:{container:O,containerOpen:O+"--open",suggestionsContainer:O+"__container",suggestionsContainerOpen:O+"__container--open",suggestionsList:O+"__list",suggestion:O+"__item",suggestionHighlighted:O+"__item--highlighted"},focusInputOnSuggestionClick:!0,suggestions:l,onSuggestionsClearRequested:()=>u([]),onSuggestionsFetchRequested:j,getSuggestionValue:I,onSuggestionSelected:R,onSuggestionHighlighted:C,renderSuggestion:w||(q=>String(q)),containerProps:{"aria-label":L.label},renderSuggestionsContainer:({containerProps:q,children:x})=>ee("div",{...q,"aria-label":l.length?L.suggestionsLabel:void 0,children:x}),inputProps:{ref:A,value:H,onChange:(q,{newValue:x})=>{F(x)}},renderInputComponent:q=>{const{className:x,type:U,disabled:Q,readOnly:y,required:v,children:S,...D}=q;return ee(ze,{...D,wrapperProps:k,label:h.label||L.inputLabel,placeholder:L.placeholder,onSubmit:m&&(()=>m(H)),onButtonClick:b&&(()=>b(H))})}})},St=h=>{const[l,u]=Je.useLaggedState(!1);Ke(()=>{const j=R=>{R.key==="Escape"&&u(!1)};return document.addEventListener("keyup",j),()=>document.removeEventListener("keyup",j)},[]);const w=()=>{u(!0)},I=j=>{(!j.relatedTarget||!j.currentTarget.contains(j.relatedTarget))&&u(!1,100)};return ee("div",{className:xe("SiteSearchCurtain",[l&&"focused"]),onFocus:w,onBlur:I,...Ze&&{onfocusin:w,onfocusout:I},children:h.children})},ve=(...h)=>console.error("renderSiteSearchAutocomplete: ",...h),Ot=h=>{const{title:l,lang:u,apiUri:w,searchPagePath:I,exceptBundles:j}=h,[R,C]=ye([]),[m]=ye(()=>Ge.d(200));return ee(St,{children:[l&&ee(it,{children:l}),ee(vt,{lang:u,suggestions:R,renderSuggestion:({label:b})=>b,setSuggestions:C,onSuggestionSelected:(b,{suggestion:O})=>{window.location.href=O.href},getSuggestionValue:({label:b})=>b,onSubmit:b=>{window.location.href=I+"?q="+encodeURIComponent(b)},onSuggestionsFetchRequested:({value:b})=>{m.cancel(),b.length>=2&&m(()=>{const O=$e({value:b,preference:"searchbox",size:5,_source:["label","url_alias"],exceptBundles:j});et(w,[O]).then(k=>{const[H]=k;if(!H)throw new Error;C(H.items.map(({label:F,url_alias:A})=>({label:F,href:A})))})})}})]})},wt=h=>{var l;const{insertAt:u,apiUri:w,searchPagePath:I,exceptBundles:j}=h;if(!w||!I){!w&&ve("`apiUri` missing"),!I&&ve("`searchPagePath` missing");return}const R=document.querySelector(u),C=R?.closest(".RowBlockColumn");if(!C){ve(R?"RowBlockColumn parent not found":'Insertion point "'+u+'" not found');return}const m=Qe(),b=((l=C.querySelector(".PageHeading"))==null?void 0:l.textContent)||void 0;Xe("SiteSearchCurtain").then(()=>{const O=document.createElement("div");Ne.render(ee(Ot,{lang:m,title:b,apiUri:w,searchPagePath:I,exceptBundles:j}),O,()=>{C.textContent="",C.append(O)})})};export{wt as default};

import"../_chunks/initHannaNamespace-e9e79985.js";import{h as B,_,T as q,c as Be,F as H,y as ye,p as U,q as He,b as Ie,R as Ve,C as xe}from"../_chunks/compat.module-8108cd22.js";import{a as We,q as $e}from"../_chunks/qj-0db0624e.js";import{u as ze,o as R,m as J}from"../_chunks/jsxRuntime.module-c4fc14d9.js";import"../_chunks/getSVGtext-03122a1f.js";import"../_chunks/i18n-c1727f88.js";import{B as qe}from"../_chunks/_Button-bb1b19a5.js";import{u as je}from"../_chunks/useCallbackOnEsc-d879a42b.js";import{u as Xe}from"../_chunks/useLaggedState-1fe67bf8.js";import{F as Ye}from"../_chunks/FocusTrap-2eb35c64.js";import"../_chunks/_useMobileMenuToggling-acf37f77.js";import{I as Ze}from"../_chunks/InjectHTML-19b1fb4c.js";import"../_chunks/getLang-47cf2afb.js";import"../_chunks/_Link-f583270e.js";const K=Math.min,I=Math.max,ee=Math.round,te=Math.floor,N=e=>({x:e,y:e}),Ge={left:"right",right:"left",bottom:"top",top:"bottom"},Je={start:"end",end:"start"};function ve(e,t,n){return I(e,K(t,n))}function ue(e,t){return typeof e=="function"?e(t):e}function j(e){return e.split("-")[0]}function fe(e){return e.split("-")[1]}function we(e){return e==="x"?"y":"x"}function be(e){return e==="y"?"height":"width"}function de(e){return["top","bottom"].includes(j(e))?"y":"x"}function Ce(e){return we(de(e))}function Qe(e,t,n){n===void 0&&(n=!1);const r=fe(e),o=Ce(e),i=be(o);let c=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(c=ne(c)),[c,ne(c)]}function Ue(e){const t=ne(e);return[me(e),t,me(t)]}function me(e){return e.replace(/start|end/g,t=>Je[t])}function Ke(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:c;default:return[]}}function et(e,t,n,r){const o=fe(e);let i=Ke(j(e),n==="start",r);return o&&(i=i.map(c=>c+"-"+o),t&&(i=i.concat(i.map(me)))),i}function ne(e){return e.replace(/left|right|bottom|top/g,t=>Ge[t])}function tt(e){return{top:0,right:0,bottom:0,left:0,...e}}function nt(e){return typeof e!="number"?tt(e):{top:e,right:e,bottom:e,left:e}}function re(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Re(e,t,n){let{reference:r,floating:o}=e;const i=de(t),c=Ce(t),l=be(c),a=j(t),u=i==="y",h=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,g=r[l]/2-o[l]/2;let d;switch(a){case"top":d={x:h,y:r.y-o.height};break;case"bottom":d={x:h,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-o.width,y:f};break;default:d={x:r.x,y:r.y}}switch(fe(t)){case"start":d[c]-=g*(n&&u?-1:1);break;case"end":d[c]+=g*(n&&u?-1:1);break}return d}const rt=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:c}=n,l=i.filter(Boolean),a=await(c.isRTL==null?void 0:c.isRTL(t));let u=await c.getElementRects({reference:e,floating:t,strategy:o}),{x:h,y:f}=Re(u,r,a),g=r,d={},s=0;for(let p=0;p<l.length;p++){const{name:x,fn:m}=l[p],{x:y,y:v,data:b,reset:w}=await m({x:h,y:f,initialPlacement:r,placement:g,strategy:o,middlewareData:d,rects:u,platform:c,elements:{reference:e,floating:t}});if(h=y??h,f=v??f,d={...d,[x]:{...d[x],...b}},w&&s<=50){s++,typeof w=="object"&&(w.placement&&(g=w.placement),w.rects&&(u=w.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:o}):w.rects),{x:h,y:f}=Re(u,g,a)),p=-1;continue}}return{x:h,y:f,placement:g,strategy:o,middlewareData:d}};async function Le(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:c,elements:l,strategy:a}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:g=!1,padding:d=0}=ue(t,e),s=nt(d),p=l[g?f==="floating"?"reference":"floating":f],x=re(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(p)))==null||n?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:a})),m=f==="floating"?{...c.floating,x:r,y:o}:c.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),v=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},b=re(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m,offsetParent:y,strategy:a}):m);return{top:(x.top-b.top+s.top)/v.y,bottom:(b.bottom-x.bottom+s.bottom)/v.y,left:(x.left-b.left+s.left)/v.x,right:(b.right-x.right+s.right)/v.x}}const ot=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:o,rects:i,initialPlacement:c,platform:l,elements:a}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:s=!0,...p}=ue(e,t),x=j(r),m=j(c)===c,y=await(l.isRTL==null?void 0:l.isRTL(a.floating)),v=f||(m||!s?[ne(c)]:Ue(c));!f&&d!=="none"&&v.push(...et(c,s,d,y));const b=[c,...v],w=await Le(t,p),T=[];let L=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&T.push(w[x]),h){const S=Qe(r,i,y);T.push(w[S[0]],w[S[1]])}if(L=[...L,{placement:r,overflows:T}],!T.every(S=>S<=0)){var D,F;const S=(((D=o.flip)==null?void 0:D.index)||0)+1,W=b[S];if(W)return{data:{index:S,overflows:L},reset:{placement:W}};let Z=(F=L.filter($=>$.overflows[0]<=0).sort(($,z)=>$.overflows[1]-z.overflows[1])[0])==null?void 0:F.placement;if(!Z)switch(g){case"bestFit":{var C;const $=(C=L.map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,Fe)=>G+Fe,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:C[0];$&&(Z=$);break}case"initialPlacement":Z=c;break}if(r!==Z)return{reset:{placement:Z}}}return{}}}},it=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:l={fn:x=>{let{x:m,y}=x;return{x:m,y}}},...a}=ue(e,t),u={x:n,y:r},h=await Le(t,a),f=de(j(o)),g=we(f);let d=u[g],s=u[f];if(i){const x=g==="y"?"top":"left",m=g==="y"?"bottom":"right",y=d+h[x],v=d-h[m];d=ve(y,d,v)}if(c){const x=f==="y"?"top":"left",m=f==="y"?"bottom":"right",y=s+h[x],v=s-h[m];s=ve(y,s,v)}const p=l.fn({...t,[g]:d,[f]:s});return{...p,data:{x:p.x-n,y:p.y-r}}}}};function A(e){return Ee(e)?(e.nodeName||"").toLowerCase():"#document"}function E(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function P(e){var t;return(t=(Ee(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ee(e){return e instanceof Node||e instanceof E(e).Node}function O(e){return e instanceof Element||e instanceof E(e).Element}function k(e){return e instanceof HTMLElement||e instanceof E(e).HTMLElement}function Te(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof E(e).ShadowRoot}function Q(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=M(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function ct(e){return["table","td","th"].includes(A(e))}function pe(e){const t=ge(),n=M(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lt(e){let t=X(e);for(;k(t)&&!oe(t);){if(pe(t))return t;t=X(t)}return null}function ge(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oe(e){return["html","body","#document"].includes(A(e))}function M(e){return E(e).getComputedStyle(e)}function ie(e){return O(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function X(e){if(A(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Te(e)&&e.host||P(e);return Te(t)?t.host:t}function Me(e){const t=X(e);return oe(t)?e.ownerDocument?e.ownerDocument.body:e.body:k(t)&&Q(t)?t:Me(t)}function ce(e,t){var n;t===void 0&&(t=[]);const r=Me(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=E(r);return o?t.concat(i,i.visualViewport||[],Q(r)?r:[]):t.concat(r,ce(r))}function _e(e){const t=M(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=k(e),i=o?e.offsetWidth:n,c=o?e.offsetHeight:r,l=ee(n)!==i||ee(r)!==c;return l&&(n=i,r=c),{width:n,height:r,$:l}}function he(e){return O(e)?e:e.contextElement}function Y(e){const t=he(e);if(!k(t))return N(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=_e(t);let c=(i?ee(n.width):n.width)/r,l=(i?ee(n.height):n.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!l||!Number.isFinite(l))&&(l=1),{x:c,y:l}}const st=N(0);function ke(e){const t=E(e);return!ge()||!t.visualViewport?st:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function at(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==E(e)?!1:t}function V(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=he(e);let c=N(1);t&&(r?O(r)&&(c=Y(r)):c=Y(e));const l=at(i,n,r)?ke(i):N(0);let a=(o.left+l.x)/c.x,u=(o.top+l.y)/c.y,h=o.width/c.x,f=o.height/c.y;if(i){const g=E(i),d=r&&O(r)?E(r):r;let s=g.frameElement;for(;s&&r&&d!==g;){const p=Y(s),x=s.getBoundingClientRect(),m=M(s),y=x.left+(s.clientLeft+parseFloat(m.paddingLeft))*p.x,v=x.top+(s.clientTop+parseFloat(m.paddingTop))*p.y;a*=p.x,u*=p.y,h*=p.x,f*=p.y,a+=y,u+=v,s=E(s).frameElement}}return re({width:h,height:f,x:a,y:u})}function ut(e){let{rect:t,offsetParent:n,strategy:r}=e;const o=k(n),i=P(n);if(n===i)return t;let c={scrollLeft:0,scrollTop:0},l=N(1);const a=N(0);if((o||!o&&r!=="fixed")&&((A(n)!=="body"||Q(i))&&(c=ie(n)),k(n))){const u=V(n);l=Y(n),a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-c.scrollLeft*l.x+a.x,y:t.y*l.y-c.scrollTop*l.y+a.y}}function ft(e){return Array.from(e.getClientRects())}function Se(e){return V(P(e)).left+ie(e).scrollLeft}function dt(e){const t=P(e),n=ie(e),r=e.ownerDocument.body,o=I(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=I(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+Se(e);const l=-n.scrollTop;return M(r).direction==="rtl"&&(c+=I(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:c,y:l}}function mt(e,t){const n=E(e),r=P(e),o=n.visualViewport;let i=r.clientWidth,c=r.clientHeight,l=0,a=0;if(o){i=o.width,c=o.height;const u=ge();(!u||u&&t==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:i,height:c,x:l,y:a}}function pt(e,t){const n=V(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=k(e)?Y(e):N(1),c=e.clientWidth*i.x,l=e.clientHeight*i.y,a=o*i.x,u=r*i.y;return{width:c,height:l,x:a,y:u}}function Pe(e,t,n){let r;if(t==="viewport")r=mt(e,n);else if(t==="document")r=dt(P(e));else if(O(t))r=pt(t,n);else{const o=ke(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return re(r)}function Oe(e,t){const n=X(e);return n===t||!O(n)||oe(n)?!1:M(n).position==="fixed"||Oe(n,t)}function gt(e,t){const n=t.get(e);if(n)return n;let r=ce(e).filter(l=>O(l)&&A(l)!=="body"),o=null;const i=M(e).position==="fixed";let c=i?X(e):e;for(;O(c)&&!oe(c);){const l=M(c),a=pe(c);!a&&l.position==="fixed"&&(o=null),(i?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Q(c)&&!a&&Oe(e,c))?r=r.filter(u=>u!==c):o=l,c=X(c)}return t.set(e,r),r}function ht(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?gt(t,this._c):[].concat(n),r],c=i[0],l=i.reduce((a,u)=>{const h=Pe(t,u,o);return a.top=I(h.top,a.top),a.right=K(h.right,a.right),a.bottom=K(h.bottom,a.bottom),a.left=I(h.left,a.left),a},Pe(t,c,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yt(e){return _e(e)}function xt(e,t,n){const r=k(t),o=P(t),i=n==="fixed",c=V(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const a=N(0);if(r||!r&&!i)if((A(t)!=="body"||Q(o))&&(l=ie(t)),r){const u=V(t,!0,i,t);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else o&&(a.x=Se(o));return{x:c.left+l.scrollLeft-a.x,y:c.top+l.scrollTop-a.y,width:c.width,height:c.height}}function Ne(e,t){return!k(e)||M(e).position==="fixed"?null:t?t(e):e.offsetParent}function Ae(e,t){const n=E(e);if(!k(e))return n;let r=Ne(e,t);for(;r&&ct(r)&&M(r).position==="static";)r=Ne(r,t);return r&&(A(r)==="html"||A(r)==="body"&&M(r).position==="static"&&!pe(r))?n:r||lt(e)||n}const vt=async function(e){let{reference:t,floating:n,strategy:r}=e;const o=this.getOffsetParent||Ae,i=this.getDimensions;return{reference:xt(t,await o(n),r),floating:{x:0,y:0,...await i(n)}}};function wt(e){return M(e).direction==="rtl"}const bt={convertOffsetParentRelativeRectToViewportRelativeRect:ut,getDocumentElement:P,getClippingRect:ht,getOffsetParent:Ae,getElementRects:vt,getClientRects:ft,getDimensions:yt,getScale:Y,isElement:O,isRTL:wt};function Ct(e,t){let n=null,r;const o=P(e);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function c(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),i();const{left:u,top:h,width:f,height:g}=e.getBoundingClientRect();if(l||t(),!f||!g)return;const d=te(h),s=te(o.clientWidth-(u+f)),p=te(o.clientHeight-(h+g)),x=te(u),m={rootMargin:-d+"px "+-s+"px "+-p+"px "+-x+"px",threshold:I(0,K(1,a))||1};let y=!0;function v(b){const w=b[0].intersectionRatio;if(w!==a){if(!y)return c();w?c(!1,w):r=setTimeout(()=>{c(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(v,{...m,root:o.ownerDocument})}catch{n=new IntersectionObserver(v,m)}n.observe(e)}return c(!0),i}function Rt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,u=he(e),h=o||i?[...u?ce(u):[],...ce(t)]:[];h.forEach(m=>{o&&m.addEventListener("scroll",n,{passive:!0}),i&&m.addEventListener("resize",n)});const f=u&&l?Ct(u,n):null;let g=-1,d=null;c&&(d=new ResizeObserver(m=>{let[y]=m;y&&y.target===u&&d&&(d.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{d&&d.observe(t)})),n()}),u&&!a&&d.observe(u),d.observe(t));let s,p=a?V(e):null;a&&x();function x(){const m=V(e);p&&(m.x!==p.x||m.y!==p.y||m.width!==p.width||m.height!==p.height)&&n(),p=m,s=requestAnimationFrame(x)}return n(),()=>{h.forEach(m=>{o&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),f&&f(),d&&d.disconnect(),d=null,a&&cancelAnimationFrame(s)}}const Lt=(e,t,n)=>{const r=new Map,o={platform:bt,...n},i={...o.platform,_c:r};return rt(e,t,{...o,platform:i})};var le=typeof document<"u"?ye:U;function se(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!se(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!se(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function De(e){const t=_(e);return le(()=>{t.current=e}),t}function Et(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,whileElementsMounted:i,open:c}=e,[l,a]=B({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,h]=B(r);se(u,r)||h(r);const f=_(null),g=_(null),d=_(l),s=De(i),p=De(o),[x,m]=B(null),[y,v]=B(null),b=q(C=>{f.current!==C&&(f.current=C,m(C))},[]),w=q(C=>{g.current!==C&&(g.current=C,v(C))},[]),T=q(()=>{if(!f.current||!g.current)return;const C={placement:t,strategy:n,middleware:u};p.current&&(C.platform=p.current),Lt(f.current,g.current,C).then(S=>{const W={...S,isPositioned:!0};L.current&&!se(d.current,W)&&(d.current=W,Be(()=>{a(W)}))})},[u,t,n,p]);le(()=>{c===!1&&d.current.isPositioned&&(d.current.isPositioned=!1,a(C=>({...C,isPositioned:!1})))},[c]);const L=_(!1);le(()=>(L.current=!0,()=>{L.current=!1}),[]),le(()=>{if(x&&y){if(s.current)return s.current(x,y,T);T()}},[x,y,T,s]);const D=H(()=>({reference:f,floating:g,setReference:b,setFloating:w}),[b,w]),F=H(()=>({reference:x,floating:y}),[x,y]);return H(()=>({...l,update:T,refs:D,elements:F,reference:b,floating:w}),[l,T,D,F,b,w])}var Tt=typeof document<"u"?ye:U;function Mt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}const _t=Ie(null),kt=()=>He(_t);function St(e){return e?.ownerDocument||document}function Pt(e){return St(e).defaultView||window}function ae(e){return e?e instanceof Pt(e).Element:!1}const Ot=Ve["useInsertionEffect".toString()],Nt=Ot||(e=>e());function At(e){const t=_(()=>{});return Nt(()=>{t.current=e}),q(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Dt(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:n,nodeId:r}=e,o=Et(e),i=kt(),c=_(null),l=_({}),a=B(()=>Mt())[0],[u,h]=B(null),f=q(m=>{const y=ae(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;o.refs.setReference(y)},[o.refs]),g=q(m=>{(ae(m)||m===null)&&(c.current=m,h(m)),(ae(o.refs.reference.current)||o.refs.reference.current===null||m!==null&&!ae(m))&&o.refs.setReference(m)},[o.refs]),d=H(()=>({...o.refs,setReference:g,setPositionReference:f,domReference:c}),[o.refs,g,f]),s=H(()=>({...o.elements,domReference:u}),[o.elements,u]),p=At(n),x=H(()=>({...o,refs:d,elements:s,dataRef:l,nodeId:r,events:a,open:t,onOpenChange:p}),[o,r,a,t,p,d,s]);return Tt(()=>{const m=i?.nodesRef.current.find(y=>y.id===r);m&&(m.context=x)}),H(()=>({...o,context:x,refs:d,reference:g,positionReference:f}),[o,d,x,g,f])}const Ft=(e,t)=>{const n=_(t),r=!!t;n.current=t,U(()=>{if(!r||!e.current)return;const o=i=>{if(!e.current)return!1;e.current.contains(i.target)||n.current&&n.current(i)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[r,e])},Bt=e=>{const[t,n]=Xe(!1,10),r=ze(e.ssr),[o,i]=B(!1),c=_(null),l=()=>n(!1,0);Ft(c,t&&l),je(t&&l);const{x:a,y:u,refs:h}=Dt({placement:"bottom-start",middleware:[ot(),it()],whileElementsMounted:Rt}),{onItemClick:f,wrapperProps:g={}}=e,d=s=>{s.preventDefault(),n(!t,0)};return R("details",{...g,className:J("ContextMenu",t&&"open",g.className),open:t,onBlur:s=>{var p;o||n(!1,300),(p=g.onBlur)==null||p.call(g,s)},ref:s=>{s&&(c.current=s,h.setReference(s.querySelector(".ContextMenu__toggler")),h.setFloating(s.querySelector(".ContextMenu__menu")))},children:[e.Toggler?R("summary",{className:"ContextMenu__toggler",onClick:d,children:R(e.Toggler,{isOpen:t})}):R(qe,{as:"summary",className:"ContextMenu__toggler",bem:e.togglerType==="primary"?"ButtonPrimary":"ButtonSecondary",icon:e.togglerIcon,size:e.togglerSize,variant:e.togglerVariant,"aria-label":e.labelLong,onClick:d,children:e.label}),R("ul",{className:"ContextMenu__menu",onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},onFocus:()=>{n(!0,0)},style:a!=null?{"--ContextMenu-pos-y":`${u}px`,"--ContextMenu-pos-x":`${a}px`}:void 0,children:[e.items.map((s,p)=>{if("divider"in s)return p===0&&!s.label||p===e.items.length-1?null:R("li",{className:J("ContextMenu__itemDivider",s.label&&"labelled"),children:s.label||!1},p);typeof s=="function"&&(s={Content:s});const x={className:J("ContextMenu__item",s.modifier),"aria-current":s.current||void 0};if("Content"in s&&s.Content)return R("li",{"data-customitem":"",...x,children:R(s.Content,{closeMenu:l})},p);const{label:m,onClick:y,href:v,destructive:b}=s,w={className:J("ContextMenu__itembutton",b&&"destructive"),lang:s.lang,"data-icon":s.icon,"arial-label":s.labelLong},T=r&&(y||f&&v==null),L=s;return R("li",{className:J("ContextMenu__item",s.modifier),"aria-current":s.current||void 0,children:T?R("button",{...w,type:"button","aria-controls":s.controlsId,onClick:()=>{const D=y&&y(L)===!1,F=f&&f(L)===!1;!(D||F)&&l()},children:m}):v!=null?R("a",{...w,href:v,hrefLang:s.hrefLang,target:s.target,onClick:()=>{!(f&&f(L)===!1)&&l()},children:m}):null},p)}),R(Ye,{Tag:"li",depth:2})]})]})},Ht=e=>{var t,n;const r=We(".ContextMenu__menu > .ContextMenu__item",e).map(c=>{var l;const a=(l=c.className.match(/[a-zA-Z0-9]__item--(.+?)(?: |$)/g))==null?void 0:l.map(f=>f.slice(f.indexOf("--")+2)),u=c.getAttribute("aria-current")==="true",h=c.childNodes;return h.forEach(f=>f.remove()),c.classList.remove("ContextMenu__item"),{modifier:a,current:u,Content:()=>{const f=_(null);return U(()=>{const g=f.current;g&&(g.parentNode.append(...h),g.remove())},[]),R("span",{ref:f})}}}),o=$e(".ContextMenu__toggler",e);if(!o||r.length===0)return;const i=o.getElementsByTagName("*").length===0?o.textContent.trim():R(Ze,{html:o.innerHTML});return{items:r,label:i,labelLong:o.getAttribute("aria-label")||void 0,togglerType:o.classList.contains("ButtonPrimary")?"primary":"secondary",togglerIcon:o.dataset.icon,togglerSize:(t=o.className.match(/--(small|wide)(?: |$)/))==null?void 0:t[1],togglerVariant:(n=o.className.match(/--(destuctive)(?: |$)/))==null?void 0:n[1]}};window.Hanna.makeSprinkle({name:"ContextMenu",init:e=>{const t=Ht(e);if(!t)return;const n=document.createElement("div");return n.style.all="unset",e.after(n),e.remove(),xe.render(R(Bt,{...t,ssr:!1,wrapperProps:{"data-sprinkled":""}}),n),n},unmount:(e,t)=>{t&&xe.unmountComponentAtNode(t)}});

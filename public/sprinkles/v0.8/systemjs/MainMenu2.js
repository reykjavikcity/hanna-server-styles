System.register(["../_chunks/initHannaNamespace-87f099a9.js","../_chunks/compat.module-f329784f.js","../_chunks/qj-d717b116.js","../_chunks/assets-cefd5009.js","../_chunks/i18n-6c3e4ded.js","../_chunks/_Link-7fe03f09.js","../_chunks/focusElement-d9331010.js","../_chunks/getSVGtext-1c46d1d7.js","../_chunks/_Button-634d4086.js","../_chunks/jsxRuntime.module-6df2baee.js","../_chunks/FocusTrap-64ee7a2d.js","../_chunks/_useMobileMenuToggling-0b192f4e.js","../_chunks/misc-c537bf75.js","../_chunks/getLang-b0f6fe19.js"],function(_e,Me){"use strict";var q,$,G,z,J,D,E,H,I,S,K,Q,W,X,U,s,Y,V,ee,T;return{setters:[null,r=>{q=r.h,$=r._,G=r.T,z=r.p,J=r.F,D=r.a,E=r.C},r=>{H=r.m,I=r.b,S=r.q},r=>{K=r.g},r=>{Q=r.g},r=>{W=r.L},r=>{X=r.f},null,r=>{U=r.B},r=>{s=r.o,Y=r.u},r=>{V=r.F},r=>{ee=r.u},r=>{T=r.n},null],execute:function(){const r=n=>{n.preventDefault();const e=n.currentTarget.hash.slice(1),t=e&&document.getElementById(e);t&&(t.tabIndex=-1,X(t))},ne=n=>s(U,{bem:"ButtonPrimary",...n}),te=n=>s(U,{bem:"ButtonSecondary",...n}),A=typeof document<"u"&&document.documentElement.classList,N={menuIsOpen:"menu-is-open",menuIsClosed:"menu-is-closed"},ie={is:{title:"Aðalvalmynd",homeLink:"Forsíða",openMenu:"Valmynd",openMenuLong:"Opna Aðalvalmynd",closeMenu:"Loka",closeMenuLong:"Loka Aðalvalmynd"},en:{title:"Main Menu",homeLink:"Home page",openMenu:"Menu",openMenuLong:"Open main menu",closeMenu:"Close",closeMenuLong:"Close main menu"},pl:{title:"Menu główne",homeLink:"Strona główna",openMenu:"Menu",openMenuLong:"Otwórz menu główne",closeMenu:"Zamknij",closeMenuLong:"Zamknij menu główne"}},re={alert:"info",globe:void 0,search:"search",user:"user"},ue=n=>{const{onItemClick:e,closeMenu:t,openMenu:_,isBrowser:b}=n,M=(i,o,d={})=>{const{key:g,Tag:L="li",button:h}=d;if(typeof o=="function"){const u=o;return s("li",{className:`${i}item`,children:s(u,{closeMenu:t,openMenu:_})},g)}const v=`${i}link`,{label:p,labelLong:y,href:x,target:f,lang:F,controlsId:B,onClick:w,descr:c,icon:k}=o,C=c&&s(D,{children:[" ",s("small",{className:`${v}__descr`,children:c})]}),Z=h?te:"button",P=h?te:W,O={className:v,"data-icon":k?re[k]:void 0,"arial-label":y,title:y,lang:F},a=h?{size:"small"}:void 0;return p==="Græna planið"&&console.log("FOOBAR",k,k&&re[k]),s(L,{className:H(`${i}item`,o.modifier),"aria-current":o.current||void 0,children:b&&(w||x==null)?s(Z,{...O,type:"button","aria-controls":B,onClick:()=>{const u=w&&w(o)===!1,m=e&&e(o)===!1;!(u||m)&&t()},...a,children:[p," ",C]}):x!=null?s(P,{...O,href:x,hrefLang:o.hrefLang,target:f,onClick:()=>{!(e&&e(o)===!1)&&t()},...a,children:[p," ",C]}):null},g)};return{renderList:(i,o,d={})=>!o||!o.length?null:s("ul",{className:`${i}items`,...d.listProps,children:o.map((g,L)=>M(i,g,{key:L,button:d.buttons}))}),renderItem:M}},le=n=>{const{homeLink:e="/",items:t,onItemClick:_,illustration:b,imageUrl:M,wrapperProps:l={}}=n,i=ee(l.id),o=Y(n.ssr),[d,g]=q(!1),L=$(null),h=l.ref||L,v=G(a=>a.key==="Escape"&&y(),[]),p=()=>{A.add(N.menuIsOpen),A.remove(N.menuIsClosed),g(!0),document.addEventListener("keydown",v)},y=()=>{var a;A.remove(N.menuIsOpen),A.add(N.menuIsClosed),g(!1),B(f),(a=h.current)==null||a.scrollTo(0,0),document.removeEventListener("keydown",v)};z(()=>{if(o)return A.add(N.menuIsClosed),()=>{A.remove(N.menuIsClosed),y()}},[o]);const{mainItems:x,defaultActive:f}=J(()=>{if(!t.main||!t.main.length)return{mainItems:void 0,defaultActive:-1};const a=t.main.map(m=>{var oe;if(!("title"in m)||"current"in m)return m;const R=(oe=m.subItems.find(ae=>"current"in ae&&!!ae.current))==null?void 0:oe.current;return{...m,current:R}});let u=a.findIndex(m=>"current"in m&&m.current);return u<0&&"subItems"in(a[0]||{})&&(u=0),{mainItems:a,defaultActive:u}},[t.main]),[F,B]=q(f),w=$(f);f!==w.current&&(w.current=f,B(f));const c=Q(n,ie),{renderItem:k,renderList:C}=ue({onItemClick:_,closeMenu:y,openMenu:p,isBrowser:o}),Z={...typeof e=="string"?{href:e,label:c.homeLink}:e,modifier:"home"},P=M||b&&K(b),O=`${i}-menu`;return s("nav",{...n.wrapperProps,className:H("MainMenu2",o&&(d?"open":"closed"),l.className),style:P?{...l.style,"--menu-image":`url(${P})`}:l.style,ref:h,"aria-label":c.title,"data-sprinkled":o,id:O,children:[d&&s(V,{atTop:!0}),s("div",{className:"MainMenu2__content",children:[s("h2",{className:"MainMenu2__title",children:c.title}),o?s(ne,{className:"MainMenu2__toggler",size:"small",type:"button","aria-pressed":d,"aria-controls":O,...d?{onClick:y,"aria-label":c.closeMenuLong,title:c.closeMenuLong,children:c.closeMenu}:{onClick:p,"aria-label":c.openMenuLong,title:c.openMenuLong,children:c.openMenu}}):s(ne,{className:"MainMenu2__toggler",size:"small",href:`#${O}`,onClick:r,"aria-hidden":"true",children:c.title}),x&&s("div",{className:H("MainMenu2__main",F<0&&"noneActive"),children:[k("MainMenu2__main__",Z,{Tag:"div"}),x.map((a,u)=>{if("title"in a){const m=`${i}-submenu-${u}`,R=u===F;return s(D,{children:[s("div",{className:"MainMenu2__main__item","aria-current":a.current||void 0,children:o?s("button",{className:"MainMenu2__main__link",type:"button",onClick:()=>B(u),"aria-controls":m,"aria-pressed":R,children:a.title}):s("strong",{className:"MainMenu2__main__link",children:a.title})}),C("MainMenu2__main__sub__",a.subItems,o&&{listProps:{id:m,hidden:!R}})]},u)}return k("MainMenu2__main__",a,{key:u,Tag:"div"})})]}),C("MainMenu2__hot__",t.hot,{buttons:!0}),C("MainMenu2__extra__",t.extra,{buttons:!0}),t.related&&t.related.length>0&&s("div",{className:"MainMenu2__related",children:[t.relatedTitle&&s("h3",{className:"MainMenu2__related__title",children:t.relatedTitle}),C("MainMenu2__related__",t.related)]})]}),d&&s(V,{})]})},ce=n=>{try{const e=JSON.parse(n.dataset.propsTexts||"{}");if(typeof e.title=="string"&&typeof e.openMenu=="string"&&typeof e.closeMenu=="string")return e.openMenuLong=e.openMenuLong||e.openMenu,e.closeMenuLong=e.closeMenuLong||e.closeMenu,e.homeLink=e.homeLink||"",e}catch{}},me=({html:n})=>{const e=$(null);return z(()=>{e.current&&(e.current.outerHTML=e.current.innerHTML)},[]),s("span",{ref:e,dangerouslySetInnerHTML:{__html:n}})},se=n=>{const e=n.getAttribute("aria-current");return e==="true"||e==="page"},j=n=>{var p;if(!n)return;const e=S("a[href]",n);if(!e)return;const t=S(".MainMenu2__main__sub__link__descr",n);t==null||t.remove();const _=t==null?void 0:t.textContent.trim(),M=e.getElementsByTagName("*").length===0?e.textContent.trim():s(me,{html:e.innerHTML}),l=e.getAttribute("href"),i=e.getAttribute("target")||void 0,o=e.getAttribute("lang")||void 0,d=e.getAttribute("hreflang")||void 0,g=e.getAttribute("aria-label")||e.title||void 0,L=e.dataset.icon,h=(p=n.className.match(/[a-zA-Z0-9]__item--(.+)(?: |$)/))==null?void 0:p[1],v=se(n);return{label:M,labelLong:g,href:l,target:i,lang:o,hrefLang:d,modifier:h,current:v,descr:_,icon:L}},de=n=>{var M;const e={main:I(".MainMenu2__main__item:not(.MainMenu2__main__item--home)",n).map(l=>{const i=l.nextElementSibling;return i!=null&&i.classList.contains("MainMenu2__main__sub__items")?{title:l.textContent.trim(),current:se(l),subItems:I(".MainMenu2__main__sub__item",i).map(j).filter(T)}:j(l)}).filter(T),hot:I(".MainMenu2__hot__item",n).map(j).filter(T),extra:I(".MainMenu2__extra__item",n).map(j).filter(T),relatedTitle:(M=S(".MainMenu2__related__title",n))==null?void 0:M.textContent.trim(),related:I(".MainMenu2__related__item",n).map(j).filter(T)},t=j(S(".MainMenu2__main__item--home",n));t&&(delete t.modifier,delete t.controlsId,delete t.descr);const _=n.style.getPropertyValue("--menu-image").trim().replace(/^url\((.+)\)$/,"$1"),b=ce(n);return{items:e,homeLink:t,imageUrl:_,texts:b}};window.Hanna.makeSprinkle({name:"MainMenu2",init:n=>{const e=de(n),t=n;return n.getAttributeNames().forEach(_=>{n.removeAttribute(_)}),E.render(s(le,{...e,ssr:!1}),t),t},unmount:(n,e)=>{E.unmountComponentAtNode(e)}})}}});

System.register(["../_chunks/initHannaNamespace-ae0195f6.js","../_chunks/qj-0feb5801.js","../_chunks/compat.module-f329784f.js","../_chunks/getSVGtext-ef8676a9.js","../_chunks/i18n-6c3e4ded.js","../_chunks/_useMobileMenuToggling-2178898f.js","../_chunks/getLang-45de5ff2.js"],function(W,Z){"use strict";var g,p,_,v,L,T,h,C,P;return{setters:[null,s=>{g=s.E,p=s.q,_=s.a,v=s.b},null,s=>{L=s.f},s=>{T=s.g},s=>{h=s.g,C=s.d},s=>{P=s.g}],execute:function(){const s={is:{togglerLabel:"Opna/loka Aðalvalmynd",closeMenuLabel:"Loka",closeMenuLabelLong:"Loka aðalvalmynd"},en:{togglerLabel:"Toggle Main Menu",closeMenuLabel:"Close",closeMenuLabelLong:"Close main menu"},pl:{togglerLabel:"Otwórz/zamknij menu główne",closeMenuLabel:"Zamknij",closeMenuLabelLong:"Zamknij menu główne"}},w={is:{title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},f=h(),k={phone:1,phablet:1,tablet:1},m=document.documentElement.classList,H=(e,a)=>{e.tabIndex=-1;const n=e.id||C();e.id||(e.id=n);const i=T({lang:a},s),o=g("button",{className:"MobileMenuToggler",onClick:M=>{r&&(M.preventDefault(),l?c():b())},"aria-controls":n,"aria-pressed":"false",lang:a},i.togglerLabel),u=g("button",{className:"MobileMenuToggler__closebutton","aria-label":i.closeMenuLabelLong,onClick:()=>c(),lang:a},i.closeMenuLabel);let l=!1,r=!1;const t=()=>{r||(m.add("menu-is-active"),m.add("menu-is-closed"),e.before(o),e.append(u),r=!0)},d=()=>{r&&(l&&c(),m.remove("menu-is-closed"),m.remove("menu-is-active"),o.remove(),u.remove(),r=!1)},b=()=>{m.add("menu-is-open"),m.remove("menu-is-closed"),l=!0,o.setAttribute("aria-pressed",`${l}`),L(e)},c=()=>{m.add("menu-is-closed"),m.remove("menu-is-open"),l=!1,o.setAttribute("aria-pressed",`${l}`),L(o)},x=M=>{const S=k[M.is]&&!k[M.was||""],F=!k[M.is]&&k[M.was||""];S?t():F&&d()};return f.subscribe(x),()=>{f.unsubscribe(x),d()}};let j;const B=({panelElm:e,titleButton:a,menuButton:n},i)=>{const o=()=>{e.classList.remove("PrimaryPanel--active"),a&&a.removeAttribute("aria-pressed")};i?o():j=setTimeout(o,1e3),n&&n.removeAttribute("aria-pressed")},D=({panelElm:e,titleButton:a,menuButton:n})=>{clearTimeout(j),e.classList.add("PrimaryPanel--active"),a&&a.setAttribute("aria-pressed","true"),n&&n.setAttribute("aria-pressed","true")},E=({escHandler:e,clickHandler:a})=>{document.addEventListener("keydown",e),document.addEventListener("click",a,!0)},y=({escHandler:e,clickHandler:a})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",a,!0)},N=e=>function(n,i=!0){const{activePanel:o,backToMenuButton:u,container:l}=e;delete l.dataset.pristine,n===o&&(n=void 0);const r=document.documentElement,t=r.dataset;n?(e.container.classList.add("MainMenu__panelsWrap--active"),n.panelElm.append(u),o||(E(e),t.scrollTop=String(r.scrollTop),r.scrollTop=0,t.megaPanelActive="")):(u.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),y(e),r.scrollTop=parseInt(t.scrollTop||"")||0,delete t.scrollTop,delete t.megaPanelActive),o&&(B(o,!!n),e.activePanel=void 0),n&&(D(n),e.activePanel=n),i&&setTimeout(()=>{n?v.focusElm(n.panelElm):o&&v.focusElm(o.menuButton)},100)},q=(e,a)=>{const n=T({lang:a},w),i=p(".MainMenu__panelsWrap",e);if(!i)return;i.dataset.pristine="true",_(".PrimaryPanel",i).forEach(t=>{const d=p(".PrimaryPanel__title",t);if(!d)return;const b=t.id&&p(`a.MainMenu__link[href$="#${t.id}"]`,e)||void 0,c={panelElm:t,titleButton:t.id?g("button",{className:"MainMenu__mega__title-toggler",onClick:()=>u(c,!1),"aria-controls":t.id},d.textContent):void 0,menuButton:b&&g("button",{className:"MainMenu__link",onClick:()=>u(c),"aria-controls":t.id,"aria-label":b.getAttribute("aria-label")},b.textContent)};c.titleButton&&(d.textContent="",d.append(c.titleButton)),b&&c.menuButton&&b.replaceWith(c.menuButton)});const o={container:i,activePanel:void 0,backToMenuButton:g("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>l(),"aria-label":n.backToMenuLong},n.backToMenu),escHandler:t=>{t.key==="Escape"&&l()},clickHandler(t){e.contains(t.target)||l()}},u=N(o),l=()=>u(void 0),r=t=>{!{netbook:1,wide:1}[t.is]&&{netbook:1,wide:1}[t.was||""]&&l()};return f.subscribe(r),()=>{f.unsubscribe(r),y(o)}};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const a=P(e),n=H(e,a),i=q(e,a);return()=>{n(),i&&i()}},unmount:(e,a)=>{a()}})}}});

System.register(["../_chunks/initHannaNamespace-6467c489.js","../_chunks/qj-d717b116.js","../_chunks/compat.module-f329784f.js","../_chunks/i18n-6c3e4ded.js","../_chunks/_useMobileMenuToggling-0b192f4e.js","../_chunks/getSVGtext-1c46d1d7.js","../_chunks/focusElement-d9331010.js","../_chunks/getLang-bd714008.js"],function(W,Z){"use strict";var _,g,f,h,v,L,C,T,P;return{setters:[null,s=>{_=s.d,g=s.E,f=s.q,h=s.b,v=s.c},null,s=>{L=s.g},s=>{C=s.g},null,s=>{T=s.f},s=>{P=s.g}],execute:function(){const s={is:{togglerLabel:"Opna/loka Aðalvalmynd",closeMenuLabel:"Loka",closeMenuLabelLong:"Loka aðalvalmynd"},en:{togglerLabel:"Toggle Main Menu",closeMenuLabel:"Close",closeMenuLabelLong:"Close main menu"},pl:{togglerLabel:"Otwórz/zamknij menu główne",closeMenuLabel:"Zamknij",closeMenuLabelLong:"Zamknij menu główne"}},w={is:{title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},p=C(),k={phone:1,phablet:1,tablet:1},m=document.documentElement.classList,H=(e,o)=>{e.tabIndex=-1;const n=e.id||_();e.id||(e.id=n);const i=L({lang:o},s),a=g("button",{className:"MobileMenuToggler",onClick:M=>{c&&(M.preventDefault(),l?r():b())},"aria-controls":n,"aria-pressed":"false",lang:o},i.togglerLabel),u=g("button",{className:"MobileMenuToggler__closebutton","aria-label":i.closeMenuLabelLong,onClick:()=>r(),lang:o},i.closeMenuLabel);let l=!1,c=!1;const t=()=>{c||(m.add("menu-is-active"),m.add("menu-is-closed"),e.before(a),e.append(u),c=!0)},d=()=>{c&&(l&&r(),m.remove("menu-is-closed"),m.remove("menu-is-active"),a.remove(),u.remove(),c=!1)},b=()=>{m.add("menu-is-open"),m.remove("menu-is-closed"),l=!0,a.setAttribute("aria-pressed",`${l}`),T(e)},r=()=>{m.add("menu-is-closed"),m.remove("menu-is-open"),l=!1,a.setAttribute("aria-pressed",`${l}`),T(a)},x=M=>{const S=k[M.is]&&!k[M.was||""],F=!k[M.is]&&k[M.was||""];S?t():F&&d()};return p.subscribe(x),()=>{p.unsubscribe(x),d()}};let j;const B=({panelElm:e,titleButton:o,menuButton:n},i)=>{const a=()=>{e.classList.remove("PrimaryPanel--active"),o&&o.removeAttribute("aria-pressed")};i?a():j=setTimeout(a,1e3),n&&n.removeAttribute("aria-pressed")},E=({panelElm:e,titleButton:o,menuButton:n})=>{clearTimeout(j),e.classList.add("PrimaryPanel--active"),o&&o.setAttribute("aria-pressed","true"),n&&n.setAttribute("aria-pressed","true")},D=({escHandler:e,clickHandler:o})=>{document.addEventListener("keydown",e),document.addEventListener("click",o,!0)},y=({escHandler:e,clickHandler:o})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",o,!0)},N=e=>function(n,i=!0){const{activePanel:a,backToMenuButton:u,container:l}=e;delete l.dataset.pristine,n===a&&(n=void 0);const c=document.documentElement,t=c.dataset;n?(e.container.classList.add("MainMenu__panelsWrap--active"),n.panelElm.append(u),a||(D(e),t.scrollTop=String(c.scrollTop),c.scrollTop=0,t.megaPanelActive="")):(u.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),y(e),c.scrollTop=parseInt(t.scrollTop||"")||0,delete t.scrollTop,delete t.megaPanelActive),a&&(B(a,!!n),e.activePanel=void 0),n&&(E(n),e.activePanel=n),i&&setTimeout(()=>{n?v.focusElm(n.panelElm):a&&v.focusElm(a.menuButton)},100)},q=(e,o)=>{const n=L({lang:o},w),i=f(".MainMenu__panelsWrap",e);if(!i)return;i.dataset.pristine="true",h(".PrimaryPanel",i).forEach(t=>{const d=f(".PrimaryPanel__title",t);if(!d)return;const b=t.id&&f(`a.MainMenu__link[href$="#${t.id}"]`,e)||void 0,r={panelElm:t,titleButton:t.id?g("button",{className:"MainMenu__mega__title-toggler",onClick:()=>u(r,!1),"aria-controls":t.id},d.textContent):void 0,menuButton:b&&g("button",{className:"MainMenu__link",onClick:()=>u(r),"aria-controls":t.id,"aria-label":b.getAttribute("aria-label")},b.textContent)};r.titleButton&&(d.textContent="",d.append(r.titleButton)),b&&r.menuButton&&b.replaceWith(r.menuButton)});const a={container:i,activePanel:void 0,backToMenuButton:g("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>l(),"aria-label":n.backToMenuLong},n.backToMenu),escHandler:t=>{t.key==="Escape"&&l()},clickHandler(t){e.contains(t.target)||l()}},u=N(a),l=()=>u(void 0),c=t=>{!{netbook:1,wide:1}[t.is]&&{netbook:1,wide:1}[t.was||""]&&l()};return p.subscribe(c),()=>{p.unsubscribe(c),y(a)}};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const o=P(e),n=H(e,o),i=q(e,o);return()=>{n(),i&&i()}},unmount:(e,o)=>{o()}})}}});

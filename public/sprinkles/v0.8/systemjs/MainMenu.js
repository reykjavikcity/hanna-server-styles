System.register(["../_chunks/initHannaNamespace-503f58b6.js","../_chunks/qj-d717b116.js","../_chunks/compat.module-f329784f.js","../_chunks/i18n-6c3e4ded.js","../_chunks/_useMobileMenuToggling-0b192f4e.js","../_chunks/getSVGtext-1c46d1d7.js","../_chunks/focusElement-d9331010.js","../_chunks/getLang-bd714008.js"],function(W,Z){"use strict";var _,b,f,h,v,L,C,T,P;return{setters:[null,s=>{_=s.d,b=s.E,f=s.q,h=s.b,v=s.c},null,s=>{L=s.g},s=>{C=s.g},null,s=>{T=s.f},s=>{P=s.g}],execute:function(){const s={is:{togglerLabel:"Opna/loka Aðalvalmynd",closeMenuLabel:"Loka",closeMenuLabelLong:"Loka aðalvalmynd"},en:{togglerLabel:"Toggle Main Menu",closeMenuLabel:"Close",closeMenuLabelLong:"Close main menu"},pl:{togglerLabel:"Otwórz/zamknij menu główne",closeMenuLabel:"Zamknij",closeMenuLabelLong:"Zamknij menu główne"}},H={is:{title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},p=C(),k={phone:1,phablet:1,tablet:1},m=document.documentElement.classList,B=(e,t)=>{e.tabIndex=-1;const n=e.id||_();e.id||(e.id=n);const i=L({lang:t},s),o=b("button",{className:"MobileMenuToggler",onClick:M=>{r&&(M.preventDefault(),l?c():g())},"aria-controls":n,"aria-pressed":"false",lang:t},i.togglerLabel),u=b("button",{className:"MobileMenuToggler__closebutton","aria-label":i.closeMenuLabelLong,onClick:()=>c(),lang:t},i.closeMenuLabel);let l=!1,r=!1;const a=()=>{r||(m.add("menu-is-active"),m.add("menu-is-closed"),e.before(o),e.append(u),r=!0)},d=()=>{r&&(l&&c(),m.remove("menu-is-closed"),m.remove("menu-is-active"),o.remove(),u.remove(),r=!1)},g=()=>{m.add("menu-is-open"),m.remove("menu-is-closed"),l=!0,o.setAttribute("aria-pressed",`${l}`),T(e)},c=()=>{m.add("menu-is-closed"),m.remove("menu-is-open"),l=!1,o.setAttribute("aria-pressed",`${l}`),T(o)},x=M=>{const S=k[M.is]&&!k[M.was||""],F=!k[M.is]&&k[M.was||""];S?a():F&&d()};return p.subscribe(x),()=>{p.unsubscribe(x),d()}};let j;const E=({panelElm:e,titleButton:t,menuButton:n},i)=>{const o=()=>{e.classList.remove("PrimaryPanel--active"),t&&t.removeAttribute("aria-pressed")};i?o():j=setTimeout(o,1e3),n&&n.removeAttribute("aria-pressed")},D=({panelElm:e,titleButton:t,menuButton:n})=>{clearTimeout(j),e.classList.add("PrimaryPanel--active"),t&&t.setAttribute("aria-pressed","true"),n&&n.setAttribute("aria-pressed","true")},N=({escHandler:e,clickHandler:t})=>{document.addEventListener("keydown",e),document.addEventListener("click",t,!0)},y=({escHandler:e,clickHandler:t})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",t,!0)},q=e=>function(n,i=!0){const{activePanel:o,backToMenuButton:u,container:l}=e;delete l.dataset.pristine,n===o&&(n=void 0);const r=document.documentElement,a=r.dataset;n?(e.container.classList.add("MainMenu__panelsWrap--active"),n.panelElm.append(u),o||(N(e),a.scrollTop=String(r.scrollTop),r.scrollTop=0,a.megaPanelActive="")):(u.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),y(e),r.scrollTop=parseInt(a.scrollTop||"")||0,delete a.scrollTop,delete a.megaPanelActive),o&&(E(o,!!n),e.activePanel=void 0),n&&(D(n),e.activePanel=n),i&&setTimeout(()=>{n?v.focusElm(n.panelElm):o&&v.focusElm(o.menuButton)},100)},w=(e,t)=>{const n=L({lang:t},H),i=f(".MainMenu__panelsWrap",e);if(!i)return;i.dataset.pristine="true",h(".PrimaryPanel",i).forEach(a=>{const d=f(".PrimaryPanel__title",a);if(!d)return;const g=a.id&&f('a.MainMenu__link[href$="#'+a.id+'"]',e)||void 0,c={panelElm:a,titleButton:a.id?b("button",{className:"MainMenu__mega__title-toggler",onClick:()=>u(c,!1),"aria-controls":a.id},d.textContent):void 0,menuButton:g&&b("button",{className:"MainMenu__link",onClick:()=>u(c),"aria-controls":a.id,"aria-label":g.getAttribute("aria-label")},g.textContent)};c.titleButton&&(d.textContent="",d.append(c.titleButton)),g&&c.menuButton&&g.replaceWith(c.menuButton)});const o={container:i,activePanel:void 0,backToMenuButton:b("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>l(),"aria-label":n.backToMenuLong},n.backToMenu),escHandler:a=>{a.key==="Escape"&&l()},clickHandler(a){e.contains(a.target)||l()}},u=q(o),l=()=>u(void 0),r=a=>{a.leftTopmenu&&l()};return p.subscribe(r),()=>{p.unsubscribe(r),y(o)}};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const t=P(e),n=B(e,t),i=w(e,t);return()=>{n(),i&&i()}},unmount:(e,t)=>{t()}})}}});

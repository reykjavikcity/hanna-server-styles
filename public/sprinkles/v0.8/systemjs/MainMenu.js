System.register(["./initHannaNamespace.js","../_chunks/qj-fb67cbb0.js","../_chunks/compat.module-92198136.js","../_chunks/useFormatMonitor-a6f95301.js","../_chunks/utils-3377a87b.js","./utils/focus-visible.js"],function(j,x){"use strict";var M,f,k,b,v,g,_;return{setters:[null,i=>{M=i.a,f=i.q,k=i.E,b=i.e},null,null,i=>{v=i.f,g=i.c,_=i.b},null],execute:function(){const i={is:{title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},T=v();let L;const h=({panelElm:e,titleButton:n,menuButton:t},s)=>{const o=()=>{e.classList.remove("PrimaryPanel--active"),n&&n.removeAttribute("aria-pressed")};s?o():L=setTimeout(o,1e3),t&&t.removeAttribute("aria-pressed")},y=({panelElm:e,titleButton:n,menuButton:t})=>{clearTimeout(L),e.classList.add("PrimaryPanel--active"),n&&n.setAttribute("aria-pressed","true"),t&&t.setAttribute("aria-pressed","true")},E=({escHandler:e,clickHandler:n})=>{document.addEventListener("keydown",e),document.addEventListener("click",n,!0)},P=({escHandler:e,clickHandler:n})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",n,!0)},C=e=>function(t,s=!0){const{activePanel:o,backToMenuButton:c,container:l}=e;delete l.dataset.pristine,t===o&&(t=void 0);const r=document.documentElement,u=r.dataset;t?(e.container.classList.add("MainMenu__panelsWrap--active"),t.panelElm.append(c),o||(E(e),u.scrollTop=String(r.scrollTop),r.scrollTop=0,u.megaPanelActive="")):(c.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),P(e),r.scrollTop=parseInt(u.scrollTop||"")||0,delete u.scrollTop,delete u.megaPanelActive),o&&(h(o,!!t),e.activePanel=void 0),t&&(y(t),e.activePanel=t),s&&setTimeout(()=>{t?b.focusElm(t.panelElm):o&&b.focusElm(o.menuButton)},100)};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const n=g(e),t=_({lang:n},i),s=M(".MainMenu__panelsWrap",e);if(!s)return;s.dataset.pristine="true",f(".PrimaryPanel",s).forEach(a=>{const p=M(".PrimaryPanel__title",a);if(!p)return;const d=a.id&&M('a.MainMenu__link[href$="#'+a.id+'"]',e)||void 0,m={panelElm:a,titleButton:a.id?k("button",{className:"MainMenu__mega__title-toggler",onClick:()=>c(m,!1),"aria-controls":a.id},p.textContent):void 0,menuButton:d&&k("button",{className:"MainMenu__link",onClick:()=>c(m),"aria-controls":a.id,"aria-label":d.getAttribute("aria-label")},d.textContent)};m.titleButton&&(p.textContent="",p.append(m.titleButton)),d&&m.menuButton&&d.replaceWith(m.menuButton)});const o={container:s,activePanel:void 0,backToMenuButton:k("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>l(),"aria-label":t.backToMenuLong},t.backToMenu),escHandler:a=>{a.key==="Escape"&&l()},clickHandler(a){e.contains(a.target)||l()}},c=C(o),l=()=>c(void 0),r=a=>{a.leftTopmenu&&l()};return T.subscribe(r),()=>{T.unsubscribe(r),P(o)}},unmount:(e,n)=>{n&&n()}})}}});

System.register(["./initHannaNamespace.js","../_chunks/qj-9ff1fed3.js","../_chunks/compat.module-36c495df.js","../_chunks/useFormatMonitor-8de02688.js","../_chunks/utils-f31475b7.js","../_chunks/focus-visible-4a3df2ba.js"],function(C,j){"use strict";var g,m,b,d,p,f,v;return{setters:[null,i=>{g=i.h,m=i.a,b=i.q,d=i.E,p=i.c},null,null,i=>{f=i.g,v=i.a},null],execute:function(){const i={is:{lang:"is",title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{lang:"en",title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{lang:"pl",title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},_=f();let T;const h=({panelElm:e,titleButton:a,menuButton:t},r)=>{const o=()=>{e.classList.remove("PrimaryPanel--active"),a&&a.removeAttribute("aria-pressed")};r?o():T=setTimeout(o,1e3),t&&t.removeAttribute("aria-pressed")},P=({panelElm:e,titleButton:a,menuButton:t})=>{clearTimeout(T),e.classList.add("PrimaryPanel--active"),a&&a.setAttribute("aria-pressed","true"),t&&t.setAttribute("aria-pressed","true")},y=({escHandler:e,clickHandler:a})=>{document.addEventListener("keydown",e),document.addEventListener("click",a,!0)},L=({escHandler:e,clickHandler:a})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",a,!0)},E=e=>function(t,r=!0){const{activePanel:o,backToMenuButton:s,container:M}=e;delete M.dataset.pristine,t===o&&(t=void 0);const c=document.documentElement,n=c.dataset;t?(e.container.classList.add("MainMenu__panelsWrap--active"),t.panelElm.append(s),o||(y(e),n.scrollTop=String(c.scrollTop),c.scrollTop=0,n.megaPanelActive="")):(s.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),L(e),c.scrollTop=parseInt(n.scrollTop||"")||0,delete n.scrollTop,delete n.megaPanelActive),o&&(h(o,!!t),e.activePanel=void 0),t&&(P(t),e.activePanel=t),r&&setTimeout(()=>{t?p.focusElm(t.panelElm):o&&p.focusElm(o.menuButton)},100)};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const a=v({lang:g(e)},i),t=m(".MainMenu__panelsWrap",e);if(!t)return;t.dataset.pristine="true",b(".PrimaryPanel",t).forEach(n=>{const k=m(".PrimaryPanel__title",n);if(!k)return;const u=n.id&&m('a.MainMenu__link[href$="#'+n.id+'"]',e)||void 0,l={panelElm:n,titleButton:n.id?d("button",{className:"MainMenu__mega__title-toggler",onClick:()=>o(l,!1),"aria-controls":n.id},k.textContent):void 0,menuButton:u&&d("button",{className:"MainMenu__link",onClick:()=>o(l),"aria-controls":n.id,"aria-label":u.getAttribute("aria-label")},u.textContent)};l.titleButton&&(k.textContent="",k.append(l.titleButton)),u&&l.menuButton&&u.replaceWith(l.menuButton)});const r={container:t,activePanel:void 0,backToMenuButton:d("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>s(),"aria-label":a.backToMenuLong,lang:a.lang},a.backToMenu),escHandler:n=>{n.key==="Escape"&&s()},clickHandler(n){e.contains(n.target)||s()}},o=E(r),s=()=>o(void 0),M=n=>{n.leftTopmenu&&s()};return _.subscribe(M),()=>{_.unsubscribe(M),L(r)}},unmount:(e,a)=>{a&&a()}})}}});

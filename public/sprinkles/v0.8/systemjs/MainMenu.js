System.register(["./initHannaNamespace.js","../_chunks/qj-34a4e316.js","../_chunks/compat.module-36c495df.js","../_chunks/useFormatMonitor-96162446.js","../_chunks/utils-029f7e50.js","../_chunks/focus-visible-165ac59f.js"],function(C,j){"use strict";var g,m,b,d,p,f,v;return{setters:[null,s=>{g=s.h,m=s.a,b=s.q,d=s.E,p=s.c},null,null,s=>{f=s.g,v=s.a},null],execute:function(){const s={is:{lang:"is",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{lang:"en",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{lang:"pl",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},_=f();let T;const h=({panelElm:e,titleButton:a,menuButton:t},r)=>{const o=()=>{e.classList.remove("PrimaryPanel--active"),a&&a.removeAttribute("aria-pressed")};r?o():T=setTimeout(o,1e3),t&&t.removeAttribute("aria-pressed")},P=({panelElm:e,titleButton:a,menuButton:t})=>{clearTimeout(T),e.classList.add("PrimaryPanel--active"),a&&a.setAttribute("aria-pressed","true"),t&&t.setAttribute("aria-pressed","true")},E=({escHandler:e,clickHandler:a})=>{document.addEventListener("keydown",e),document.addEventListener("click",a,!0)},L=({escHandler:e,clickHandler:a})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",a,!0)},y=e=>function(t,r=!0){const{activePanel:o,backToMenuButton:i,container:M}=e;delete M.dataset.pristine,t===o&&(t=void 0);const l=document.documentElement,n=l.dataset;t?(e.container.classList.add("MainMenu__panelsWrap--active"),t.panelElm.append(i),o||(E(e),n.scrollTop=String(l.scrollTop),l.scrollTop=0,n.megaPanelActive="")):(i.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),L(e),l.scrollTop=parseInt(n.scrollTop||"")||0,delete n.scrollTop,delete n.megaPanelActive),o&&(h(o,!!t),e.activePanel=void 0),t&&(P(t),e.activePanel=t),r&&setTimeout(()=>{t?p.focusElm(t.panelElm):o&&p.focusElm(o.menuButton)},100)};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const a=v({lang:g(e)},s),t=m(".MainMenu__panelsWrap",e);if(!t)return;t.dataset.pristine="true",b(".PrimaryPanel",t).forEach(n=>{const k=m(".PrimaryPanel__title",n);if(!k)return;const u=n.id&&m('a.MainMenu__link[href$="#'+n.id+'"]',e)||void 0,c={panelElm:n,titleButton:n.id?d("button",{className:"MainMenu__mega__title-toggler",onClick:()=>o(c,!1),"aria-controls":n.id},k.textContent):void 0,menuButton:u&&d("button",{className:"MainMenu__link",onClick:()=>o(c),"aria-controls":n.id,"aria-label":u.getAttribute("aria-label")},u.textContent)};c.titleButton&&(k.textContent="",k.append(c.titleButton)),u&&c.menuButton&&u.replaceWith(c.menuButton)});const r={container:t,activePanel:void 0,backToMenuButton:d("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>i(),"aria-label":a.backToMenuLong,lang:a.lang},a.backToMenu),escHandler:n=>{n.key==="Escape"&&i()},clickHandler(n){e.contains(n.target)||i()}},o=y(r),i=()=>o(void 0),M=n=>{n.leftTopmenu&&i()};return _.subscribe(M),()=>{_.unsubscribe(M),L(r)}},unmount:(e,a)=>{a&&a()}})}}});

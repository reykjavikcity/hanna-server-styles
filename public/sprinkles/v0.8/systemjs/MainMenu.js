System.register(["./initHannaNamespace.js","../_chunks/qj-f461fc7f.js","../_chunks/compat.module-36c495df.js","../_chunks/useFormatMonitor-96ae6dcd.js","../_chunks/utils-1076813e.js","../_chunks/focus-visible-464088f4.js"],function(j,x){"use strict";var p,m,b,d,k,v,f,_;return{setters:[null,s=>{p=s.h,m=s.a,b=s.q,d=s.E,k=s.c},null,null,s=>{v=s.g,f=s.a,_=s.b},null],execute:function(){const s={is:{lang:"is",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{lang:"en",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{lang:"pl",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},T=v();let L;const h=({panelElm:e,titleButton:n,menuButton:t},r)=>{const o=()=>{e.classList.remove("PrimaryPanel--active"),n&&n.removeAttribute("aria-pressed")};r?o():L=setTimeout(o,1e3),t&&t.removeAttribute("aria-pressed")},y=({panelElm:e,titleButton:n,menuButton:t})=>{clearTimeout(L),e.classList.add("PrimaryPanel--active"),n&&n.setAttribute("aria-pressed","true"),t&&t.setAttribute("aria-pressed","true")},C=({escHandler:e,clickHandler:n})=>{document.addEventListener("keydown",e),document.addEventListener("click",n,!0)},P=({escHandler:e,clickHandler:n})=>{document.removeEventListener("keydown",e),document.removeEventListener("click",n,!0)},E=e=>function(t,r=!0){const{activePanel:o,backToMenuButton:i,container:M}=e;delete M.dataset.pristine,t===o&&(t=void 0);const l=document.documentElement.dataset,a=_();t?(e.container.classList.add("MainMenu__panelsWrap--active"),t.panelElm.append(i),o||(C(e),l.scrollTop=String(a.scrollTop),a.scrollTop=0,l.megaPanelActive="")):(i.remove(),e.container.classList.remove("MainMenu__panelsWrap--active"),P(e),a.scrollTop=parseInt(l.scrollTop||"")||0,delete l.scrollTop,delete l.megaPanelActive),o&&(h(o,!!t),e.activePanel=void 0),t&&(y(t),e.activePanel=t),r&&setTimeout(()=>{t?k(t.panelElm):o&&k(o.menuButton)},100)};window.Hanna.makeSprinkle({name:"MainMenu",init:e=>{const n=f({lang:p(e)},s),t=m(".MainMenu__panelsWrap",e);if(!t)return;t.dataset.pristine="true",b(".PrimaryPanel",t).forEach(a=>{const g=m(".PrimaryPanel__title",a);if(!g)return;const u=a.id&&m('a.MainMenu__link[href$="#'+a.id+'"]',e)||void 0,c={panelElm:a,titleButton:a.id?d("button",{className:"MainMenu__mega__title-toggler",onClick:()=>o(c,!1),"aria-controls":a.id},g.textContent):void 0,menuButton:u&&d("button",{className:"MainMenu__link",onClick:()=>o(c),"aria-controls":a.id,"aria-label":u.getAttribute("aria-label")},u.textContent)};c.titleButton&&(g.textContent="",g.append(c.titleButton)),u&&c.menuButton&&u.replaceWith(c.menuButton)});const r={container:t,activePanel:void 0,backToMenuButton:d("button",{className:"MainMenu__megapanel__backtomenu",onClick:()=>i(),"aria-label":n.backToMenuLong,lang:n.lang},n.backToMenu),escHandler:a=>{a.key==="Escape"&&i()},clickHandler(a){e.contains(a.target)||i()}},o=E(r),i=()=>o(void 0),M=a=>{a.leftTopmenu&&i()};return T.subscribe(M),()=>{T.unsubscribe(M),P(r)}},unmount:(e,n)=>{n&&n()}})}}});

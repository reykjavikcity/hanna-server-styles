System.register(["../../../_chunks/initHannaNamespace-3df190ef.js","../../../_chunks/compat.module-f329784f.js","../../../_chunks/qj-d717b116.js","../../../_chunks/jsxRuntime.module-6df2baee.js","../../../_chunks/_useMobileMenuToggling-0b192f4e.js","../../../_chunks/i18n-6c3e4ded.js","../../../_chunks/SiteSearchInput-e8edc379.js","../../../_chunks/env-60bbcb5a.js","../../../_chunks/ensureCSS-c100383e.js","../../../_chunks/getLang-b0f6fe19.js","./reykjavik.is.js","../../../_chunks/getSVGtext-1c46d1d7.js","../../../_chunks/assets-cefd5009.js"],function(Xe,Rt){"use strict";var ae,ye,Pe,Se,Re,ve,Ce,Te,Z,re,xe,De,Ee,je,ke,qe,Me;return{setters:[null,F=>{ae=F.h,ye=F._,Pe=F.F,Se=F.p,Re=F.C},F=>{ve=F.m,Ce=F.g,Te=F.i},F=>{Z=F.o},F=>{re=F.r},F=>{xe=F.g},F=>{De=F.S},F=>{Ee=F.i},F=>{je=F.e},F=>{ke=F.g},F=>{qe=F.createElasticQuery,Me=F.postQuery},null,null],execute:function(){var F={exports:{}},Ze="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",et=Ze,tt=et;function Ae(){}function Fe(){}Fe.resetWarningCache=Ae;var nt=function(){function h(O,C,I,R,T,m){if(m!==tt){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}h.isRequired=h;function g(){return h}var a={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:g,element:h,elementType:h,instanceOf:g,node:h,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:Fe,resetWarningCache:Ae};return a.PropTypes=a,a};F.exports,F.exports=nt();var le=F.exports;const rt=h=>{const{Tag:g="h1",align:a,small:O,children:C,wrapperProps:I}=h;return Z(g,{...I,className:ve("PageHeading",[O&&"small",a==="right"&&`align--${a}`],(I||{}).className),children:C})};var He={};function it(h,g){if(h===g)return!0;if(!h||!g)return!1;var a=h.length;if(g.length!==a)return!1;for(var O=0;O<a;O++)if(h[O]!==g[O])return!1;return!0}var ot=it,Ue={},Le=function(){function h(g,a){var O=[],C=!0,I=!1,R=void 0;try{for(var T=g[Symbol.iterator](),m;!(C=(m=T.next()).done)&&(O.push(m.value),!(a&&O.length===a));C=!0);}catch(y){I=!0,R=y}finally{try{!C&&T.return&&T.return()}finally{if(I)throw R}}return O}return function(g,a){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return h(g,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ut=function(h){var g=h.data,a=h.multiSection;function O(m){for(m===null?m=0:m++;m<g.length&&g[m]===0;)m++;return m===g.length?null:m}function C(m){for(m===null?m=g.length-1:m--;m>=0&&g[m]===0;)m--;return m===-1?null:m}function I(m){var y=Le(m,2),b=y[0],x=y[1];return a?x===null||x===g[b]-1?(b=O(b),b===null?[null,null]:[b,0]):[b,x+1]:g===0||x===g-1?[null,null]:x===null?[null,0]:[null,x+1]}function R(m){var y=Le(m,2),b=y[0],x=y[1];return a?x===null||x===0?(b=C(b),b===null?[null,null]:[b,g[b]-1]):[b,x-1]:g===0||x===0?[null,null]:x===null?[null,g-1]:[null,x-1]}function T(m){return I(m)[1]===null}return{next:I,prev:R,isLast:T}},fe={exports:{}},st=Object.prototype.propertyIsEnumerable;function at(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function lt(h){var g=Object.getOwnPropertyNames(h);return Object.getOwnPropertySymbols&&(g=g.concat(Object.getOwnPropertySymbols(h))),g.filter(function(a){return st.call(h,a)})}var ct=Object.assign||function(h,g){for(var a,O,C=at(h),I=1;I<arguments.length;I++){a=arguments[I],O=lt(Object(a));for(var R=0;R<O.length;R++)C[O[R]]=a[O[R]]}return C};fe.exports,function(h,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(){function m(y,b){var x=[],q=!0,H=!1,U=void 0;try{for(var A=y[Symbol.iterator](),j;!(q=(j=A.next()).done)&&(x.push(j.value),!(b&&x.length===b));q=!0);}catch(D){H=!0,U=D}finally{try{!q&&A.return&&A.return()}finally{if(H)throw U}}return x}return function(y,b){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return m(y,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function O(m){return m&&m.__esModule?m:{default:m}}function C(m){if(Array.isArray(m)){for(var y=0,b=Array(m.length);y<m.length;y++)b[y]=m[y];return b}else return Array.from(m)}var I=ct,R=O(I),T=function(y){return y};g.default=function(m){var y=Array.isArray(m)&&m.length===2?m:[m,null],b=a(y,2),x=b[0],q=b[1];return function(H){for(var U=arguments.length,A=Array(U>1?U-1:0),j=1;j<U;j++)A[j-1]=arguments[j];var D=A.map(function(W){return x[W]}).filter(T);return typeof D[0]=="string"||typeof q=="function"?{key:H,className:q?q.apply(void 0,C(D)):D.join(" ")}:{key:H,style:R.default.apply(void 0,[{}].concat(C(D)))}}},h.exports=g.default}(fe,fe.exports);var ft=fe.exports,We={},ge={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=a;function g(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(I){return typeof I}:g=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},g(O)}function a(O,C){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(O===C)return!1;var R=Object.keys(O),T=Object.keys(C);if(R.length!==T.length)return!0;var m={},y,b;for(y=0,b=I.length;y<b;y++)m[I[y]]=!0;for(y=0,b=R.length;y<b;y++){var x=R[y],q=O[x],H=C[x];if(q!==H){if(!m[x]||q===null||H===null||g(q)!=="object"||g(H)!=="object")return!0;var U=Object.keys(q),A=Object.keys(H);if(U.length!==A.length)return!0;for(var j=0,D=U.length;j<D;j++){var W=U[j];if(q[W]!==H[W])return!0}}}return!1}})(ge),function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=R(re),a=C(le),O=C(ge);function C(S){return S&&S.__esModule?S:{default:S}}function I(){if(typeof WeakMap!="function")return null;var S=new WeakMap;return I=function(){return S},S}function R(S){if(S&&S.__esModule)return S;if(S===null||T(S)!=="object"&&typeof S!="function")return{default:S};var P=I();if(P&&P.has(S))return P.get(S);var v={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in S)if(Object.prototype.hasOwnProperty.call(S,c)){var n=k?Object.getOwnPropertyDescriptor(S,c):null;n&&(n.get||n.set)?Object.defineProperty(v,c,n):v[c]=S[c]}return v.default=S,P&&P.set(S,v),v}function T(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(v){return typeof v}:T=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},T(S)}function m(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function y(S,P){for(var v=0;v<P.length;v++){var k=P[v];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(S,k.key,k)}}function b(S,P,v){return P&&y(S.prototype,P),v&&y(S,v),S}function x(S){return function(){var P=A(S),v;if(U()){var k=A(this).constructor;v=Reflect.construct(P,arguments,k)}else v=P.apply(this,arguments);return q(this,v)}}function q(S,P){return P&&(T(P)==="object"||typeof P=="function")?P:H(S)}function H(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function A(S){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},A(S)}function j(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),P&&D(S,P)}function D(S,P){return D=Object.setPrototypeOf||function(k,c){return k.__proto__=c,k},D(S,P)}function W(S,P,v){return P in S?Object.defineProperty(S,P,{value:v,enumerable:!0,configurable:!0,writable:!0}):S[P]=v,S}var G=function(S){j(v,S);var P=x(v);function v(){return m(this,v),P.apply(this,arguments)}return b(v,[{key:"shouldComponentUpdate",value:function(c){return(0,O.default)(c,this.props)}},{key:"render",value:function(){var c=this.props,n=c.section,u=c.renderSectionTitle,f=c.theme,d=c.sectionKeyPrefix,_=u(n);return _?g.default.createElement("div",f("".concat(d,"title"),"sectionTitle"),_):null}}]),v}(g.Component);h.default=G,W(G,"propTypes",{section:a.default.any.isRequired,renderSectionTitle:a.default.func.isRequired,theme:a.default.func.isRequired,sectionKeyPrefix:a.default.string.isRequired})}(We);var Ne={},$e={};(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=R(re),a=C(le),O=C(ge);function C(n){return n&&n.__esModule?n:{default:n}}function I(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return I=function(){return n},n}function R(n){if(n&&n.__esModule)return n;if(n===null||T(n)!=="object"&&typeof n!="function")return{default:n};var u=I();if(u&&u.has(n))return u.get(n);var f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in n)if(Object.prototype.hasOwnProperty.call(n,_)){var M=d?Object.getOwnPropertyDescriptor(n,_):null;M&&(M.get||M.set)?Object.defineProperty(f,_,M):f[_]=n[_]}return f.default=n,u&&u.set(n,f),f}function T(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(f){return typeof f}:T=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},T(n)}function m(){return m=Object.assign||function(n){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(n[d]=f[d])}return n},m.apply(this,arguments)}function y(n,u){var f=Object.keys(n);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(n);u&&(d=d.filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable})),f.push.apply(f,d)}return f}function b(n){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?y(Object(f),!0).forEach(function(d){k(n,d,f[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(f)):y(Object(f)).forEach(function(d){Object.defineProperty(n,d,Object.getOwnPropertyDescriptor(f,d))})}return n}function x(n,u){if(n==null)return{};var f=q(n,u),d,_;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(n);for(_=0;_<M.length;_++)d=M[_],!(u.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(n,d)&&(f[d]=n[d])}return f}function q(n,u){if(n==null)return{};var f={},d=Object.keys(n),_,M;for(M=0;M<d.length;M++)_=d[M],!(u.indexOf(_)>=0)&&(f[_]=n[_]);return f}function H(n,u){if(!(n instanceof u))throw new TypeError("Cannot call a class as a function")}function U(n,u){for(var f=0;f<u.length;f++){var d=u[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(n,d.key,d)}}function A(n,u,f){return u&&U(n.prototype,u),f&&U(n,f),n}function j(n){return function(){var u=S(n),f;if(G()){var d=S(this).constructor;f=Reflect.construct(u,arguments,d)}else f=u.apply(this,arguments);return D(this,f)}}function D(n,u){return u&&(T(u)==="object"||typeof u=="function")?u:W(n)}function W(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function G(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function S(n){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},S(n)}function P(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(u&&u.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),u&&v(n,u)}function v(n,u){return v=Object.setPrototypeOf||function(d,_){return d.__proto__=_,d},v(n,u)}function k(n,u,f){return u in n?Object.defineProperty(n,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[u]=f,n}var c=function(n){P(f,n);var u=j(f);function f(){var d;H(this,f);for(var _=arguments.length,M=new Array(_),Q=0;Q<_;Q++)M[Q]=arguments[Q];return d=u.call.apply(u,[this].concat(M)),k(W(d),"storeItemReference",function(B){B!==null&&(d.item=B)}),k(W(d),"onMouseEnter",function(B){var N=d.props,l=N.sectionIndex,t=N.itemIndex;d.props.onMouseEnter(B,{sectionIndex:l,itemIndex:t})}),k(W(d),"onMouseLeave",function(B){var N=d.props,l=N.sectionIndex,t=N.itemIndex;d.props.onMouseLeave(B,{sectionIndex:l,itemIndex:t})}),k(W(d),"onMouseDown",function(B){var N=d.props,l=N.sectionIndex,t=N.itemIndex;d.props.onMouseDown(B,{sectionIndex:l,itemIndex:t})}),k(W(d),"onClick",function(B){var N=d.props,l=N.sectionIndex,t=N.itemIndex;d.props.onClick(B,{sectionIndex:l,itemIndex:t})}),d}return A(f,[{key:"shouldComponentUpdate",value:function(_){return(0,O.default)(_,this.props,["renderItemData"])}},{key:"render",value:function(){var _=this.props,M=_.isHighlighted,Q=_.item,B=_.renderItem,N=_.renderItemData,l=x(_,["isHighlighted","item","renderItem","renderItemData"]);return delete l.sectionIndex,delete l.itemIndex,typeof l.onMouseEnter=="function"&&(l.onMouseEnter=this.onMouseEnter),typeof l.onMouseLeave=="function"&&(l.onMouseLeave=this.onMouseLeave),typeof l.onMouseDown=="function"&&(l.onMouseDown=this.onMouseDown),typeof l.onClick=="function"&&(l.onClick=this.onClick),g.default.createElement("li",m({role:"option"},l,{ref:this.storeItemReference}),B(Q,b({isHighlighted:M},N)))}}]),f}(g.Component);h.default=c,k(c,"propTypes",{sectionIndex:a.default.number,isHighlighted:a.default.bool.isRequired,itemIndex:a.default.number.isRequired,item:a.default.any.isRequired,renderItem:a.default.func.isRequired,renderItemData:a.default.object.isRequired,onMouseEnter:a.default.func,onMouseLeave:a.default.func,onMouseDown:a.default.func,onClick:a.default.func})})($e),function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=T(re),a=I(le),O=I($e),C=I(ge);function I(c){return c&&c.__esModule?c:{default:c}}function R(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return R=function(){return c},c}function T(c){if(c&&c.__esModule)return c;if(c===null||m(c)!=="object"&&typeof c!="function")return{default:c};var n=R();if(n&&n.has(c))return n.get(c);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var _=f?Object.getOwnPropertyDescriptor(c,d):null;_&&(_.get||_.set)?Object.defineProperty(u,d,_):u[d]=c[d]}return u.default=c,n&&n.set(c,u),u}function m(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(u){return typeof u}:m=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},m(c)}function y(){return y=Object.assign||function(c){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])}return c},y.apply(this,arguments)}function b(c,n){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);n&&(f=f.filter(function(d){return Object.getOwnPropertyDescriptor(c,d).enumerable})),u.push.apply(u,f)}return u}function x(c){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?arguments[n]:{};n%2?b(Object(u),!0).forEach(function(f){v(c,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):b(Object(u)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(u,f))})}return c}function q(c,n){if(!(c instanceof n))throw new TypeError("Cannot call a class as a function")}function H(c,n){for(var u=0;u<n.length;u++){var f=n[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function U(c,n,u){return n&&H(c.prototype,n),u&&H(c,u),c}function A(c){return function(){var n=G(c),u;if(W()){var f=G(this).constructor;u=Reflect.construct(n,arguments,f)}else u=n.apply(this,arguments);return j(this,u)}}function j(c,n){return n&&(m(n)==="object"||typeof n=="function")?n:D(c)}function D(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function G(c){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},G(c)}function S(c,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(n&&n.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),n&&P(c,n)}function P(c,n){return P=Object.setPrototypeOf||function(f,d){return f.__proto__=d,f},P(c,n)}function v(c,n,u){return n in c?Object.defineProperty(c,n,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[n]=u,c}var k=function(c){S(u,c);var n=A(u);function u(){var f;q(this,u);for(var d=arguments.length,_=new Array(d),M=0;M<d;M++)_[M]=arguments[M];return f=n.call.apply(n,[this].concat(_)),v(D(f),"storeHighlightedItemReference",function(Q){f.props.onHighlightedItemChange(Q===null?null:Q.item)}),f}return U(u,[{key:"shouldComponentUpdate",value:function(d){return(0,C.default)(d,this.props,["itemProps"])}},{key:"render",value:function(){var d=this,_=this.props,M=_.items,Q=_.itemProps,B=_.renderItem,N=_.renderItemData,l=_.sectionIndex,t=_.highlightedItemIndex,i=_.getItemId,o=_.theme,e=_.keyPrefix,r=l===null?e:"".concat(e,"section-").concat(l,"-"),s=typeof Q=="function";return g.default.createElement("ul",y({role:"listbox"},o("".concat(r,"items-list"),"itemsList")),M.map(function(p,w){var E=w===0,L=w===t,$="".concat(r,"item-").concat(w),z=s?Q({sectionIndex:l,itemIndex:w}):Q,V=x({id:i(l,w),"aria-selected":L},o($,"item",E&&"itemFirst",L&&"itemHighlighted"),{},z);return L&&(V.ref=d.storeHighlightedItemReference),g.default.createElement(O.default,y({},V,{sectionIndex:l,isHighlighted:L,itemIndex:w,item:p,renderItem:B,renderItemData:N}))}))}}]),u}(g.Component);h.default=k,v(k,"propTypes",{items:a.default.array.isRequired,itemProps:a.default.oneOfType([a.default.object,a.default.func]),renderItem:a.default.func.isRequired,renderItemData:a.default.object.isRequired,sectionIndex:a.default.number,highlightedItemIndex:a.default.number,onHighlightedItemChange:a.default.func.isRequired,getItemId:a.default.func.isRequired,theme:a.default.func.isRequired,keyPrefix:a.default.string.isRequired}),v(k,"defaultProps",{sectionIndex:null})}(Ne),function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=y(re),a=T(le),O=T(ut),C=T(ft),I=T(We),R=T(Ne);function T(t){return t&&t.__esModule?t:{default:t}}function m(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return m=function(){return t},t}function y(t){if(t&&t.__esModule)return t;if(t===null||W(t)!=="object"&&typeof t!="function")return{default:t};var i=m();if(i&&i.has(t))return i.get(t);var o={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=e?Object.getOwnPropertyDescriptor(t,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=t[r]}return o.default=t,i&&i.set(t,o),o}function b(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),o.push.apply(o,e)}return o}function x(t){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?b(Object(o),!0).forEach(function(e){_(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function q(t,i){return D(t)||j(t,i)||U(t,i)||H()}function H(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U(t,i){if(t){if(typeof t=="string")return A(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return A(t,i)}}function A(t,i){(i==null||i>t.length)&&(i=t.length);for(var o=0,e=new Array(i);o<i;o++)e[o]=t[o];return e}function j(t,i){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var o=[],e=!0,r=!1,s=void 0;try{for(var p=t[Symbol.iterator](),w;!(e=(w=p.next()).done)&&(o.push(w.value),!(i&&o.length===i));e=!0);}catch(E){r=!0,s=E}finally{try{!e&&p.return!=null&&p.return()}finally{if(r)throw s}}return o}}function D(t){if(Array.isArray(t))return t}function W(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(o){return typeof o}:W=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},W(t)}function G(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function S(t,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function P(t,i,o){return i&&S(t.prototype,i),o&&S(t,o),t}function v(t){return function(){var i=u(t),o;if(n()){var e=u(this).constructor;o=Reflect.construct(i,arguments,e)}else o=i.apply(this,arguments);return k(this,o)}}function k(t,i){return i&&(W(i)==="object"||typeof i=="function")?i:c(t)}function c(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},u(t)}function f(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&d(t,i)}function d(t,i){return d=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},d(t,i)}function _(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var M={},Q=function(i){return g.default.createElement("input",i)},B=function(i){var o=i.containerProps,e=i.children;return g.default.createElement("div",o,e)},N={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},l=function(t){f(o,t);var i=v(o);function o(e){var r;return G(this,o),r=i.call(this,e),_(c(r),"storeInputReference",function(s){s!==null&&(r.input=s);var p=r.props.inputProps.ref;p&&(typeof p=="function"?p(s):W(p)==="object"&&Object.prototype.hasOwnProperty.call(p,"current")&&(p.current=s))}),_(c(r),"storeItemsContainerReference",function(s){s!==null&&(r.itemsContainer=s)}),_(c(r),"onHighlightedItemChange",function(s){r.highlightedItem=s}),_(c(r),"getItemId",function(s,p){if(p===null)return null;var w=r.props.id,E=s===null?"":"section-".concat(s);return"react-autowhatever-".concat(w,"-").concat(E,"-item-").concat(p)}),_(c(r),"onFocus",function(s){var p=r.props.inputProps;r.setState({isInputFocused:!0}),p.onFocus&&p.onFocus(s)}),_(c(r),"onBlur",function(s){var p=r.props.inputProps;r.setState({isInputFocused:!1}),p.onBlur&&p.onBlur(s)}),_(c(r),"onKeyDown",function(s){var p=r.props,w=p.inputProps,E=p.highlightedSectionIndex,L=p.highlightedItemIndex,$=s.keyCode;switch($){case 40:case 38:{var z=$===40?"next":"prev",V=r.sectionIterator[z]([E,L]),J=q(V,2),X=J[0],ne=J[1];w.onKeyDown(s,{newHighlightedSectionIndex:X,newHighlightedItemIndex:ne});break}default:w.onKeyDown(s,{highlightedSectionIndex:E,highlightedItemIndex:L})}}),r.highlightedItem=null,r.state={isInputFocused:!1},r.setSectionsItems(e),r.setSectionIterator(e),r.setTheme(e),r}return P(o,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){r.items!==this.props.items&&this.setSectionsItems(r),(r.items!==this.props.items||r.multiSection!==this.props.multiSection)&&this.setSectionIterator(r),r.theme!==this.props.theme&&this.setTheme(r)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(r){r.multiSection&&(this.sectionsItems=r.items.map(function(s){return r.getSectionItems(s)}),this.sectionsLengths=this.sectionsItems.map(function(s){return s.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(s){return s===0}))}},{key:"setSectionIterator",value:function(r){this.sectionIterator=(0,O.default)({multiSection:r.multiSection,data:r.multiSection?this.sectionsLengths:r.items.length})}},{key:"setTheme",value:function(r){this.theme=(0,C.default)(r.theme)}},{key:"renderSections",value:function(){var r=this;if(this.allSectionsAreEmpty)return null;var s=this.theme,p=this.props,w=p.id,E=p.items,L=p.renderItem,$=p.renderItemData,z=p.renderSectionTitle,V=p.highlightedSectionIndex,J=p.highlightedItemIndex,X=p.itemProps;return E.map(function(ne,Y){var oe="react-autowhatever-".concat(w,"-"),ue="".concat(oe,"section-").concat(Y,"-"),ee=Y===0;return g.default.createElement("div",s("".concat(ue,"container"),"sectionContainer",ee&&"sectionContainerFirst"),g.default.createElement(I.default,{section:ne,renderSectionTitle:z,theme:s,sectionKeyPrefix:ue}),g.default.createElement(R.default,{items:r.sectionsItems[Y],itemProps:X,renderItem:L,renderItemData:$,sectionIndex:Y,highlightedItemIndex:V===Y?J:null,onHighlightedItemChange:r.onHighlightedItemChange,getItemId:r.getItemId,theme:s,keyPrefix:oe,ref:r.storeItemsListReference}))})}},{key:"renderItems",value:function(){var r=this.props.items;if(r.length===0)return null;var s=this.theme,p=this.props,w=p.id,E=p.renderItem,L=p.renderItemData,$=p.highlightedSectionIndex,z=p.highlightedItemIndex,V=p.itemProps;return g.default.createElement(R.default,{items:r,itemProps:V,renderItem:E,renderItemData:L,highlightedItemIndex:$===null?z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:s,keyPrefix:"react-autowhatever-".concat(w,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var r=this.highlightedItem;if(r){var s=this.itemsContainer,p=r.offsetParent===s?r.offsetTop:r.offsetTop-s.offsetTop,w=s.scrollTop;p<w?w=p:p+r.offsetHeight>w+s.offsetHeight&&(w=p+r.offsetHeight-s.offsetHeight),w!==s.scrollTop&&(s.scrollTop=w)}}},{key:"render",value:function(){var r=this.theme,s=this.props,p=s.id,w=s.multiSection,E=s.renderInputComponent,L=s.renderItemsContainer,$=s.highlightedSectionIndex,z=s.highlightedItemIndex,V=this.state.isInputFocused,J=w?this.renderSections():this.renderItems(),X=J!==null,ne=this.getItemId($,z),Y="react-autowhatever-".concat(p),oe=x({role:"combobox","aria-haspopup":"listbox","aria-owns":Y,"aria-expanded":X},r("react-autowhatever-".concat(p,"-container"),"container",X&&"containerOpen"),{},this.props.containerProps),ue=E(x({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":Y,"aria-activedescendant":ne},r("react-autowhatever-".concat(p,"-input"),"input",X&&"inputOpen",V&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),ee=L({containerProps:x({id:Y,role:"listbox"},r("react-autowhatever-".concat(p,"-items-container"),"itemsContainer",X&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:J});return g.default.createElement("div",oe,ue,ee)}}]),o}(g.Component);h.default=l,_(l,"propTypes",{id:a.default.string,multiSection:a.default.bool,renderInputComponent:a.default.func,renderItemsContainer:a.default.func,items:a.default.array.isRequired,renderItem:a.default.func,renderItemData:a.default.object,renderSectionTitle:a.default.func,getSectionItems:a.default.func,containerProps:a.default.object,inputProps:a.default.object,itemProps:a.default.oneOfType([a.default.object,a.default.func]),highlightedSectionIndex:a.default.number,highlightedItemIndex:a.default.number,theme:a.default.oneOfType([a.default.object,a.default.array])}),_(l,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:Q,renderItemsContainer:B,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:M,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:M,inputProps:M,itemProps:M,highlightedSectionIndex:null,highlightedItemIndex:null,theme:N})}(Ue);var ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.mapToAutowhateverTheme=ie.defaultTheme=void 0;var gt={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};ie.defaultTheme=gt;var pt=function(g){var a={};for(var O in g)switch(O){case"suggestionsContainer":a.itemsContainer=g[O];break;case"suggestionsContainerOpen":a.itemsContainerOpen=g[O];break;case"suggestion":a.item=g[O];break;case"suggestionFirst":a.itemFirst=g[O];break;case"suggestionHighlighted":a.itemHighlighted=g[O];break;case"suggestionsList":a.itemsList=g[O];break;default:a[O]=g[O]}return a};ie.mapToAutowhateverTheme=pt,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var g=m(re),a=R(le),O=R(ot),C=R(Ue),I=ie;function R(l){return l&&l.__esModule?l:{default:l}}function T(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return T=function(){return l},l}function m(l){if(l&&l.__esModule)return l;if(l===null||y(l)!=="object"&&typeof l!="function")return{default:l};var t=T();if(t&&t.has(l))return t.get(l);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in l)if(Object.prototype.hasOwnProperty.call(l,e)){var r=o?Object.getOwnPropertyDescriptor(l,e):null;r&&(r.get||r.set)?Object.defineProperty(i,e,r):i[e]=l[e]}return i.default=l,t&&t.set(l,i),i}function y(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(i){return typeof i}:y=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},y(l)}function b(l,t){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);t&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})),i.push.apply(i,o)}return i}function x(l){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?b(Object(i),!0).forEach(function(o){v(l,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(i,o))})}return l}function q(l,t){if(!(l instanceof t))throw new TypeError("Cannot call a class as a function")}function H(l,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}function U(l,t,i){return t&&H(l.prototype,t),i&&H(l,i),l}function A(l){return function(){var t=G(l),i;if(W()){var o=G(this).constructor;i=Reflect.construct(t,arguments,o)}else i=t.apply(this,arguments);return j(this,i)}}function j(l,t){return t&&(y(t)==="object"||typeof t=="function")?t:D(l)}function D(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function G(l){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},G(l)}function S(l,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(t&&t.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),t&&P(l,t)}function P(l,t){return P=Object.setPrototypeOf||function(o,e){return o.__proto__=e,o},P(l,t)}function v(l,t,i){return t in l?Object.defineProperty(l,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[t]=i,l}var k=function(){return!0},c=function(t){return t.trim().length>0},n=function(t){var i=t.containerProps,o=t.children;return g.default.createElement("div",i,o)},u="suggestions-revealed",f="suggestions-updated",d="suggestion-selected",_="input-focused",M="input-changed",Q="input-blurred",B="escape-pressed",N=function(l){S(i,l);var t=A(i);function i(o){var e,r=o.alwaysRenderSuggestions;return q(this,i),e=t.call(this),v(D(e),"onDocumentMouseDown",function(s){e.justClickedOnSuggestionsContainer=!1;for(var p=s.detail&&s.detail.target||s.target;p!==null&&p!==document;){if(p.getAttribute&&p.getAttribute("data-suggestion-index")!==null)return;if(p===e.suggestionsContainer){e.justClickedOnSuggestionsContainer=!0;return}p=p.parentNode}}),v(D(e),"storeAutowhateverRef",function(s){s!==null&&(e.autowhatever=s)}),v(D(e),"onSuggestionMouseEnter",function(s,p){var w=p.sectionIndex,E=p.itemIndex;e.updateHighlightedSuggestion(w,E),s.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!0),e.justMouseEntered=!0,setTimeout(function(){e.justMouseEntered=!1})}),v(D(e),"highlightFirstSuggestion",function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)}),v(D(e),"onDocumentMouseUp",function(){e.pressedSuggestion&&!e.justSelectedSuggestion&&e.input.focus(),e.pressedSuggestion=null}),v(D(e),"onSuggestionMouseDown",function(s){e.justSelectedSuggestion||(e.justSelectedSuggestion=!0,e.pressedSuggestion=s.target)}),v(D(e),"onSuggestionsClearRequested",function(){var s=e.props.onSuggestionsClearRequested;s&&s()}),v(D(e),"onSuggestionSelected",function(s,p){var w=e.props,E=w.alwaysRenderSuggestions,L=w.onSuggestionSelected,$=w.onSuggestionsFetchRequested;L&&L(s,p);var z=e.props.shouldKeepSuggestionsOnSelect(p.suggestion);E||z?$({value:p.suggestionValue,reason:d}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()}),v(D(e),"onSuggestionClick",function(s){var p=e.props,w=p.alwaysRenderSuggestions,E=p.focusInputOnSuggestionClick,L=e.getSuggestionIndices(e.findSuggestionElement(s.target)),$=L.sectionIndex,z=L.suggestionIndex,V=e.getSuggestion($,z),J=e.props.getSuggestionValue(V);e.maybeCallOnChange(s,J,"click"),e.onSuggestionSelected(s,{suggestion:V,suggestionValue:J,suggestionIndex:z,sectionIndex:$,method:"click"});var X=e.props.shouldKeepSuggestionsOnSelect(V);w||X||e.closeSuggestions(),E===!0?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})}),v(D(e),"onBlur",function(){var s=e.props,p=s.inputProps,w=s.shouldRenderSuggestions,E=p.value,L=p.onBlur,$=e.getHighlightedSuggestion(),z=w(E,Q);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!z}),L&&L(e.blurEvent,{highlightedSuggestion:$})}),v(D(e),"onSuggestionMouseLeave",function(s){e.resetHighlightedSuggestion(!1),e.justSelectedSuggestion&&s.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!1)}),v(D(e),"onSuggestionTouchStart",function(){e.justSelectedSuggestion=!0}),v(D(e),"onSuggestionTouchMove",function(){e.justSelectedSuggestion=!1,e.pressedSuggestion=null,e.input.focus()}),v(D(e),"itemProps",function(s){var p=s.sectionIndex,w=s.itemIndex;return{"data-section-index":p,"data-suggestion-index":w,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.onSuggestionMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionTouchStart,onTouchMove:e.onSuggestionTouchMove,onClick:e.onSuggestionClick}}),v(D(e),"renderSuggestionsContainer",function(s){var p=s.containerProps,w=s.children,E=e.props.renderSuggestionsContainer;return E({containerProps:p,children:w,query:e.getQuery()})}),e.state={isFocused:!1,isCollapsed:!r,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},e.justPressedUpDown=!1,e.justMouseEntered=!1,e.pressedSuggestion=null,e}return U(i,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var r=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!e.highlightFirstSuggestion;(0,O.default)(e.suggestions,this.props.suggestions)?e.highlightFirstSuggestion&&e.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():r&&this.resetHighlightedSuggestion():this.willRenderSuggestions(e,f)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),r&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(e,r){var s=this.props,p=s.suggestions,w=s.onSuggestionHighlighted,E=s.highlightFirstSuggestion;if(!(0,O.default)(p,e.suggestions)&&p.length>0&&E){this.highlightFirstSuggestion();return}if(w){var L=this.getHighlightedSuggestion(),$=r.highlightedSuggestion;L!=$&&w({suggestion:L})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(e,r,s){var p=this;this.setState(function(w){var E=w.valueBeforeUpDown;return r===null?E=null:E===null&&typeof s<"u"&&(E=s),{highlightedSectionIndex:e,highlightedSuggestionIndex:r,highlightedSuggestion:r===null?null:p.getSuggestion(e,r),valueBeforeUpDown:E}})}},{key:"resetHighlightedSuggestion",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(r){var s=r.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:e?null:s}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(e,r){var s=this.props,p=s.suggestions,w=s.multiSection,E=s.getSectionSuggestions;return w?E(p[e])[r]:p[r]}},{key:"getHighlightedSuggestion",value:function(){var e=this.state,r=e.highlightedSectionIndex,s=e.highlightedSuggestionIndex;return s===null?null:this.getSuggestion(r,s)}},{key:"getSuggestionValueByIndex",value:function(e,r){var s=this.props.getSuggestionValue;return s(this.getSuggestion(e,r))}},{key:"getSuggestionIndices",value:function(e){var r=e.getAttribute("data-section-index"),s=e.getAttribute("data-suggestion-index");return{sectionIndex:typeof r=="string"?parseInt(r,10):null,suggestionIndex:parseInt(s,10)}}},{key:"findSuggestionElement",value:function(e){var r=e;do{if(r.getAttribute&&r.getAttribute("data-suggestion-index")!==null)return r;r=r.parentNode}while(r!==null);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(e,r,s){var p=this.props.inputProps,w=p.value,E=p.onChange;r!==w&&E(e,{newValue:r,method:s})}},{key:"willRenderSuggestions",value:function(e,r){var s=e.suggestions,p=e.inputProps,w=e.shouldRenderSuggestions,E=p.value;return s.length>0&&w(E,r)}},{key:"getQuery",value:function(){var e=this.props.inputProps,r=e.value,s=this.state.valueBeforeUpDown;return(s===null?r:s).trim()}},{key:"render",value:function(){var e=this,r=this.props,s=r.suggestions,p=r.renderInputComponent,w=r.onSuggestionsFetchRequested,E=r.renderSuggestion,L=r.inputProps,$=r.multiSection,z=r.renderSectionTitle,V=r.id,J=r.getSectionSuggestions,X=r.theme,ne=r.getSuggestionValue,Y=r.alwaysRenderSuggestions,oe=r.highlightFirstSuggestion,ue=r.containerProps,ee=this.state,Ot=ee.isFocused,Be=ee.isCollapsed,Ke=ee.highlightedSectionIndex,ze=ee.highlightedSuggestionIndex,de=ee.valueBeforeUpDown,he=Y?k:this.props.shouldRenderSuggestions,se=L.value,Ge=L.onFocus,Qe=L.onKeyDown,bt=this.willRenderSuggestions(this.props,"render"),me=Y||Ot&&!Be&&bt,It=me?s:[],wt=x({},L,{onFocus:function(K){if(!e.justSelectedSuggestion&&!e.justClickedOnSuggestionsContainer){var te=he(se,_);e.setState({isFocused:!0,isCollapsed:!te}),Ge&&Ge(K),te&&w({value:se,reason:_})}},onBlur:function(K){if(e.justClickedOnSuggestionsContainer){e.input.focus();return}e.blurEvent=K,e.justSelectedSuggestion||(e.onBlur(),e.onSuggestionsClearRequested())},onChange:function(K){var te=K.target.value,ce=he(te,M);e.maybeCallOnChange(K,te,"type"),e.suggestionsContainer&&(e.suggestionsContainer.scrollTop=0),e.setState(x({},oe?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!ce})),ce?w({value:te,reason:M}):e.onSuggestionsClearRequested()},onKeyDown:function(K,te){var ce=K.keyCode;switch(ce){case 40:case 38:if(Be)he(se,u)&&(w({value:se,reason:u}),e.revealSuggestions(),K.preventDefault());else if(s.length>0){var Ve=te.newHighlightedSectionIndex,Oe=te.newHighlightedItemIndex,be;Oe===null?be=de===null?se:de:be=e.getSuggestionValueByIndex(Ve,Oe),e.updateHighlightedSuggestion(Ve,Oe,se),e.maybeCallOnChange(K,be,ce===40?"down":"up"),K.preventDefault()}e.justPressedUpDown=!0,setTimeout(function(){e.justPressedUpDown=!1});break;case 13:{if(K.keyCode===229)break;var Ie=e.getHighlightedSuggestion();if(me&&!Y&&e.closeSuggestions(),Ie!=null){K.preventDefault();var Ye=ne(Ie);e.maybeCallOnChange(K,Ye,"enter"),e.onSuggestionSelected(K,{suggestion:Ie,suggestionValue:Ye,suggestionIndex:ze,sectionIndex:Ke,method:"enter"}),e.justSelectedSuggestion=!0,setTimeout(function(){e.justSelectedSuggestion=!1})}break}case 27:{me&&K.preventDefault();var Je=me&&!Y;if(de===null){if(!Je){var we="";e.maybeCallOnChange(K,we,"escape"),he(we,B)?w({value:we,reason:B}):e.onSuggestionsClearRequested()}}else e.maybeCallOnChange(K,de,"escape");Je?(e.onSuggestionsClearRequested(),e.closeSuggestions()):e.resetHighlightedSuggestion();break}}Qe&&Qe(K)}}),Pt={query:this.getQuery()};return g.default.createElement(C.default,{multiSection:$,items:It,renderInputComponent:p,renderItemsContainer:this.renderSuggestionsContainer,renderItem:E,renderItemData:Pt,renderSectionTitle:z,getSectionItems:J,highlightedSectionIndex:Ke,highlightedItemIndex:ze,containerProps:ue,inputProps:wt,itemProps:this.itemProps,theme:(0,I.mapToAutowhateverTheme)(X),id:V,ref:this.storeAutowhateverRef})}}]),i}(g.Component);h.default=N,v(N,"propTypes",{suggestions:a.default.array.isRequired,onSuggestionsFetchRequested:function(t,i){var o=t[i];if(typeof o!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(t,i){var o=t[i];if(t.alwaysRenderSuggestions===!1&&typeof o!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:a.default.func,onSuggestionSelected:a.default.func,onSuggestionHighlighted:a.default.func,renderInputComponent:a.default.func,renderSuggestionsContainer:a.default.func,getSuggestionValue:a.default.func.isRequired,renderSuggestion:a.default.func.isRequired,inputProps:function(t,i){var o=t[i];if(!o)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(o,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(o,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:a.default.func,alwaysRenderSuggestions:a.default.bool,multiSection:a.default.bool,renderSectionTitle:function(t,i){var o=t[i];if(t.multiSection===!0&&typeof o!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(t,i){var o=t[i];if(t.multiSection===!0&&typeof o!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:a.default.bool,highlightFirstSuggestion:a.default.bool,theme:a.default.object,id:a.default.string,containerProps:a.default.object}),v(N,"defaultProps",{renderSuggestionsContainer:n,shouldRenderSuggestions:c,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:I.defaultTheme,id:"1",containerProps:{}})}(He);var dt=He.default;const ht=Ce(dt),mt={is:{label:"Leit á vefnum",inputLabel:"Leitarorð",buttonText:"Leita",placeholder:"Sláðu inn leitarorð",suggestionsLabel:"Tillögur"},en:{label:"Site search",inputLabel:"Search terms",buttonText:"Search",placeholder:"Enter search terms",suggestionsLabel:"Suggestions"},pl:{label:"Wyszukiwanie na stronie",inputLabel:"Wyszukiwane słowa",buttonText:"Szukaj",placeholder:"Wpisz wyszukiwane słowa",suggestionsLabel:"Sugestie"}},yt=h=>{const{suggestions:g,setSuggestions:a,renderSuggestion:O,getSuggestionValue:C,onSuggestionsFetchRequested:I,onSuggestionSelected:R,onSuggestionHighlighted:T,onSubmit:m,onButtonClick:y,bem:b="SiteSearchAutocomplete",wrapperProps:x}=h,[q,H]=ae(""),U=ye(null),A=xe(h,mt);return Z(ht,{theme:{container:b,containerOpen:`${b}--open`,suggestionsContainer:`${b}__container`,suggestionsContainerOpen:`${b}__container--open`,suggestionsList:`${b}__list`,suggestion:`${b}__item`,suggestionHighlighted:`${b}__item--highlighted`},focusInputOnSuggestionClick:!0,suggestions:g,onSuggestionsClearRequested:()=>a([]),onSuggestionsFetchRequested:I,getSuggestionValue:C,onSuggestionSelected:R,onSuggestionHighlighted:T,renderSuggestion:O||(j=>String(j)),containerProps:{...x,"aria-label":A.label},renderSuggestionsContainer:({containerProps:j,children:D})=>Z("div",{...j,"aria-label":g.length?A.suggestionsLabel:void 0,children:D}),inputProps:{ref:U,value:q,onChange:(j,{newValue:D})=>{H(D)}},renderInputComponent:j=>{const{className:D,type:W,disabled:G,readOnly:S,required:P,children:v,ref:k,...c}=j;return Z(De,{...c,inputRef:k,label:h.label||A.inputLabel,placeholder:A.placeholder,buttonText:A.buttonText,onSubmit:m&&(()=>m(q)),onButtonClick:y&&(()=>y(q))})}})},St=(h,g=0,a)=>{const O=ye(),[[C,I],R]=ae(()=>{const y=typeof h=="function"?h():h;return[y,y]}),T=Pe(()=>{const y=(b,x)=>{O.current&&clearTimeout(O.current);const q=x!==void 0?x:g;R(H=>{const[U,A]=H,j=typeof b=="function"?b(U,A):b;return!q||j===U?j===U&&j===A?H:[j,j]:(O.current=setTimeout(()=>R([j,j]),q),[U,j])})};return y.cancel=()=>{y(b=>b,null)},y},[]);return Se(()=>(a!==void 0&&T(a),()=>{O.current&&clearTimeout(O.current)}),[]),[C,T,I,C!==I||void 0]},vt=h=>{const[g,a]=St(!1);Se(()=>{const I=R=>{R.key==="Escape"&&a(!1)};return document.addEventListener("keyup",I),()=>document.removeEventListener("keyup",I)},[]);const O=()=>{a(!0)},C=I=>{(!I.relatedTarget||!I.currentTarget.contains(I.relatedTarget))&&a(!1,100)};return Z("div",{className:ve("SiteSearchCurtain",[g&&"focused"]),onFocus:O,onBlur:C,...Ee&&{onfocusin:O,onfocusout:C},children:h.children})},pe=(...h)=>console.error("renderSiteSearchAutocomplete: ",...h),_t=h=>{const{title:g,lang:a,apiUri:O,searchPagePath:C,exceptBundles:I}=h,[R,T]=ae([]),[m]=ae(()=>Te.d(200));return Z(vt,{children:[g&&Z(rt,{children:g}),Z(yt,{lang:a,suggestions:R,renderSuggestion:({label:y})=>y,setSuggestions:T,onSuggestionSelected:(y,{suggestion:b})=>{window.location.href=b.href},getSuggestionValue:({label:y})=>y,onSubmit:y=>{window.location.href=`${C}?q=${encodeURIComponent(y)}`},onSuggestionsFetchRequested:({value:y})=>{m.cancel(),y.length>=2&&m(()=>{const b=qe({value:y,preference:"searchbox",size:5,_source:["label","url_alias"],exceptBundles:I});Me(O,[b]).then(x=>{const[q]=x;if(!q)throw new Error;T(q.items.map(({label:H,url_alias:U})=>({label:H,href:U})))})})}})]})},Ct=Xe("default",h=>{var m;const{insertAt:g,apiUri:a,searchPagePath:O,exceptBundles:C}=h;if(!a||!O){!a&&pe("`apiUri` missing"),!O&&pe("`searchPagePath` missing");return}const I=document.querySelector(g),R=I==null?void 0:I.closest(".RowBlockColumn");if(!R){pe(I?"RowBlockColumn parent not found":`Insertion point "${g}" not found`);return}const T=((m=R.querySelector(".PageHeading"))==null?void 0:m.textContent)||void 0;je("SiteSearchCurtain").then(()=>{const y=document.createElement("div");Re.render(Z(_t,{lang:ke(R),title:T,apiUri:a,searchPagePath:O,exceptBundles:C}),y,()=>{R.textContent="",R.append(y)})})})}}});
